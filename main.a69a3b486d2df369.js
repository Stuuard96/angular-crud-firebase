"use strict";(self.webpackChunkapp_crud_ang_fire=self.webpackChunkapp_crud_ang_fire||[]).push([[179],{2011:(ut,Ee,O)=>{O.d(Ee,{Dh:()=>he,GT:()=>ge,cc:()=>Ae,hO:()=>ze,on:()=>G,pX:()=>X,xv:()=>le});var c=O(5e3),K=O(127),k=O(5813);ut=O.hmd(ut);const oe=["ngOnDestroy"],X=(De,rt,Ke,Ce={})=>new Proxy(De,{get:(ye,be)=>Ke.runOutsideAngular(()=>{var We;if(De[be])return(null===(We=null==Ce?void 0:Ce.spy)||void 0===We?void 0:We.get)&&Ce.spy.get(be,De[be]),De[be];if(oe.indexOf(be)>-1)return()=>{};const He=rt.toPromise().then(te=>{const z=te&&te[be];return"function"==typeof z?z.bind(te):z&&z.then?z.then(ne=>Ke.run(()=>ne)):Ke.run(()=>z)});return new Proxy(()=>{},{get:(te,z)=>He[z],apply:(te,z,ne)=>He.then(me=>{var ie;const Oe=me&&me(...ne);return(null===(ie=null==Ce?void 0:Ce.spy)||void 0===ie?void 0:ie.apply)&&Ce.spy.apply(be,ne,Oe),Oe})})})}),ge=(De,rt)=>{rt.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Ce=>{Object.defineProperty(De.prototype,Ce,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Ce))})})};class re{constructor(rt){return rt}}const he=new c.OlP("angularfire2.app.options"),le=new c.OlP("angularfire2.app.name");function G(De,rt,Ke){const ye="object"==typeof Ke&&Ke||{};ye.name=ye.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const We=K.Z.apps.filter(He=>He&&He.name===ye.name)[0]||rt.runOutsideAngular(()=>K.Z.initializeApp(De,ye));try{JSON.stringify(De)!==JSON.stringify(We.options)&&H("error",`${We.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new re(We)}const H=(De,...rt)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[De](...rt)},Q={provide:re,useFactory:G,deps:[he,c.R0b,[new c.FiY,le]]};let ze=(()=>{class De{constructor(Ke){K.Z.registerVersion("angularfire",k.q4.full,"core"),K.Z.registerVersion("angularfire",k.q4.full,"app-compat"),K.Z.registerVersion("angular",c.q4F.full,Ke.toString())}static initializeApp(Ke,Ce){return{ngModule:De,providers:[{provide:he,useValue:Ke},{provide:le,useValue:Ce}]}}}return De.\u0275fac=function(Ke){return new(Ke||De)(c.LFG(c.Lbi))},De.\u0275mod=c.oAB({type:De}),De.\u0275inj=c.cJS({providers:[Q]}),De})();function Ae(De,rt,Ke,Ce,ye){const[,be,We]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===De)||[];if(be)return function ke(De,rt){try{return De.toString()===rt.toString()}catch(Ke){return De===rt}}(ye,We)||(fe("error",`${rt} was already initialized on the ${Ke} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ye,was:We})),be;{const He=Ce();return globalThis.\u0275AngularfireInstanceCache.push([De,He,ye]),He}}const Be=!!ut.hot,fe=(De,...rt)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[De](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ee,O)=>{O.d(Ee,{q4:()=>Wl,iC:()=>Yl,HU:()=>ku,vb:()=>Dd,JM:()=>ro});var c=O(5e3),K=O(5867),k=O(5861),oe=O(9681),X=O(2090),ge=O(4859),re=O(1877);const he="@firebase/installations",H="w:0.5.7",Q="FIS_v2",De=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(C){return C instanceof X.ZR&&C.code.includes("request-failed")}function Ke({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ce(C){return{token:C.token,requestStatus:2,expiresIn:ne(C.expiresIn),creationTime:Date.now()}}function ye(C,I){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(C,I){const L=(yield I.json()).error;return De.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function We({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function He(C,{refreshToken:I}){const x=We(C);return x.append("Authorization",function me(C){return`${Q} ${C}`}(I)),x}function te(C){return z.apply(this,arguments)}function z(){return(z=(0,k.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function ne(C){return Number(C.replace("s","000"))}function ie(C,I){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:I},{fid:x}){const L=Ke(C),q=We(C),ee=I.getImmediate({optional:!0});if(ee){const Et=yield ee.getHeartbeatsHeader();Et&&q.append("x-firebase-client",Et)}const Se={method:"POST",headers:q,body:JSON.stringify({fid:x,authVersion:Q,appId:C.appId,sdkVersion:H})},Xe=yield te(()=>fetch(L,Se));if(Xe.ok){const Et=yield Xe.json();return{fid:Et.fid||x,registrationStatus:2,refreshToken:Et.refreshToken,authToken:Ce(Et.authToken)}}throw yield ye("Create Installation",Xe)})).apply(this,arguments)}function ae(C){return new Promise(I=>{setTimeout(I,C)})}const Xt=/^[cdef][\w-]{21}$/;function ct(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function _t(C){return function It(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Xt.test(x)?x:""}catch(C){return""}}function cn(C){return`${C.appName}!${C.appId}`}const dn=new Map;function Ai(C,I){const x=cn(C);en(x,I),function Ht(C,I){const x=function ci(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=C=>{en(C.data.key,C.data.fid)}),ur}();x&&x.postMessage({key:C,fid:I}),function Os(){0===dn.size&&ur&&(ur.close(),ur=null)}()}(x,I)}function en(C,I){const x=dn.get(C);if(x)for(const L of x)L(I)}let ur=null;const Lr="firebase-installations-store";let as=null;function us(){return as||(as=(0,X.X3)("firebase-installations-database",1,(C,I)=>{0===I&&C.createObjectStore(Lr)})),as}function dt(C,I){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,k.Z)(function*(C,I){const x=cn(C),q=(yield us()).transaction(Lr,"readwrite"),ee=q.objectStore(Lr),Ne=yield ee.get(x);return yield ee.put(I,x),yield q.complete,(!Ne||Ne.fid!==I.fid)&&Ai(C,I.fid),I})).apply(this,arguments)}function tr(C){return qn.apply(this,arguments)}function qn(){return(qn=(0,k.Z)(function*(C){const I=cn(C),L=(yield us()).transaction(Lr,"readwrite");yield L.objectStore(Lr).delete(I),yield L.complete})).apply(this,arguments)}function di(C,I){return fo.apply(this,arguments)}function fo(){return(fo=(0,k.Z)(function*(C,I){const x=cn(C),q=(yield us()).transaction(Lr,"readwrite"),ee=q.objectStore(Lr),Ne=yield ee.get(x),Se=I(Ne);return void 0===Se?yield ee.delete(x):yield ee.put(Se,x),yield q.complete,Se&&(!Ne||Ne.fid!==Se.fid)&&Ai(C,Se.fid),Se})).apply(this,arguments)}function yn(C){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*(C){let I;const x=yield di(C.appConfig,L=>{const q=ks(L),ee=wa(C,q);return I=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield I}:{installationEntry:x,registrationPromise:I}})).apply(this,arguments)}function ks(C){return Gt(C||{fid:ct(),registrationStatus:0})}function wa(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(De.create("app-offline"))};const x={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},L=function $t(C,I){return at.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:L}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Dt(C)}:{installationEntry:I}}function at(){return(at=(0,k.Z)(function*(C,I){try{const x=yield ie(C,I);return dt(C.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield tr(C.appConfig):yield dt(C.appConfig,{fid:I.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Dt(C){return lr.apply(this,arguments)}function lr(){return(lr=(0,k.Z)(function*(C){let I=yield $i(C.appConfig);for(;1===I.registrationStatus;)yield ae(100),I=yield $i(C.appConfig);if(0===I.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield yn(C);return L||x}return I})).apply(this,arguments)}function $i(C){return di(C,I=>{if(!I)throw De.create("installation-not-found");return Gt(I)})}function Gt(C){return function po(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function br(C,I){return cr.apply(this,arguments)}function cr(){return(cr=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:I},x){const L=ht(C,x),q=He(C,x),ee=I.getImmediate({optional:!0});if(ee){const Et=yield ee.getHeartbeatsHeader();Et&&q.append("x-firebase-client",Et)}const Se={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:H,appId:C.appId}})},Xe=yield te(()=>fetch(L,Se));if(Xe.ok)return Ce(yield Xe.json());throw yield ye("Generate Auth Token",Xe)})).apply(this,arguments)}function ht(C,{fid:I}){return`${Ke(C)}/${I}/authTokens:generate`}function Dr(C){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,k.Z)(function*(C,I=!1){let x;const L=yield di(C.appConfig,ee=>{if(!Ft(ee))throw De.create("not-registered");const Ne=ee.authToken;if(!I&&j(Ne))return ee;if(1===Ne.requestStatus)return x=Ye(C,I),ee;{if(!navigator.onLine)throw De.create("app-offline");const Se=$(ee);return x=ft(C,Se),Se}});return x?yield x:L.authToken})).apply(this,arguments)}function Ye(C,I){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,k.Z)(function*(C,I){let x=yield tt(C.appConfig);for(;1===x.authToken.requestStatus;)yield ae(100),x=yield tt(C.appConfig);const L=x.authToken;return 0===L.requestStatus?Dr(C,I):L})).apply(this,arguments)}function tt(C){return di(C,I=>{if(!Ft(I))throw De.create("not-registered");return function de(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function ft(C,I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,k.Z)(function*(C,I){try{const x=yield br(C,I),L=Object.assign(Object.assign({},I),{authToken:x});return yield dt(C.appConfig,L),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield dt(C.appConfig,L)}else yield tr(C.appConfig);throw x}})).apply(this,arguments)}function Ft(C){return void 0!==C&&2===C.registrationStatus}function j(C){return 2===C.requestStatus&&!function V(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function $(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Ue(){return(Ue=(0,k.Z)(function*(C){const I=C,{installationEntry:x,registrationPromise:L}=yield yn(I);return L?L.catch(console.error):Dr(I).catch(console.error),x.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,k.Z)(function*(C,I=!1){const x=C;return yield wr(x),(yield Dr(x,I)).token})).apply(this,arguments)}function wr(C){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,k.Z)(function*(C){const{registrationPromise:I}=yield yn(C);I&&(yield I)})).apply(this,arguments)}function Zn(C){return De.create("missing-app-config-values",{valueName:C})}const Ca="installations",Pe=C=>{const I=C.getProvider("app").getImmediate(),x=function ls(C){if(!C||!C.options)throw Zn("App Configuration");if(!C.name)throw Zn("App Name");const I=["projectId","apiKey","appId"];for(const x of I)if(!C.options[x])throw Zn(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},kt=C=>{const I=C.getProvider("app").getImmediate(),x=(0,oe._getProvider)(I,Ca).getImmediate();return{getId:()=>function Y(C){return Ue.apply(this,arguments)}(x),getToken:q=>function yt(C){return Yt.apply(this,arguments)}(x,q)}};(function fn(){(0,oe._registerComponent)(new ge.wA(Ca,Pe,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("installations-internal",kt,"PRIVATE"))})(),(0,oe.registerVersion)(he,"0.5.7"),(0,oe.registerVersion)(he,"0.5.7","esm2017");const dr="@firebase/remote-config",On=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zh{constructor(I,x,L,q){this.client=I,this.storage=x,this.storageCache=L,this.logger=q}isCachedDataFresh(I,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,q=L<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${q}.`),q}fetch(I){var x=this;return(0,k.Z)(function*(){const[L,q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(q&&x.isCachedDataFresh(I.cacheMaxAgeMillis,L))return q;I.eTag=q&&q.eTag;const ee=yield x.client.fetch(I),Ne=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Ne.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Ne),ee})()}}function Zo(C=navigator){return C.languages&&C.languages[0]||C.language}class fu{constructor(I,x,L,q,ee,Ne){this.firebaseInstallations=I,this.sdkVersion=x,this.namespace=L,this.projectId=q,this.apiKey=ee,this.appId=Ne}fetch(I){var x=this;return(0,k.Z)(function*(){const[L,q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Se={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},Xe={sdk_version:x.sdkVersion,app_instance_id:L,app_instance_id_token:q,app_id:x.appId,language_code:Zo()},Et={method:"POST",headers:Se,body:JSON.stringify(Xe)},xt=fetch(Ne,Et),Tt=new Promise((Di,Pi)=>{I.signal.addEventListener(()=>{const So=new Error("The operation was aborted.");So.name="AbortError",Pi(So)})});let $n;try{yield Promise.race([xt,Tt]),$n=yield xt}catch(Di){let Pi="fetch-client-network";throw"AbortError"===Di.name&&(Pi="fetch-timeout"),On.create(Pi,{originalErrorMessage:Di.message})}let Nn=$n.status;const sa=$n.headers.get("ETag")||void 0;let No,Ur;if(200===$n.status){let Di;try{Di=yield $n.json()}catch(Pi){throw On.create("fetch-client-parse",{originalErrorMessage:Pi.message})}No=Di.entries,Ur=Di.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Nn=500:"NO_CHANGE"===Ur?Nn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(No={}),304!==Nn&&200!==Nn)throw On.create("fetch-status",{httpStatus:Nn});return{status:Nn,eTag:sa,config:No}})()}}class ag{constructor(I,x){this.client=I,this.storage=x}fetch(I){var x=this;return(0,k.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(I,L)})()}attemptFetch(I,{throttleEndTimeMillis:x,backoffCount:L}){var q=this;return(0,k.Z)(function*(){yield function Un(C,I){return new Promise((x,L)=>{const q=Math.max(I-Date.now(),0),ee=setTimeout(x,q);C.addEventListener(()=>{clearTimeout(ee),L(On.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,x);try{const ee=yield q.client.fetch(I);return yield q.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function nd(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ee))throw ee;const Ne={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield q.storage.setThrottleMetadata(Ne),q.attemptFetch(I,Ne)}})()}}class rd{constructor(I,x,L,q,ee){this.app=I,this._client=x,this._storageCache=L,this._storage=q,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dl(C,I){const x=C.target.error||void 0;return On.create(I,{originalErrorMessage:x&&x.message})}const Bs="app_namespace_store";class dg{constructor(I,x,L,q=function cg(){return new Promise((C,I)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=L=>{I(Dl(L,"storage-open"))},x.onsuccess=L=>{C(L.target.result)},x.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(x){I(On.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=I,this.appName=x,this.namespace=L,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((q,ee)=>{const Se=L.transaction([Bs],"readonly").objectStore(Bs),Xe=x.createCompositeKey(I);try{const Et=Se.get(Xe);Et.onerror=xt=>{ee(Dl(xt,"storage-get"))},Et.onsuccess=xt=>{const Tt=xt.target.result;q(Tt?Tt.value:void 0)}}catch(Et){ee(On.create("storage-get",{originalErrorMessage:Et&&Et.message}))}})})()}set(I,x){var L=this;return(0,k.Z)(function*(){const q=yield L.openDbPromise;return new Promise((ee,Ne)=>{const Xe=q.transaction([Bs],"readwrite").objectStore(Bs),Et=L.createCompositeKey(I);try{const xt=Xe.put({compositeKey:Et,value:x});xt.onerror=Tt=>{Ne(Dl(Tt,"storage-set"))},xt.onsuccess=()=>{ee()}}catch(xt){Ne(On.create("storage-set",{originalErrorMessage:xt&&xt.message}))}})})()}delete(I){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((q,ee)=>{const Se=L.transaction([Bs],"readwrite").objectStore(Bs),Xe=x.createCompositeKey(I);try{const Et=Se.delete(Xe);Et.onerror=xt=>{ee(Dl(xt,"storage-delete"))},Et.onsuccess=()=>{q()}}catch(Et){ee(On.create("storage-delete",{originalErrorMessage:Et&&Et.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class sd{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,k.Z)(function*(){const x=I.storage.getLastFetchStatus(),L=I.storage.getLastSuccessfulFetchTimestampMillis(),q=I.storage.getActiveConfig(),ee=yield x;ee&&(I.lastFetchStatus=ee);const Ne=yield L;Ne&&(I.lastSuccessfulFetchTimestampMillis=Ne);const Se=yield q;Se&&(I.activeConfig=Se)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function _o(){return qh.apply(this,arguments)}function qh(){return(qh=(0,k.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Ko(){(0,oe._registerComponent)(new ge.wA("remote-config",function C(I,{instanceIdentifier:x}){const L=I.getProvider("app").getImmediate(),q=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw On.create("registration-window");if(!(0,X.hl)())throw On.create("indexed-db-unavailable");const{projectId:ee,apiKey:Ne,appId:Se}=L.options;if(!ee)throw On.create("registration-project-id");if(!Ne)throw On.create("registration-api-key");if(!Se)throw On.create("registration-app-id");const Xe=new dg(Se,L.name,x=x||"firebase"),Et=new sd(Xe),xt=new re.Yd(dr);xt.logLevel=re.in.ERROR;const Tt=new fu(q,oe.SDK_VERSION,x,ee,Ne,Se),$n=new ag(Tt,Xe),Nn=new zh($n,Xe,Et,xt),sa=new rd(L,Nn,Et,Xe,xt);return function Er(C){const I=(0,X.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(sa),sa},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(dr,"0.3.6"),(0,oe.registerVersion)(dr,"0.3.6","esm2017")}();const wl="/firebase-messaging-sw.js",Us="/firebase-cloud-messaging-push-scope",Xr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yo="google.c.a.c_id",Ta="google.c.a.c_l",od="google.c.a.ts",hg="google.c.a.e";var js=(()=>{return(C=js||(js={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",js;var C})();function pi(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gu(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),q=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)q[ee]=L.charCodeAt(ee);return q}const mu="fcm_token_details_db",hr="fcm_token_object_Store";function Zh(C){return _u.apply(this,arguments)}function _u(){return _u=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(mu))return null;let I=null;return(yield(0,X.X3)(mu,5,function(){var L=(0,k.Z)(function*(q,ee,Ne,Se){var Xe;if(ee<2||!q.objectStoreNames.contains(hr))return;const Et=Se.objectStore(hr),xt=yield Et.index("fcmSenderId").get(C);if(yield Et.clear(),xt)if(2===ee){const Tt=xt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;I={token:Tt.fcmToken,createTime:null!==(Xe=Tt.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:pi(Tt.vapidKey)}}}else if(3===ee){const Tt=xt;I={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:pi(Tt.auth),p256dh:pi(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:pi(Tt.vapidKey)}}}else if(4===ee){const Tt=xt;I={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:pi(Tt.auth),p256dh:pi(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:pi(Tt.vapidKey)}}}});return function(q,ee,Ne,Se){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(mu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),ad(I)?I:null}),_u.apply(this,arguments)}function ad(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const fs="firebase-messaging-store";let Aa=null;function El(){return Aa||(Aa=(0,X.X3)("firebase-messaging-database",1,(C,I)=>{0===I&&C.createObjectStore(fs)})),Aa}function mn(C){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,k.Z)(function*(C){const I=bo(C),L=yield(yield El()).transaction(fs).objectStore(fs).get(I);if(L)return L;{const q=yield Zh(C.appConfig.senderId);if(q)return yield Gs(C,q),q}})).apply(this,arguments)}function Gs(C,I){return ln.apply(this,arguments)}function ln(){return(ln=(0,k.Z)(function*(C,I){const x=bo(C),q=(yield El()).transaction(fs,"readwrite");return yield q.objectStore(fs).put(I,x),yield q.complete,I})).apply(this,arguments)}function ud(C){return vo.apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(C){const I=bo(C),L=(yield El()).transaction(fs,"readwrite");yield L.objectStore(fs).delete(I),yield L.complete})).apply(this,arguments)}function bo({appConfig:C}){return C.appId}const Pn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Na(C,I){return Si.apply(this,arguments)}function Si(){return(Si=(0,k.Z)(function*(C,I){const x=yield $s(C),L=pt(I),q={method:"POST",headers:x,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(ei(C.appConfig),q)).json()}catch(Ne){throw Pn.create("token-subscribe-failed",{errorInfo:Ne})}if(ee.error)throw Pn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Pn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Ir(C,I){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,k.Z)(function*(C,I){const x=yield $s(C),L=pt(I.subscriptionOptions),q={method:"PATCH",headers:x,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${ei(C.appConfig)}/${I.token}`,q)).json()}catch(Ne){throw Pn.create("token-update-failed",{errorInfo:Ne})}if(ee.error)throw Pn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Pn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ps(C,I){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(C,I){const L={method:"DELETE",headers:yield $s(C)};try{const ee=yield(yield fetch(`${ei(C.appConfig)}/${I}`,L)).json();if(ee.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(q){throw Pn.create("token-unsubscribe-failed",{errorInfo:q})}})).apply(this,arguments)}function ei({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function $s(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,k.Z)(function*({appConfig:C,installations:I}){const x=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function pt({p256dh:C,auth:I,endpoint:x,vapidKey:L}){const q={web:{endpoint:x,auth:I,p256dh:C}};return L!==Xr&&(q.web.applicationPubKey=L),q}const Du=6048e5;function Sa(C){return wu.apply(this,arguments)}function wu(){return(wu=(0,k.Z)(function*(C){const I=yield Tl(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:pi(I.getKey("auth")),p256dh:pi(I.getKey("p256dh"))},L=yield mn(C.firebaseDependencies);if(L){if(Qo(L.subscriptionOptions,x))return Date.now()>=L.createTime+Du?Cl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield ps(C.firebaseDependencies,L.token)}catch(q){console.warn(q)}return we(C.firebaseDependencies,x)}return we(C.firebaseDependencies,x)})).apply(this,arguments)}function Eu(C){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,k.Z)(function*(C){const I=yield mn(C.firebaseDependencies);I&&(yield ps(C.firebaseDependencies,I.token),yield ud(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Cl(C,I){return Il.apply(this,arguments)}function Il(){return(Il=(0,k.Z)(function*(C,I){try{const x=yield Ir(C.firebaseDependencies,I),L=Object.assign(Object.assign({},I),{token:x,createTime:Date.now()});return yield Gs(C.firebaseDependencies,L),x}catch(x){throw yield Eu(C),x}})).apply(this,arguments)}function we(C,I){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,k.Z)(function*(C,I){const L={token:yield Na(C,I),createTime:Date.now(),subscriptionOptions:I};return yield Gs(C,L),L.token})).apply(this,arguments)}function Tl(C,I){return vn.apply(this,arguments)}function vn(){return(vn=(0,k.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gu(I)})})).apply(this,arguments)}function Qo(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function Xo(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ti(C,I){if(!I.notification)return;C.notification={};const x=I.notification.title;x&&(C.notification.title=x);const L=I.notification.body;L&&(C.notification.body=L);const q=I.notification.image;q&&(C.notification.image=q)}(I,C),function Al(C,I){!I.data||(C.data=I.data)}(I,C),function Nl(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const x=I.fcmOptions.link;x&&(C.fcmOptions.link=x);const L=I.fcmOptions.analytics_label;L&&(C.fcmOptions.analyticsLabel=L)}(I,C),I}function ld(C){return"object"==typeof C&&!!C&&yo in C}function Sl(C,I){const x=[];for(let L=0;L<C.length;L++)x.push(C.charAt(L)),L<I.length&&x.push(I.charAt(L));return x.join("")}function zs(C){return Pn.create("missing-app-config-values",{valueName:C})}Sl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fr{constructor(I,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Iu(C){if(!C||!C.options)throw zs("App Configuration Object");if(!C.name)throw zs("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const L of I)if(!x[L])throw zs(L);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:q,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function gi(C){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,k.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(wl,{scope:Us}),C.swRegistration.update().catch(()=>{})}catch(I){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function qs(C,I){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield gi(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function Ml(C,I){return Au.apply(this,arguments)}function Au(){return(Au=(0,k.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=Xr)})).apply(this,arguments)}function xl(){return(xl=(0,k.Z)(function*(C,I){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield Ml(C,null==I?void 0:I.vapidKey),yield qs(C,null==I?void 0:I.serviceWorkerRegistration),Sa(C)})).apply(this,arguments)}function Ma(C,I,x){return xa.apply(this,arguments)}function xa(){return(xa=(0,k.Z)(function*(C,I,x){const L=Rl(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[yo],message_name:x[Ta],message_time:x[od],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rl(C){switch(C){case js.NOTIFICATION_CLICKED:return"notification_open";case js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function cd(){return(cd=(0,k.Z)(function*(C,I){const x=I.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===js.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Xo(x)):C.onMessageHandler.next(Xo(x)));const L=x.data;ld(L)&&"1"===L[hg]&&(yield Ma(C,x.messageType,L))})).apply(this,arguments)}const kl="@firebase/messaging",dd=C=>{const I=new fr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ol(C,I){return cd.apply(this,arguments)}(I,x)),I},wo=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:L=>function Nu(C,I){return xl.apply(this,arguments)}(I,L)}};function fd(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,k.Z)(function*(){try{yield(0,X.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hd(){(0,oe._registerComponent)(new ge.wA("messaging",dd,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("messaging-internal",wo,"PRIVATE")),(0,oe.registerVersion)(kl,"0.9.11"),(0,oe.registerVersion)(kl,"0.9.11","esm2017")}();const Fl="analytics",R_="firebase_id",Ra="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Su="https://www.googletagmanager.com/gtag/js",jn=new re.Yd("@firebase/analytics");function pd(C){return Promise.all(C.map(I=>I.catch(x=>x)))}function fg(C,I){const x=document.createElement("script");x.src=`${Su}?l=${C}&id=${I}`,x.async=!0,document.head.appendChild(x)}function ea(C,I,x,L,q,ee){return gd.apply(this,arguments)}function gd(){return(gd=(0,k.Z)(function*(C,I,x,L,q,ee){const Ne=L[q];try{if(Ne)yield I[Ne];else{const Xe=(yield pd(x)).find(Et=>Et.measurementId===q);Xe&&(yield I[Xe.appId])}}catch(Se){jn.error(Se)}C("config",q,ee)})).apply(this,arguments)}function Vl(C,I,x,L,q){return Co.apply(this,arguments)}function Co(){return(Co=(0,k.Z)(function*(C,I,x,L,q){try{let ee=[];if(q&&q.send_to){let Ne=q.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Se=yield pd(x);for(const Xe of Ne){const Et=Se.find(Tt=>Tt.measurementId===Xe),xt=Et&&I[Et.appId];if(!xt){ee=[];break}ee.push(xt)}}0===ee.length&&(ee=Object.values(I)),yield Promise.all(ee),C("event",L,q||{})}catch(ee){jn.error(ee)}})).apply(this,arguments)}function pg(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(Su))return I;return null}const Dn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Gn=new class Ln{constructor(I={},x=1e3){this.throttleMetadata=I,this.intervalMillis=x}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,x){this.throttleMetadata[I]=x}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function ta(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function _d(C){return pn.apply(this,arguments)}function pn(){return(pn=(0,k.Z)(function*(C){var I;const{appId:x,apiKey:L}=C,q={method:"GET",headers:ta(L)},ee=Ra.replace("{app-id}",x),Ne=yield fetch(ee,q);if(200!==Ne.status&&304!==Ne.status){let Se="";try{const Xe=yield Ne.json();(null===(I=Xe.error)||void 0===I?void 0:I.message)&&(Se=Xe.error.message)}catch(Xe){}throw Dn.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Se})}return Ne.json()})).apply(this,arguments)}function Jh(C){return xi.apply(this,arguments)}function xi(){return(xi=(0,k.Z)(function*(C,I=Gn,x){const{appId:L,apiKey:q,measurementId:ee}=C.options;if(!L)throw Dn.create("no-app-id");if(!q){if(ee)return{measurementId:ee,appId:L};throw Dn.create("no-api-key")}const Ne=I.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Se=new Bl;return setTimeout((0,k.Z)(function*(){Se.abort()}),void 0!==x?x:6e4),Mu({appId:L,apiKey:q,measurementId:ee},Ne,Se,I)})).apply(this,arguments)}function Mu(C,I,x){return ni.apply(this,arguments)}function ni(){return(ni=(0,k.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:x},L,q=Gn){const{appId:ee,measurementId:Ne}=C;try{yield wt(L,I)}catch(Se){if(Ne)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:ee,measurementId:Ne};throw Se}try{const Se=yield _d(C);return q.deleteThrottleMetadata(ee),Se}catch(Se){if(!yd(Se)){if(q.deleteThrottleMetadata(ee),Ne)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:ee,measurementId:Ne};throw Se}const Xe=503===Number(Se.customData.httpStatus)?(0,X.$s)(x,q.intervalMillis,30):(0,X.$s)(x,q.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Xe,backoffCount:x+1};return q.setThrottleMetadata(ee,Et),jn.debug(`Calling attemptFetch again in ${Xe} millis`),Mu(C,Et,L,q)}})).apply(this,arguments)}function wt(C,I){return new Promise((x,L)=>{const q=Math.max(I-Date.now(),0),ee=setTimeout(x,q);C.addEventListener(()=>{clearTimeout(ee),L(Dn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function yd(C){if(!(C instanceof X.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Bl{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Ul(){return Io.apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(){if(!(0,X.hl)())return jn.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(C){return jn.warn(Dn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function _s(){return(_s=(0,k.Z)(function*(C,I,x,L,q,ee,Ne){var Se;const Xe=Jh(C);Xe.then(Nn=>{x[Nn.measurementId]=Nn.appId,C.options.measurementId&&Nn.measurementId!==C.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>jn.error(Nn)),I.push(Xe);const Et=Ul().then(Nn=>{if(Nn)return L.getId()}),[xt,Tt]=yield Promise.all([Xe,Et]);pg()||fg(ee,xt.measurementId),q("js",new Date);const $n=null!==(Se=null==Ne?void 0:Ne.config)&&void 0!==Se?Se:{};return $n.origin="firebase",$n.update=!0,null!=Tt&&($n[R_]=Tt),q("config",xt.measurementId,$n),xt.measurementId})).apply(this,arguments)}class Ys{constructor(I){this.app=I}_delete(){return delete mi[this.app.options.appId],Promise.resolve()}}let mi={},Js=[];const _i={};let Qs,qi,zi="dataLayer",Gl=!1;function Ri(C,I,x){!function yi(){const C=[];if((0,X.ru)()&&C.push("This is a browser extension environment."),(0,X.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((L,q)=>`(${q+1}) ${L}`).join(" "),x=Dn.create("invalid-analytics-context",{errorInfo:I});jn.warn(x.message)}}();const L=C.options.appId;if(!L)throw Dn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Dn.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mi[L])throw Dn.create("already-exists",{id:L});if(!Gl){!function ms(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(zi);const{wrappedGtag:ee,gtagCore:Ne}=function Yh(C,I,x,L,q){let ee=function(...Ne){window[L].push(arguments)};return window[q]&&"function"==typeof window[q]&&(ee=window[q]),window[q]=function md(C,I,x,L){function ee(){return(ee=(0,k.Z)(function*(Ne,Se,Xe){try{"event"===Ne?yield Vl(C,I,x,Se,Xe):"config"===Ne?yield ea(C,I,x,L,Se,Xe):C("set",Se)}catch(Et){jn.error(Et)}})).apply(this,arguments)}return function q(Ne,Se,Xe){return ee.apply(this,arguments)}}(ee,C,I,x),{gtagCore:ee,wrappedGtag:window[q]}}(mi,Js,_i,zi,"gtag");qi=ee,Qs=Ne,Gl=!0}return mi[L]=function _n(C,I,x,L,q,ee,Ne){return _s.apply(this,arguments)}(C,Js,_i,I,Qs,zi,x),new Ys(C)}function Oa(){return(Oa=(0,k.Z)(function*(C,I,x,L,q){if(q&&q.global)C("event",x,L);else{const ee=yield I;C("event",x,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function bn(){return eo.apply(this,arguments)}function eo(){return(eo=(0,k.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(C){return!1}})).apply(this,arguments)}const to="@firebase/analytics";!function yg(){(0,oe._registerComponent)(new ge.wA(Fl,(I,{options:x})=>Ri(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new ge.wA("analytics-internal",function C(I){try{const x=I.getProvider(Fl).getImmediate();return{logEvent:(L,q,ee)=>function _g(C,I,x,L){C=(0,X.m9)(C),function Xs(C,I,x,L,q){return Oa.apply(this,arguments)}(qi,mi[C.app.options.appId],I,x,L).catch(q=>jn.error(q))}(x,L,q,ee)}}catch(x){throw Dn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(to,"0.7.7"),(0,oe.registerVersion)(to,"0.7.7","esm2017")}();var no=O(4408),Ru=O(7565);const Hl=new class En extends Ru.v{}(class ys extends no.o{constructor(I,x){super(I,x),this.scheduler=I,this.work=x}schedule(I,x=0){return x>0?super.schedule(I,x):(this.delay=x,this.state=I,this.scheduler.flush(this),this)}execute(I,x){return x>0||this.closed?super.execute(I,x):this._execute(I,x)}requestAsyncId(I,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(I,x,L):I.flush(this)}});var vg=O(4986),$l=O(8505),Sr=O(9468),vi=O(5363);const Wl=new c.GfV("7.3.0"),vs="__angularfire_symbol__analyticsIsSupportedValue",ki="__angularfire_symbol__analyticsIsSupported",Ki="__angularfire_symbol__remoteConfigIsSupportedValue",ka="__angularfire_symbol__remoteConfigIsSupported",zl="__angularfire_symbol__messagingIsSupportedValue",ql="__angularfire_symbol__messagingIsSupported";function ro(C,I,x){if(I){if(1===I.length)return I[0];const ee=I.filter(Ne=>Ne.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[ki]||(globalThis[ki]=bn().then(C=>globalThis[vs]=C).catch(()=>globalThis[vs]=!1)),globalThis[ql]||(globalThis[ql]=fd().then(C=>globalThis[zl]=C).catch(()=>globalThis[zl]=!1)),globalThis[ka]||(globalThis[ka]=_o().then(C=>globalThis[Ki]=C).catch(()=>globalThis[Ki]=!1));const Dd=(C,I)=>{const x=I?[I]:(0,K.C6)(),L=[];return x.forEach(q=>{q.container.getProvider(C).instances.forEach(Ne=>{L.includes(Ne)||L.push(Ne)})}),L};function To(){}class Ou{constructor(I,x=Hl){this.zone=I,this.delegate=x}now(){return this.delegate.now()}schedule(I,x,L){const q=this.zone;return this.delegate.schedule(function(Ne){q.runGuarded(()=>{I.apply(this,[Ne])})},x,L)}}class Yi{constructor(I){this.zone=I,this.task=null}call(I,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",To,{},To,To)),x.pipe((0,$l.b)({next:L,complete:L,error:L})).subscribe(I).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ku=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ou(Zone.current)),this.insideAngular=x.run(()=>new Ou(Zone.current,vg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ji(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Yl(C){return Ji(),function Ao(C){return function(x){return(x=x.lift(new Yi(C.ngZone))).pipe((0,Sr.R)(C.outsideAngular),(0,vi.Q)(C.insideAngular))}}(Ji())(C)}},2090:(ut,Ee,O)=>{O.d(Ee,{$s:()=>po,BH:()=>Ae,G6:()=>te,L:()=>le,LL:()=>It,Lj:()=>Ut,Mn:()=>We,Sg:()=>ke,UG:()=>De,US:()=>re,X3:()=>ft,ZB:()=>Q,ZR:()=>ae,b$:()=>Ce,d:()=>ye,eu:()=>ne,hl:()=>z,jU:()=>rt,m9:()=>ht,ne:()=>dt,pd:()=>as,r3:()=>en,ru:()=>Ke,tV:()=>G,uI:()=>fe,vZ:()=>Os,w1:()=>be,xO:()=>Hi,xb:()=>ur,z$:()=>Be,zI:()=>me,zd:()=>Lr});var c=O(5861);const X=function(j){const V=[];let $=0;for(let de=0;de<j.length;de++){let Y=j.charCodeAt(de);Y<128?V[$++]=Y:Y<2048?(V[$++]=Y>>6|192,V[$++]=63&Y|128):55296==(64512&Y)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Y=65536+((1023&Y)<<10)+(1023&j.charCodeAt(++de)),V[$++]=Y>>18|240,V[$++]=Y>>12&63|128,V[$++]=Y>>6&63|128,V[$++]=63&Y|128):(V[$++]=Y>>12|224,V[$++]=Y>>6&63|128,V[$++]=63&Y|128)}return V},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Y=0;Y<j.length;Y+=3){const Ue=j[Y],yt=Y+1<j.length,Yt=yt?j[Y+1]:0,wr=Y+2<j.length,Wt=wr?j[Y+2]:0;let hn=(15&Yt)<<2|Wt>>6,rr=63&Wt;wr||(rr=64,yt||(hn=64)),de.push($[Ue>>2],$[(3&Ue)<<4|Yt>>4],$[hn],$[rr])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let $=0,de=0;for(;$<j.length;){const Y=j[$++];if(Y<128)V[de++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ue=j[$++];V[de++]=String.fromCharCode((31&Y)<<6|63&Ue)}else if(Y>239&&Y<365){const wr=((7&Y)<<18|(63&j[$++])<<12|(63&j[$++])<<6|63&j[$++])-65536;V[de++]=String.fromCharCode(55296+(wr>>10)),V[de++]=String.fromCharCode(56320+(1023&wr))}else{const Ue=j[$++],yt=j[$++];V[de++]=String.fromCharCode((15&Y)<<12|(63&Ue)<<6|63&yt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const $=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Y=0;Y<j.length;){const Ue=$[j.charAt(Y++)],Yt=Y<j.length?$[j.charAt(Y)]:0;++Y;const Wt=Y<j.length?$[j.charAt(Y)]:64;++Y;const Mt=Y<j.length?$[j.charAt(Y)]:64;if(++Y,null==Ue||null==Yt||null==Wt||null==Mt)throw Error();de.push(Ue<<2|Yt>>4),64!==Wt&&(de.push(Yt<<4&240|Wt>>2),64!==Mt&&de.push(Wt<<6&192|Mt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},le=function(j){return function(j){const V=X(j);return re.encodeByteArray(V,!0)}(j).replace(/\./g,"")},G=function(j){try{return re.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Q(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const $ in V)!V.hasOwnProperty($)||!ze($)||(j[$]=Q(j[$],V[$]));return j}function ze(j){return"__proto__"!==j}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,$)=>{this.resolve=V,this.reject=$})}wrapCallback(V){return($,de)=>{$?this.reject($):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V($):V($,de))}}}function ke(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Y=j.iat||0,Ue=j.sub||j.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Y,exp:Y+3600,auth_time:Y,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},j);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(yt)),""].join(".")}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function rt(){return"object"==typeof self&&self.self===self}function Ke(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Be().indexOf("Electron/")>=0}function be(){const j=Be();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function We(){return Be().indexOf("MSAppHost/")>=0}function te(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function ne(){return new Promise((j,V)=>{try{let $=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(de);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(de),j(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Ue;V((null===(Ue=Y.error)||void 0===Ue?void 0:Ue.message)||"")}}catch($){V($)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ae extends Error{constructor(V,$,de){super($),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(V,$,de){this.service=V,this.serviceName=$,this.errors=de}create(V,...$){const de=$[0]||{},Y=`${this.service}/${V}`,Ue=this.errors[V],yt=Ue?function Xt(j,V){return j.replace(Rn,($,de)=>{const Y=V[de];return null!=Y?String(Y):`<${de}?>`})}(Ue,de):"Error";return new ae(Y,`${this.serviceName}: ${yt} (${Y}).`,de)}}const Rn=/\{\$([^}]+)}/g;function en(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function ur(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Os(j,V){if(j===V)return!0;const $=Object.keys(j),de=Object.keys(V);for(const Y of $){if(!de.includes(Y))return!1;const Ue=j[Y],yt=V[Y];if(Fr(Ue)&&Fr(yt)){if(!Os(Ue,yt))return!1}else if(Ue!==yt)return!1}for(const Y of de)if(!$.includes(Y))return!1;return!0}function Fr(j){return null!==j&&"object"==typeof j}function Hi(j){const V=[];for(const[$,de]of Object.entries(j))Array.isArray(de)?de.forEach(Y=>{V.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):V.push(encodeURIComponent($)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function Lr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Y,Ue]=de.split("=");V[decodeURIComponent(Y)]=decodeURIComponent(Ue)}}),V}function as(j){const V=j.indexOf("?");if(!V)return"";const $=j.indexOf("#",V);return j.substring(V,$>0?$:void 0)}function dt(j,V){const $=new Jr(j,V);return $.subscribe.bind($)}class Jr{constructor(V,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver($=>{$.next(V)})}error(V){this.forEachObserver($=>{$.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,$,de){let Y;if(void 0===V&&void 0===$&&void 0===de)throw new Error("Missing Observer.");Y=function qn(j,V){if("object"!=typeof j||null===j)return!1;for(const $ of V)if($ in j&&"function"==typeof j[$])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:$,complete:de},void 0===Y.next&&(Y.next=di),void 0===Y.error&&(Y.error=di),void 0===Y.complete&&(Y.complete=di);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(yt){}}),this.observers.push(Y),Ue}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,V)}sendOne(V,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{$(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function di(){}function po(j,V=1e3,$=2){const de=V*Math.pow($,j),Y=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Y)}function ht(j){return j&&j._delegate?j._delegate:j}function Dr(j,V){return new Promise(($,de)=>{j.onsuccess=Y=>{$(Y.target.result)},j.onerror=Y=>{var Ue;de(`${V}: ${null===(Ue=Y.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class Bt{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,$){return new Ye(this._db.transaction.call(this._db,V,$))}createObjectStore(V,$){return new Ie(this._db.createObjectStore(V,$))}close(){this._db.close()}}class Ye{constructor(V){this._transaction=V,this.complete=new Promise(($,de)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Ie(this._transaction.objectStore(V))}}class Ie{constructor(V){this._store=V}index(V){return new tt(this._store.index(V))}createIndex(V,$,de){return new tt(this._store.createIndex(V,$,de))}get(V){return Dr(this._store.get(V),"Error reading from IndexedDB")}put(V,$){return Dr(this._store.put(V,$),"Error writing to IndexedDB")}delete(V){return Dr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Dr(this._store.clear(),"Error clearing IndexedDB object store")}}class tt{constructor(V){this._index=V}get(V){return Dr(this._index.get(V),"Error reading from IndexedDB")}}function ft(j,V,$){return new Promise((de,Y)=>{try{const Ue=indexedDB.open(j,V);Ue.onsuccess=yt=>{de(new Bt(yt.target.result))},Ue.onerror=yt=>{var Yt;Y(`Error opening indexedDB: ${null===(Yt=yt.target.error)||void 0===Yt?void 0:Yt.message}`)},Ue.onupgradeneeded=yt=>{$(new Bt(Ue.result),yt.oldVersion,yt.newVersion,new Ye(Ue.transaction))}}catch(Ue){Y(`Error opening indexedDB: ${Ue.message}`)}})}function Ut(j){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(j){return new Promise((V,$)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Y=>{var Ue;$(`Error deleting indexedDB database "${j}": ${null===(Ue=Y.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(de){$(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},9446:(ut,Ee,O)=>{var c=O(5e3);let K=null;function k(){return K}const re=new c.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function le(){return(0,c.LFG)(H)}()},providedIn:"platform"}),n})();const G=new c.OlP("Location Initialized");let H=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(re))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ze(){return new H((0,c.LFG)(re))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function De(n){const e=(0,c.LFG)(re).location;return new Ke((0,c.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const rt=new c.OlP("appBaseHref");let Ke=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const d=this.prepareExternalUrl(i+Be(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){const d=this.prepareExternalUrl(i+Be(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(rt,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let d=this.prepareExternalUrl(i+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){let d=this.prepareExternalUrl(i+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(rt,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(He(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function We(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Ae,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(c.LFG(fe),c.LFG(he))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function be(){return new ye((0,c.LFG)(fe),(0,c.LFG)(he))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}class Ls{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let kn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ls(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),cs(m,i)}});for(let i=0,u=r.length;i<u;i++){const m=r.get(i).context;m.index=i,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{cs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function cs(n,e){n.context.$implicit=e.item}let Kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function hr(n){return"server"===n}let yu=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new vu((0,c.LFG)(re),window)}),n})();class vu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Aa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gs extends class Jo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){K||(K=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ud(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function bo(n){vo=vo||document.createElement("a"),vo.setAttribute("href",n);const e=vo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vo,ln=null;const Cr=new c.OlP("TRANSITION_ID"),Na=[{provide:c.ip1,useFactory:function Pn(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Cr,re,c.zs3],multi:!0}];class Si{static init(){(0,c.VLi)(new Si)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let u=i.length,d=!1;const m=function(v){d=d||v,u--,0==u&&r(d)};i.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ir=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Hs=new c.OlP("EventManagerPlugins");let ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const d=i[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hs),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class bu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),$s=(()=>{class n extends ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ws),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ws))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(re))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ws(n){k().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Du=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?we(n,i,t):(i=i.replace(Du,n),t.push(i))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Al(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Nl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ps),c.LFG($s),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Qo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=pt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(r)):this.eventManager.addEventListener(e,t,Lt(r))}}class Al extends Qo{constructor(e,t,r,i){super(e),this.component=r;const u=we(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Cl(n){return"_ngcontent-%COMP%".replace(Du,n)}(i+"-"+r.id),this.hostAttr=function Il(n){return"_nghost-%COMP%".replace(Du,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Nl extends Qo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=we(i.id,i.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ld=(()=>{class n extends bu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(re))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=["alt","control","meta","shift"],zs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Tu=(()=>{class n extends bu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let d="";if(Sl.forEach(v=>{const w=r.indexOf(v);w>-1&&(r.splice(w,1),d+=v+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=i,m.fullKey=d,m}static getEventFullKey(t){let r="",i=function qs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&fr.hasOwnProperty(e)&&(e=fr[e]))}return zs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Sl.forEach(u=>{u!=i&&gi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(re))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const xl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Mi(){Gs.makeCurrent(),Si.init()},multi:!0},{provide:re,useFactory:function Au(){return(0,c.RDi)(document),document},deps:[]}]),Ma=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ml(){return new c.qLn},deps:[]},{provide:Hs,useClass:ld,multi:!0,deps:[re,c.R0b,c.Lbi]},{provide:Hs,useClass:Tu,multi:!0,deps:[re]},{provide:vn,useClass:vn,deps:[ps,$s,c.AFp]},{provide:c.FYo,useExisting:vn},{provide:ei,useExisting:$s},{provide:$s,useClass:$s,deps:[re]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:ps,useClass:ps,deps:[Hs,c.R0b]},{provide:class mn{},useClass:Ir,deps:[]}];let xa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Cr,useExisting:c.AFp},Na]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Ma,imports:[Kn,c.hGG]}),n})();"undefined"!=typeof window&&window;var Fn=O(8996),Dn=O(3269);function gt(...n){const e=(0,Dn.yG)(n);return(0,Fn.D)(n,e)}var nn=O(7579);class Ln extends nn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Gn=O(8306);const{isArray:ta}=Array,{getPrototypeOf:_d,prototype:pn,keys:Jh}=Object;function xi(n){if(1===n.length){const e=n[0];if(ta(e))return{args:e,keys:null};if(function Mu(n){return n&&"object"==typeof n&&_d(n)===pn}(e)){const t=Jh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ni=O(4671),wt=O(4004);const{isArray:yd}=Array;function Ul(n){return(0,wt.U)(e=>function Bl(n,e){return yd(e)?n(...e):n(e)}(n,e))}function Io(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var _n=O(5403),_s=O(9672);function Js(n,e,t){n?(0,_s.f)(t,n,e):e()}var _i=O(576);function zi(n,e){const t=(0,_i.m)(n)?n:()=>n,r=i=>i.error(t());return new Gn.y(e?i=>e.schedule(r,0,i):r)}const Qs=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qi=O(8189);function xu(...n){return function Gl(){return(0,qi.J)(1)}()((0,Fn.D)(n,(0,Dn.yG)(n)))}var yi=O(8421);function Ri(n){return new Gn.y(e=>{(0,yi.Xf)(n()).subscribe(e)})}var Xs=O(515),Oa=O(727),ir=O(4482);function Oi(){return(0,ir.e)((n,e)=>{let t=null;n._refCount++;const r=(0,_n.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class vd extends Gn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ir.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,_n.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oa.w0.EMPTY)}return e}refCount(){return Oi()(this)}}function wn(n,e){return(0,ir.e)((t,r)=>{let i=null,u=0,d=!1;const m=()=>d&&!i&&r.complete();t.subscribe((0,_n.x)(r,v=>{null==i||i.unsubscribe();let w=0;const A=u++;(0,yi.Xf)(n(v,A)).subscribe(i=(0,_n.x)(r,M=>r.next(e?e(v,M,A,w++):M),()=>{i=null,m()}))},()=>{d=!0,m()}))})}var Hn=O(5698);function Br(...n){const e=(0,Dn.yG)(n);return(0,ir.e)((t,r)=>{(e?xu(n,t,e):xu(n,t)).subscribe(r)})}function na(n,e,t,r,i){return(u,d)=>{let m=t,v=e,w=0;u.subscribe((0,_n.x)(d,A=>{const M=w++;v=m?n(v,A,M):(m=!0,A),r&&d.next(v)},i&&(()=>{m&&d.next(v),d.complete()})))}}function Ar(n,e){return(0,ir.e)(na(n,e,arguments.length>=2,!0))}function pr(n,e){return(0,ir.e)((t,r)=>{let i=0;t.subscribe((0,_n.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Zi(n){return(0,ir.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,_n.x)(t,void 0,void 0,d=>{u=(0,yi.Xf)(n(d,Zi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var bn=O(5577);function eo(n,e){return(0,_i.m)(e)?(0,bn.z)(n,e,1):(0,bn.z)(n,1)}function bd(n){return n<=0?()=>Xs.E:(0,ir.e)((e,t)=>{let r=[];e.subscribe((0,_n.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function An(n=gg){return(0,ir.e)((e,t)=>{let r=!1;e.subscribe((0,_n.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gg(){return new Qs}function mg(n){return(0,ir.e)((e,t)=>{let r=!1;e.subscribe((0,_n.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function to(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pr((i,u)=>n(i,u,r)):ni.y,(0,Hn.q)(1),t?mg(e):An(()=>new Qs))}var Nr=O(8505);class no{constructor(e,t){this.id=e,this.url=t}}class ys extends no{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ru extends no{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class En extends no{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hl extends no{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ra extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vg extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $l extends no{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sr extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vi extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ki{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ki{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ka{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ql{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Zl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yn(n){return new Zl(n)}const Kl="ngNavigationCancelingError";function ro(n){const e=Error("NavigationCancelingError: "+n);return e[Kl]=!0,e}function To(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))i[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ku(n[i],e[i]))return!1;return!0}function ku(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Ji(n){return Array.prototype.concat.apply([],n)}function wd(n){return n.length>0?n[n.length-1]:null}function Jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function bi(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Fn.D)(Promise.resolve(n)):gt(n)}const Ao={exact:function I(n,e,t){if(!xt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:L},ia={exact:function C(n,e){return Yi(n,e)},subset:function x(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ku(n[t],e[t]))},ignored:()=>!0};function Pu(n,e,t){return Ao[t.paths](n.root,e.root,t.matrixParams)&&ia[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return q(n,e,e.segments,t)}function q(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!xt(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!xt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(xt(n.segments,i)&&ee(n.segments,i,r)&&n.children[Pt])&&q(n.children[Pt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>ia[t](n[i].parameters,r.parameters))}class Ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yn(this.queryParams)),this._queryParamMap}toString(){return sa.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return No(this)}}class Xe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yn(this.parameters)),this._parameterMap}toString(){return Pa(this)}}function xt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class $n{}class Nn{parse(e){const t=new Cd(e);return new Ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ur(e.root,!0)}`,r=function O_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Pi(t)}=${Pi(i)}`).join("&"):`${Pi(t)}=${Pi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function So(n){return encodeURI(n)}(e.fragment)}`:""}`}}const sa=new Nn;function No(n){return n.segments.map(e=>Pa(e)).join("/")}function Ur(n,e){if(!n.hasChildren())return No(n);if(e){const t=n.children[Pt]?Ur(n.children[Pt],!1):"",r=[];return Jn(n.children,(i,u)=>{u!==Pt&&r.push(`${u}:${Ur(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Tt(n,e){let t=[];return Jn(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),Jn(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[Ur(n.children[Pt],!1)]:[`${i}:${Ur(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${No(n)}/${t[0]}`:`${No(n)}/(${t.join("//")})`}}function Di(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pi(n){return Di(n).replace(/%3B/gi,";")}function Ed(n){return Di(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jl(n){return decodeURIComponent(n)}function Ql(n){return Jl(n.replace(/\+/g,"%20"))}function Pa(n){return`${Ed(n.path)}${function bg(n){return Object.keys(n).map(e=>`;${Ed(e)}=${Ed(n[e])}`).join("")}(n.parameters)}`}const k_=/^[^\/()?;=#]+/;function bs(n){const e=n.match(k_);return e?e[0]:""}const Xl=/^[^=?&#]+/,F_=/^[^&#]+/;class Cd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new Se(e,t)),r}parseSegment(){const e=bs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Xe(Jl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=bs(this.remaining);i&&(r=i,this.capture(r))}e[Jl(t)]=Jl(r)}parseQueryParam(e){const t=function P_(n){const e=n.match(Xl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Dg(n){const e=n.match(F_);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Ql(t),u=Ql(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Pt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Pt]:new Se([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class L_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Qh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Xh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xh(e,this._root).map(t=>t.value)}}function Qh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Qh(n,t);if(r)return r}return null}function Xh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Xh(n,t);if(r.length)return r.unshift(e),r}return[]}class Mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Id extends L_{constructor(e,t){super(e),this.snapshot=t,Ad(this,e)}toString(){return this.snapshot.toString()}}function Fa(n,e){const t=function V_(n,e){const d=new Fu([],{},{},"",{},Pt,e,null,n.root,-1,{});return new ef("",new Mo(d,[]))}(n,e),r=new Ln([new Xe("",{})]),i=new Ln({}),u=new Ln({}),d=new Ln({}),m=new Ln(""),v=new Ro(r,i,d,m,u,Pt,e,t.root);return v.snapshot=t.root,new Id(new Mo(v,[]),t)}class Ro{constructor(e,t,r,i,u,d,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Yn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Yn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function B_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Td(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fu{constructor(e,t,r,i,u,d,m,v,w,A,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=m,this.routeConfig=v,this._urlSegment=w,this._lastPathIndex=A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ef extends L_{constructor(e,t){super(t),this.url=e,Ad(this,t)}toString(){return Nd(this._root)}}function Ad(n,e){e.value._routerState=n,e.children.forEach(t=>Ad(n,t))}function Nd(n){const e=n.children.length>0?` { ${n.children.map(Nd).join(", ")} } `:"";return`${n.value}${e}`}function Sd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yi(e.params,t.params)||n.params.next(t.params),function Ou(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function tf(n,e){const t=Yi(n.params,e.params)&&function Et(n,e){return xt(n,e)&&n.every((t,r)=>Yi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||tf(n.parent,e.parent))}function ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function nf(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ec(n,r,i);return ec(n,r)})}(n,e,t);return new Mo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>ec(n,m)),d}}const r=function j_(n){return new Ro(new Ln(n.url),new Ln(n.params),new Ln(n.queryParams),new Ln(n.fragment),new Ln(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>ec(n,u));return new Mo(r,i)}}function oa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lu(n){return"object"==typeof n&&null!=n&&n.outlets}function wg(n,e,t,r,i){let u={};if(r&&Jn(r,(m,v)=>{u[v]=Array.isArray(m)?m.map(w=>`${w}`):`${m}`}),n===e)return new Ne(t,u,i);const d=rf(n,e,t);return new Ne(d,u,i)}function rf(n,e,t){const r={};return Jn(n.children,(i,u)=>{r[u]=i===e?t:rf(i,e,t)}),new Se(n.segments,r)}class G_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oa(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Lu);if(i&&i!==wd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function z_(n,e,t){if(n||(n=new Se([],{})),0===n.segments.length&&n.hasChildren())return so(n,e,t);const r=function Gb(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const d=n.segments[i],m=t[r];if(Lu(m))break;const v=`${m}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&w&&"object"==typeof w&&void 0===w.outlets){if(!Fi(v,w,d))return u;r+=2}else{if(!Fi(v,{},d))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Se(n.segments.slice(0,r.pathIndex),{});return u.children[Pt]=new Se(n.segments.slice(r.pathIndex),n.children),so(u,0,i)}return r.match&&0===i.length?new Se(n.segments,{}):r.match&&!n.hasChildren()?af(n,e,t):r.match?so(n,0,i):af(n,e,t)}function so(n,e,t){if(0===t.length)return new Se(n.segments,{});{const r=function W_(n){return Lu(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return Jn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[d]=z_(n.children[d],e,u))}),Jn(n.children,(u,d)=>{void 0===r[d]&&(i[d]=u)}),new Se(n.segments,i)}}function af(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Lu(u)){const v=Vu(u.outlets);return new Se(r,v)}if(0===i&&oa(t[0])){r.push(new Xe(n.segments[e].path,uf(t[0]))),i++;continue}const d=Lu(u)?u.outlets[Pt]:`${u}`,m=i<t.length-1?t[i+1]:null;d&&m&&oa(m)?(r.push(new Xe(d,uf(m))),i+=2):(r.push(new Xe(d,{})),i++)}return new Se(r,{})}function Vu(n){const e={};return Jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=af(new Se([],{}),0,t))}),e}function uf(n){const e={};return Jn(n,(t,r)=>e[r]=`${t}`),e}function Fi(n,e,t){return n==t.path&&Yi(e,t.parameters)}class Cg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=xo(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,i[d],r),delete i[d]}),Jn(i,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=xo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=xo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=xo(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new zl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ki(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Sd(i),i===u)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Sd(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function Md(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),v=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=v,d.outlet&&d.outlet.activateWith(i,v),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class xd{constructor(e,t){this.routes=e,this.module=t}}function La(n){return"function"==typeof n}function Bu(n){return n instanceof Ne}const nc=Symbol("INITIAL_VALUE");function aa(){return wn(n=>function Ys(...n){const e=(0,Dn.yG)(n),t=(0,Dn.jO)(n),{args:r,keys:i}=xi(n);if(0===r.length)return(0,Fn.D)([],e);const u=new Gn.y(function mi(n,e,t=ni.y){return r=>{Js(e,()=>{const{length:i}=n,u=new Array(i);let d=i,m=i;for(let v=0;v<i;v++)Js(e,()=>{const w=(0,Fn.D)(n[v],e);let A=!1;w.subscribe((0,_n.x)(r,M=>{u[v]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>Io(i,d):ni.y));return t?u.pipe(Ul(t)):u}(n.map(e=>e.pipe((0,Hn.q)(1),Br(nc)))).pipe(Ar((e,t)=>{let r=!1;return t.reduce((i,u,d)=>i!==nc?i:(u===nc&&(r=!0),r||!1!==u&&d!==t.length-1&&!Bu(u)?i:u),e)},nc),pr(e=>e!==nc),(0,wt.U)(e=>Bu(e)?e:!0===e),(0,Hn.q)(1)))}class q_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new rc,this.attachRef=null}}class rc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new q_,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ic=(()=>{class n{constructor(t,r,i,u,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,v=new hf(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(rc),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ro?this.route:e===rc?this.childContexts:this.parent.get(e,t)}}let ff=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[ic],encapsulation:2}),n})();function sc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Rd(r,pf(e,r))}}function Rd(n,e){n.children&&sc(n.children,e)}function pf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function gf(n){const e=n.children&&n.children.map(gf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=ff),t}function rn(n){return n.outlet||Pt}function mf(n,e){const t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}const Tg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Tg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||To)(t,n,e);if(!u)return Object.assign({},Tg);const d={};Jn(u.posParams,(v,w)=>{d[w]=v.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function oc(n,e,t,r,i="corrected"){if(t.length>0&&function K_(n,e,t){return t.some(r=>kd(n,e,r)&&rn(r)!==Pt)}(n,t,r)){const d=new Se(e,function Od(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rn(u)!==Pt){const d=new Se([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[rn(u)]=d}return i}(n,e,r,new Se(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Ag(n,e,t){return t.some(r=>kd(n,e,r))}(n,t,r)){const d=new Se(n.segments,function Z_(n,e,t,r,i,u){const d={};for(const m of r)if(kd(n,t,m)&&!i[rn(m)]){const v=new Se([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[rn(m)]=v}return Object.assign(Object.assign({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Se(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function kd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Y_(n,e,t,r){return!!(rn(n)===r||r!==Pt&&kd(e,t,n))&&("**"===n.path||Uu(e,n,t).matched)}function J_(n,e,t){return 0===e.length&&!n.children[t]}class ua{constructor(e){this.segmentGroup=e||null}}class Mr{constructor(e){this.urlTree=e}}function Oo(n){return zi(new ua(n))}function ac(n){return zi(new Mr(n))}class yf{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=oc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,wt.U)(u=>this.createUrlTree(Ba(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zi(u=>{if(u instanceof Mr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ua?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,wt.U)(i=>this.createUrlTree(Ba(i),e.queryParams,e.fragment))).pipe(Zi(i=>{throw i instanceof ua?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Se([],{[Pt]:e}):e;return new Ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new Se([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Fn.D)(i).pipe(eo(u=>{const d=r.children[u],m=mf(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,wt.U)(v=>({segment:v,outlet:u})))}),Ar((u,d)=>(u[d.outlet]=d.segment,u),{}),function _g(n,e){const t=arguments.length>=2;return r=>r.pipe(n?pr((i,u)=>n(i,u,r)):ni.y,bd(1),t?mg(e):An(()=>new Qs))}())}expandSegment(e,t,r,i,u,d){return(0,Fn.D)(r).pipe(eo(m=>this.expandSegmentAgainstRoute(e,t,r,m,i,u,d).pipe(Zi(w=>{if(w instanceof ua)return gt(null);throw w}))),to(m=>!!m),Zi((m,v)=>{if(m instanceof Qs||"EmptyError"===m.name)return J_(t,i,u)?gt(new Se([],{})):Oo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,i,u,d,m){return Y_(i,t,u,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d):Oo(t):Oo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ac(u):this.lineralizeSegments(r,u).pipe((0,bn.z)(d=>{const m=new Se(d,{});return this.expandSegment(e,m,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){const{matched:m,consumedSegments:v,remainingSegments:w,positionalParamSegments:A}=Uu(t,i,u);if(!m)return Oo(t);const M=this.applyRedirectCommands(v,i.redirectTo,A);return i.redirectTo.startsWith("/")?ac(M):this.lineralizeSegments(i,M).pipe((0,bn.z)(F=>this.expandSegment(e,t,r,F.concat(w),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(M=>(r._loadedConfig=M,new Se(i,{})))):gt(new Se(i,{}));const{matched:d,consumedSegments:m,remainingSegments:v}=Uu(t,r,i);return d?this.getChildConfig(e,r,i).pipe((0,bn.z)(A=>{const M=A.module,F=A.routes,{segmentGroup:B,slicedSegments:J}=oc(t,m,v,F),ue=new Se(B.segments,B.children);if(0===J.length&&ue.hasChildren())return this.expandChildren(M,F,ue).pipe((0,wt.U)(mt=>new Se(m,mt)));if(0===F.length&&0===J.length)return gt(new Se(m,{}));const Re=rn(r)===u;return this.expandSegment(M,ue,F,J,Re?Pt:u,!0).pipe((0,wt.U)(Fe=>new Se(m.concat(Fe.segments),Fe.children)))})):Oo(t)}getChildConfig(e,t,r){return t.children?gt(new xd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,bn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,wt.U)(u=>(t._loadedConfig=u,u))):function jr(n){return zi(ro(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new xd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?gt(i.map(d=>{const m=e.get(d);let v;if(function lf(n){return n&&La(n.canLoad)}(m))v=m.canLoad(t,r);else{if(!La(m))throw new Error("Invalid CanLoad guard");v=m(t,r)}return bi(v)})).pipe(aa(),(0,Nr.b)(d=>{if(!Bu(d))return;const m=ro(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,wt.U)(d=>!0===d)):gt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[Pt])return zi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[u]=t[m]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let d={};return Jn(t.children,(m,v)=>{d[v]=this.createSegmentGroup(e,m,r,i)}),new Se(u,d)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ba(n){const e={};for(const r of Object.keys(n.children)){const u=Ba(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Li(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new Se(n.segments.concat(e.segments),e.children)}return n}(new Se(n.segments,e))}class Ng{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ua{constructor(e,t){this.component=e,this.route=t}}function bf(n,e,t){const r=n._root;return wi(r,e?e._root:null,t,[r.value])}function uc(n,e,t){const r=function Q_(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function wi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=xo(e);return n.children.forEach(d=>{(function Mg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function X_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xt(n.url,e.url)||!Yi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tf(n,e)||!Yi(n.queryParams,e.queryParams);default:return!tf(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new Ng(r)):(u.data=d.data,u._resolvedData=d._resolvedData),wi(n,e,u.component?m?m.children:null:t,r,i),v&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new Ua(m.outlet.component,d))}else d&&ja(e,m,i),i.canActivateChecks.push(new Ng(r)),wi(n,null,u.component?m?m.children:null:t,r,i)})(d,u[d.value.outlet],t,r.concat([d.value]),i),delete u[d.value.outlet]}),Jn(u,(d,m)=>ja(d,t.getContext(m),i)),i}function ja(n,e,t){const r=xo(n),i=n.value;Jn(r,(u,d)=>{ja(u,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Ua(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ef{}function Cf(n){return new Gn.y(e=>e.error(n))}class If{constructor(e,t,r,i,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=oc(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new Fu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Mo(r,t),u=new ef(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=B_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=mf(e,u),v=this.processSegmentGroup(m,d,u);if(null===v)return null;r.push(...v)}const i=Rg(r);return function ry(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,i);if(null!==d)return d}return J_(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Y_(e,t,r,i))return null;let u,d=[],m=[];if("**"===e.path){const B=r.length>0?wd(r).parameters:{};u=new Fu(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b(e),rn(e),e.component,e,f(t),g(t)+r.length,N(e))}else{const B=Uu(t,e,r);if(!B.matched)return null;d=B.consumedSegments,m=B.remainingSegments,u=new Fu(d,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b(e),rn(e),e.component,e,f(t),g(t)+d.length,N(e))}const v=function iy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:A}=oc(t,d,m,v.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===A.length&&w.hasChildren()){const B=this.processChildren(v,w);return null===B?null:[new Mo(u,B)]}if(0===v.length&&0===A.length)return[new Mo(u,[])];const M=rn(e)===i,F=this.processSegment(v,w,A,M?Pt:i);return null===F?null:[new Mo(u,F)]}}function sy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rg(n){const e=[],t=new Set;for(const r of n){if(!sy(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rg(r.children);e.push(new Mo(r.value,i))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function b(n){return n.data||{}}function N(n){return n.resolve||{}}function nt(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lt(n){return wn(e=>{const t=n(e);return t?(0,Fn.D)(t).pipe((0,wt.U)(()=>e)):gt(e)})}class cc extends class Xi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ju=new c.OlP("ROUTES");class Gu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new xd(Ji(d.injector.get(ju,void 0,c.XFs.Self|c.XFs.Optional)).map(gf),d)}),Zi(u=>{throw t._loader$=void 0,u}));return t._loader$=new vd(i,()=>new nn.x).pipe(Oi()),t._loader$}loadModuleFactory(e){return bi(e()).pipe((0,bn.z)(t=>t instanceof c.YKP?gt(t):(0,Fn.D)(this.compiler.compileModuleAsync(t))))}}class oy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function la(n){throw n}function Pd(n,e,t){return e.parse("/")}function Fd(n,e){return gt(null)}const Af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ld={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class n{constructor(t,r,i,u,d,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nn.x,this.errorHandler=la,this.malformedUriErrorHandler=Pd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fd,afterPreactivation:Fd},this.urlHandlingStrategy=new oy,this.routeReuseStrategy=new cc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const M=d.get(c.R0b);this.isNgZoneEnabled=M instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Yl(){return new Ne(new Se([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gu(d,m,F=>this.triggerEvent(new Wl(F)),F=>this.triggerEvent(new vs(F))),this.routerState=Fa(this.currentUrlTree,this.rootComponentType),this.transitions=new Ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(pr(i=>0!==i.id),(0,wt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),wn(i=>{let u=!1,d=!1;return gt(i).pipe((0,Nr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wn(m=>{const v=this.browserUrlTree.toString(),w=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Og(m.source)&&(this.browserUrlTree=m.extractedUrl),gt(m).pipe(wn(M=>{const F=this.transitions.getValue();return r.next(new ys(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?Xs.E:Promise.resolve(M)}),function vf(n,e,t,r){return wn(i=>function Va(n,e,t,r,i){return new yf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,wt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Nr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function R(n,e,t,r,i){return(0,bn.z)(u=>function ny(n,e,t,r,i="emptyOnly",u="legacy"){try{const d=new If(n,e,t,r,i,u).recognize();return null===d?Cf(new Ef):gt(d)}catch(d){return Cf(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,wt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Nr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new ra(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:J,restoredState:ue,extras:Re}=m,et=new ys(F,this.serializeUrl(B),J,ue);r.next(et);const Fe=Fa(B,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},m),{targetSnapshot:Fe,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Xs.E}),lt(m=>{const{targetSnapshot:v,id:w,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=m;return this.hooks.beforePreactivation(v,{navigationId:w,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Nr.b)(m=>{const v=new vg(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,wt.U)(m=>Object.assign(Object.assign({},m),{guards:bf(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function ey(n,e){return(0,bn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function xg(n,e,t,r){return(0,Fn.D)(n).pipe((0,bn.z)(i=>function lc(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(m=>{const v=uc(m,e,i);let w;if(function Hb(n){return n&&La(n.canDeactivate)}(v))w=bi(v.canDeactivate(n,e,t,r));else{if(!La(v))throw new Error("Invalid CanDeactivate guard");w=bi(v(n,e,t,r))}return w.pipe(to())})).pipe(aa()):gt(!0)}(i.component,i.route,t,e,r)),to(i=>!0!==i,!0))}(d,r,i,n).pipe((0,bn.z)(m=>m&&function Ig(n){return"boolean"==typeof n}(m)?function xr(n,e,t,r){return(0,Fn.D)(e).pipe(eo(i=>xu(function wf(n,e){return null!==n&&e&&e(new ki(n)),gt(!0)}(i.route.parent,r),function Df(n,e){return null!==n&&e&&e(new ka(n)),gt(!0)}(i.route,r),function ko(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Sg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ri(()=>gt(d.guards.map(v=>{const w=uc(v,d.node,t);let A;if(function df(n){return n&&La(n.canActivateChild)}(w))A=bi(w.canActivateChild(r,n));else{if(!La(w))throw new Error("Invalid CanActivateChild guard");A=bi(w(r,n))}return A.pipe(to())})).pipe(aa())));return gt(u).pipe(aa())}(n,i.path,t),function ty(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(u=>Ri(()=>{const d=uc(u,e,t);let m;if(function cf(n){return n&&La(n.canActivate)}(d))m=bi(d.canActivate(e,n));else{if(!La(d))throw new Error("Invalid CanActivate guard");m=bi(d(e,n))}return m.pipe(to())}));return gt(i).pipe(aa())}(n,i.route,t))),to(i=>!0!==i,!0))}(r,u,n,e):gt(m)),(0,wt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Nr.b)(m=>{if(Bu(m.guardsResult)){const w=ro(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw w.url=m.guardsResult,w}const v=new $l(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),pr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),lt(m=>{if(m.guards.canActivateChecks.length)return gt(m).pipe((0,Nr.b)(v=>{const w=new Sr(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(w)}),wn(v=>{let w=!1;return gt(v).pipe(function W(n,e){return(0,bn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let u=0;return(0,Fn.D)(i).pipe(eo(d=>function se(n,e,t,r){return function je(n,e,t,r){const i=nt(n);if(0===i.length)return gt({});const u={};return(0,Fn.D)(i).pipe((0,bn.z)(d=>function vt(n,e,t,r){const i=uc(n,e,r);return bi(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,Nr.b)(m=>{u[d]=m}))),bd(1),(0,bn.z)(()=>nt(u).length===i.length?gt(u):Xs.E))}(n._resolve,n,e,r).pipe((0,wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),B_(n,t).resolve),null)))}(d.route,r,n,e)),(0,Nr.b)(()=>u++),bd(1),(0,bn.z)(d=>u===i.length?gt(t):Xs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Nr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Nr.b)(v=>{const w=new vi(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(w)}))}),lt(m=>{const{targetSnapshot:v,id:w,extractedUrl:A,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=m;return this.hooks.afterPreactivation(v,{navigationId:w,appliedUrlTree:A,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,wt.U)(m=>{const v=function U_(n,e,t){const r=ec(n,e._root,t?t._root:void 0);return new Id(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:v})}),(0,Nr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new Cg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Nr.b)({next(){u=!0},complete(){u=!0}}),function yg(n){return(0,ir.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===i.id&&(this.currentNavigation=null)}),Zi(m=>{if(d=!0,function Dd(n){return n&&n[Kl]}(m)){const v=Bu(m.url);v||(this.navigated=!0,this.restoreHistory(i,!0));const w=new En(i.id,this.serializeUrl(i.extractedUrl),m.message);r.next(w),v?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Og(i.source)};this.scheduleNavigation(A,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const v=new Hl(i.id,this.serializeUrl(i.extractedUrl),m);r.next(v);try{i.resolve(this.errorHandler(m))}catch(w){i.reject(w)}}return Xs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},d=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(d){const v=Object.assign({},d);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sc(t),this.config=t.map(gf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:v}=r,w=i||this.routerState.root,A=v?this.currentUrlTree.fragment:d;let M=null;switch(m){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function io(n,e,t,r,i){if(0===t.length)return wg(e.root,e.root,e.root,r,i);const u=function H_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new G_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Jn(u.outlets,(v,w)=>{m[w]="string"==typeof v?v.split("/"):v}),[...i,{outlets:m}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===d?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&i.push(m))}),i):[...i,u]},[]);return new G_(t,e,r)}(t);if(u.toRoot())return wg(e.root,e.root,new Se([],{}),r,i);const d=function Eg(n,e,t){if(n.isAbsolute)return new sf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new sf(u,u===e.root,0)}const r=oa(n.commands[0])?0:1;return function $_(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sf(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?so(d.segmentGroup,d.index,u.commands):z_(d.segmentGroup,d.index,u.commands);return wg(e.root,d.segmentGroup,m,r,i)}(w,this.currentUrlTree,t,M,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Nf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Af):!1===r?Object.assign({},Ld):r,Bu(t))return Pu(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Pu(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ru(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,d){var m,v;if(this.disposed)return Promise.resolve(!1);let w,A,M;d?(w=d.resolve,A=d.reject,M=d.promise):M=new Promise((J,ue)=>{w=J,A=ue});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:w,reject:A,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(J=>Promise.reject(J))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new En(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Og(n){return"imperative"!==n}let kg=(()=>{class n{constructor(t,r,i,u,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new nn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Vd(this.skipLocationChange),replaceUrl:Vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ri),c.Y36(Ro),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Pg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new nn.x,this.subscription=t.events.subscribe(u=>{u instanceof Ru&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,d){if(0!==t||r||i||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Vd(this.skipLocationChange),replaceUrl:Vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ri),c.Y36(Ro),c.Y36(fe))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Vd(n){return""===n||!!n}class uy{}class Wb{preload(e,t){return gt(null)}}let zb=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Gu(i,r,v=>t.triggerEvent(new Wl(v)),v=>t.triggerEvent(new vs(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(pr(t=>t instanceof Ru),eo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Fn.D)(i).pipe((0,qi.J)(),(0,wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,bn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ri),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(uy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ys?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ru&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ql&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ql(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new c.OlP("ROUTER_CONFIGURATION"),cy=new c.OlP("ROUTER_FORROOT_GUARD"),qb=[ye,{provide:$n,useClass:Nn},{provide:ri,useFactory:function hy(n,e,t,r,i,u,d={},m,v){const w=new ri(null,n,e,t,r,i,Ji(u));return m&&(w.urlHandlingStrategy=m),v&&(w.routeReuseStrategy=v),function Yb(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,w),d.enableTracing&&w.events.subscribe(A=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(F=console.groupEnd)||void 0===F||F.call(console)}),w},deps:[$n,rc,ye,c.zs3,c.Sil,ju,Ds,[class Tf{},new c.FiY],[class Sn{},new c.FiY]]},rc,{provide:Ro,useFactory:function Lg(n){return n.routerState.root},deps:[ri]},zb,Wb,class ly{preload(e,t){return t().pipe(Zi(()=>gt(null)))}},{provide:Ds,useValue:{enableTracing:!1}}];function GE(){return new c.PXZ("Router",ri)}let Sf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[qb,dy(t),{provide:cy,useFactory:Kb,deps:[[ri,new c.FiY,new c.tp0]]},{provide:Ds,useValue:r||{}},{provide:fe,useFactory:Zb,deps:[he,[new c.tBr(rt),new c.FiY],Ds]},{provide:Fg,useFactory:HE,deps:[ri,yu,Ds]},{provide:uy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Wb},{provide:c.PXZ,multi:!0,useFactory:GE},[Bd,{provide:c.ip1,multi:!0,useFactory:Jb,deps:[Bd]},{provide:py,useFactory:fy,deps:[Bd]},{provide:c.tb,multi:!0,useExisting:py}]]}}static forChild(t){return{ngModule:n,providers:[dy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(cy,8),c.LFG(ri,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function HE(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Fg(n,e,t)}function Zb(n,e,t={}){return t.useHash?new Ce(n,e):new Ke(n,e)}function Kb(n){return"guarded"}function dy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:ju,multi:!0,useValue:n}]}let Bd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new nn.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(m=>r=m),u=this.injector.get(ri),d=this.injector.get(Ds);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ds),i=this.injector.get(zb),u=this.injector.get(Fg),d=this.injector.get(ri),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Jb(n){return n.appInitializer.bind(n)}function fy(n){return n.bootstrapListener.bind(n)}const py=new c.OlP("Router Initializer");var my=O(4986),Rr=O(5813);function _y(){return(0,ir.e)((n,e)=>{let t,r=!1;n.subscribe((0,_n.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Qb(n,e){return n===e}var it,ws=O(2011),_A=(O(4087),O(3942)),ve=O(5861),dc=O(9681),Mf=O(4859),Hu=O(1877),zt=O(2090),Po="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ga={},yy=yy||{},St=Po||self;function Ug(){}function vy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ud(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var by="closure_uid_"+(1e9*Math.random()>>>0),zE=0;function Rt(n,e,t){return n.call.apply(n.bind,arguments)}function Xb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Gr(n,e,t){return(Gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rt:Xb).apply(null,arguments)}function xf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[i].apply(r,d)}}function Hr(){this.s=this.s,this.o=this.o}var qE={};Hr.prototype.s=!1,Hr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function WE(n){return Object.prototype.hasOwnProperty.call(n,by)&&n[by]||(n[by]=++zE)}(this);delete qE[n]}},Hr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ca=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function wy(n){return Array.prototype.concat.apply([],arguments)}function Rf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ey(n){return/^[\s\xa0]*$/.test(n)}var $r,Cy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function es(n,e){return-1!=n.indexOf(e)}function jd(n,e){return n<e?-1:n>e?1:0}e:{var Gg=St.navigator;if(Gg){var Hg=Gg.userAgent;if(Hg){$r=Hg;break e}}$r=""}function Of(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ZE(n){const e={};for(const t in n)e[t]=n[t];return e}var tD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nD(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<tD.length;u++)t=tD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Iy(n){return Iy[" "](n),n}Iy[" "]=Ug;var Gd,n,rD=es($r,"Opera"),kf=es($r,"Trident")||es($r,"MSIE"),iD=es($r,"Edge"),sD=iD||kf,Ty=es($r,"Gecko")&&!(es($r.toLowerCase(),"webkit")&&!es($r,"Edge"))&&!(es($r,"Trident")||es($r,"MSIE"))&&!es($r,"Edge"),oD=es($r.toLowerCase(),"webkit")&&!es($r,"Edge");function aD(){var n=St.document;return n?n.documentMode:void 0}e:{var uD="",lD=(n=$r,Ty?/rv:([^\);]+)(\)|;)/.exec(n):iD?/Edge\/([\d\.]+)/.exec(n):kf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oD?/WebKit\/(\S+)/.exec(n):rD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(lD&&(uD=lD?lD[1]:""),kf){var cD=aD();if(null!=cD&&cD>parseFloat(uD)){Gd=String(cD);break e}}Gd=uD}var yA={};var bA=St.document&&kf&&(aD()||parseInt(Gd,10))||void 0,DA=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Ug,e),St.removeEventListener("test",Ug,e)}catch(t){}return n}();function Vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function oo(n,e){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ty){e:{try{Iy(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ay[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&oo.Z.h.call(this)}}Vi.prototype.h=function(){this.defaultPrevented=!0},gr(oo,Vi);var Ay={2:"touch",3:"pen",4:"mouse"};oo.prototype.h=function(){oo.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pf="closure_listenable_"+(1e6*Math.random()|0),hD=0;function Ny(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++hD,this.ca=this.fa=!1}function Ff(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Hd(n){this.src=n,this.g={},this.h=0}function Sy(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=jg(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Ff(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function da(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Hd.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=da(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Ny(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var $g="closure_lm_"+(1e6*Math.random()|0),My={};function Wg(n,e,t,r,i){if(r&&r.once)return gD(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Wg(n,e[u],t,r,i);return null}return t=Wu(t),n&&n[Pf]?n.N(e,t,Ud(r)?!!r.capture:!!r,i):fD(n,e,t,!1,r,i)}function fD(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var d=Ud(i)?!!i.capture:!!i,m=$u(n);if(m||(n[$g]=m=new Hd(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function pD(){var e=xy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DA||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gD(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)gD(n,e[u],t,r,i);return null}return t=Wu(t),n&&n[Pf]?n.O(e,t,Ud(r)?!!r.capture:!!r,i):fD(n,e,t,!0,r,i)}function mD(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)mD(n,e[u],t,r,i);else r=Ud(r)?!!r.capture:!!r,t=Wu(t),n&&n[Pf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=da(u=n.g[e],t,r,i))&&(Ff(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=$u(n))&&(e=n.g[e.toString()],n=-1,e&&(n=da(e,t,r,i)),(t=-1<n?e[n]:null)&&hc(t))}function hc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Pf])Sy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=$u(e))?(Sy(t,n),0==t.h&&(t.src=null,e[$g]=null)):Ff(n)}}}function fc(n){return n in My?My[n]:My[n]="on"+n}function xy(n,e){if(n.ca)n=!0;else{e=new oo(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&hc(n),n=t.call(r,e)}return n}function $u(n){return(n=n[$g])instanceof Hd?n:null}var pc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wu(n){return"function"==typeof n?n:(n[pc]||(n[pc]=function(e){return n.handleEvent(e)}),n[pc])}function Wr(){Hr.call(this),this.i=new Hd(this),this.P=this,this.I=null}function zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Vi(e,n);else if(e instanceof Vi)e.target=e.target||n;else{var i=e;nD(e=new Vi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];i=Lf(d,r,!0,e)&&i}if(i=Lf(d=e.g=n,r,!0,e)&&i,i=Lf(d,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Lf(d=e.g=t[u],r,!1,e)&&i}function Lf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,v=d.ia||d.src;d.fa&&Sy(n.i,d),i=!1!==m.call(v,r)&&i}}return i&&!r.defaultPrevented}gr(Wr,Hr),Wr.prototype[Pf]=!0,Wr.prototype.removeEventListener=function(n,e,t,r){mD(this,n,e,t,r)},Wr.prototype.M=function(){if(Wr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ff(t[r]);delete n.g[e],n.h--}}this.I=null},Wr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Wr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vf=St.JSON.stringify;function Ry(){var n=ky;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zg,Bf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new JE,n=>n.reset());class JE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yD(n){St.setTimeout(()=>{throw n},0)}function vD(n,e){zg||function bD(){var n=St.Promise.resolve(void 0);zg=function(){n.then(QE)}}(),Oy||(zg(),Oy=!0),ky.add(n,e)}var Oy=!1,ky=new class _D{constructor(){this.h=this.g=null}add(e,t){const r=Bf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function QE(){for(var n;n=Ry();){try{n.h.call(n.g)}catch(t){yD(t)}var e=Bf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Oy=!1}function qg(n,e){Wr.call(this),this.h=n||1,this.g=e||St,this.j=Gr(this.kb,this),this.l=Date.now()}function Bi(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Py(n,e,t){if("function"==typeof n)t&&(n=Gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function DD(n){n.g=Py(()=>{n.g=null,n.i&&(n.i=!1,DD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}gr(qg,Wr),(it=qg.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zr(this,"tick"),this.da&&(Bi(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){qg.Z.M.call(this),Bi(this),delete this.g};class wA extends Hr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:DD(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zg(n){Hr.call(this),this.h=n,this.g={}}gr(Zg,Hr);var Fy=[];function XE(n,e,t,r){Array.isArray(t)||(t&&(Fy[0]=t.toString()),t=Fy);for(var i=0;i<t.length;i++){var u=Wg(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function wD(n){Of(n.g,function(e,t){this.g.hasOwnProperty(t)&&hc(e)},n),n.g={}}function $d(){this.g=!0}function Wd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function CD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<i.length;d++)i[d]=""}}}return Vf(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Zg.prototype.M=function(){Zg.Z.M.call(this),wD(this)},Zg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$d.prototype.Aa=function(){this.g=!1},$d.prototype.info=function(){};var gc={},Ly=null;function Kg(){return Ly=Ly||new Wr}function ID(n){Vi.call(this,gc.Ma,n)}function zd(n){const e=Kg();zr(e,new ID(e,n))}function Vy(n,e){Vi.call(this,gc.STAT_EVENT,n),this.stat=e}function Ui(n){const e=Kg();zr(e,new Vy(e,n))}function Fo(n,e){Vi.call(this,gc.Na,n),this.size=e}function mc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}gc.Ma="serverreachability",gr(ID,Vi),gc.STAT_EVENT="statevent",gr(Vy,Vi),gc.Na="timingevent",gr(Fo,Vi);var Yg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},TD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function AD(){}function ND(){}AD.prototype.h=null;var jy,Uf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Uy(){Vi.call(this,"d")}function jf(){Vi.call(this,"c")}function Jg(){}function zu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Zg(this),this.P=nC,this.W=new qg(n=sD?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Qg}function Qg(){this.i=null,this.g="",this.h=!1}gr(Uy,Vi),gr(jf,Vi),gr(Jg,AD),Jg.prototype.g=function(){return new XMLHttpRequest},Jg.prototype.i=function(){return{}},jy=new Jg;var nC=45e3,Gf={},qd={};function Xg(n,e,t){n.K=1,n.v=im(Es(e)),n.s=t,n.U=!0,SD(n,null)}function SD(n,e){n.F=Date.now(),Hf(n),n.A=Es(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),sm(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Qg,n.g=Cc(n.l,t?e:null,!n.s),0<n.O&&(n.L=new wA(Gr(n.Ia,n,n.g),n.O)),XE(n.V,n.g,"readystatechange",n.gb),e=n.H?ZE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),zd(1),function ED(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),v=0;v<m.length;v++){var w=m[v].split("=");if(1<w.length){var A=w[0];w=w[1];var M=A.split("_");d=2<=M.length&&"type"==M[1]?d+(A+"=")+w+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function MD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function em(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=EA(n,t),i==qd){4==e&&(n.o=4,Ui(14),r=!1),Wd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Gf){n.o=4,Ui(15),Wd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wd(n.j,n.m,i,null),tm(n,i)}MD(n)&&i!=qd&&i!=Gf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Jf(e),e.L=!0,Ui(11))):(Wd(n.j,n.m,t,"[Invalid Chunked Response]"),qu(n),Zd(n))}function EA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qd:(t=Number(e.substring(t,r)),isNaN(t)?Gf:(r+=1)+t>e.length?qd:(e=e.substr(r,t),n.C=r+t,e))}function Hf(n){n.Y=Date.now()+n.P,Gy(n,n.P)}function Gy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=mc(Gr(n.eb,n),e)}function $f(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function Zd(n){0==n.l.G||n.I||bc(n.l,n)}function qu(n){$f(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Bi(n.W),wD(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function tm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Zy(t.i,n)))if(t.I=n.N,!n.J&&Zy(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=mc(Gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;za(t),Yu(t)}ts(t),Ui(18)}if(1>=FD(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else uo(t,11)}else if((n.J||t.g==n)&&za(t),!Ey(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const A=w[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=w[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=w[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const J=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var u=r.i;!u.g&&(es(J,"spdy")||es(J,"quic")||es(J,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(om(u,u.h),u.h=null))}if(r.D){const ue=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,Mn(r.F,r.D,ue))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Ec(r,r.H?r.la:null,r.W),d.J){uC(r.i,d);var m=d,v=r.K;v&&m.setTimeout(v),m.B&&($f(m),Hf(m)),r.g=d}else Yf(r);0<t.l.length&&rh(t)}else"stop"!=w[0]&&"close"!=w[0]||uo(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?uo(t,7):Xy(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}zd(4)}catch(w){}}function Kd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vy(n)||"string"==typeof n)ca(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(vy(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Ha(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(vy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function Yd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Yd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Hy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Jd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Jd(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Jd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=zu.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==Wa(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const A=Wa(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||sD||this.g&&(this.h.h||this.g.ga()||jD(this.g)))){this.I||4!=A||7==e||zd(8==e||0>=M?3:2),$f(this);var t=this.g.ba();this.N=t;t:if(MD(this)){var r=jD(this.g);n="";var i=r.length,u=4==Wa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qu(this),Zd(this);var d="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function eC(n,e,t,r,i,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ey(m)){var w=m;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ui(12),qu(this),Zd(this);break e}Wd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tm(this,t)}this.U?(em(this,A,d),sD&&this.i&&3==A&&(XE(this.V,this.W,"tick",this.fb),this.W.start())):(Wd(this.j,this.m,d,null),tm(this,d)),4==A&&qu(this),this.i&&!this.I&&(4==A?bc(this.l,this):(this.i=!1,Hf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),qu(this),Zd(this)}}}catch(A){}},it.fb=function(){if(this.g){var n=Wa(this.g),e=this.g.ga();this.C<e.length&&($f(this),em(this,n,e),this.i&&4!=n&&Hf(this))}},it.cancel=function(){this.I=!0,qu(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function tC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zd(3),Ui(17)),qu(this),this.o=2,Zd(this)):Gy(this,this.Y-n)},(it=Yd.prototype).R=function(){Hy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return Hy(this),this.g.concat()},it.get=function(n,e){return Jd(this.h,n)?this.h[n]:e},it.set=function(n,e){Jd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var nm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $a(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $a){this.g=void 0!==e?e:n.g,rm(this,n.j),this.s=n.s,Qd(this,n.i),Wf(this,n.m),this.l=n.l,e=n.h;var t=new qf;t.i=e.i,e.g&&(t.g=new Yd(e.g),t.h=e.h),$y(this,t),this.o=n.o}else n&&(t=String(n).match(nm))?(this.g=!!e,rm(this,t[1]||"",!0),this.s=zf(t[2]||""),Qd(this,t[3]||"",!0),Wf(this,t[4]),this.l=zf(t[5]||"",!0),$y(this,t[6]||"",!0),this.o=zf(t[7]||"")):(this.g=!!e,this.h=new qf(null,this.g))}function Es(n){return new $a(n)}function rm(n,e,t){n.j=t?zf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Qd(n,e,t){n.i=t?zf(e,!0):e}function Wf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $y(n,e,t){e instanceof qf?(n.h=e,function OD(n,e){e&&!n.j&&(Zu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(RD(this,r),sm(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Xd(e,th)),n.h=new qf(e,n.g))}function Mn(n,e,t){n.h.set(e,t)}function im(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,eh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function eh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$a.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xd(e,zy,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xd(e,zy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xd(t,"/"==t.charAt(0)?sC:iC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xd(t,oC)),n.join("")};var zy=/[#\/\?@]/g,iC=/[#\?:]/g,sC=/[#\?]/g,th=/[#\?@]/g,oC=/#/g;function qf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Zu(n){n.g||(n.g=new Yd,n.h=0,n.i&&function xD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RD(n,e){Zu(n),e=_c(n,e),Jd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Jd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Hy(n)))}function ao(n,e){return Zu(n),e=_c(n,e),Jd(n.g.h,e)}function sm(n,e,t){RD(n,e),0<t.length&&(n.i=null,n.g.set(_c(n,e),Rf(t)),n.h+=t.length)}function _c(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function qy(n){this.l=n||aC,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ea&&St.g.Ea()&&St.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=qf.prototype).add=function(n,e){Zu(this),this.i=null,n=_c(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Zu(this),this.g.forEach(function(t,r){ca(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){Zu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},it.R=function(n){Zu(this);var e=[];if("string"==typeof n)ao(this,n)&&(e=wy(e,this.g.get(_c(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=wy(e,n[t])}return e},it.set=function(n,e){return Zu(this),this.i=null,ao(this,n=_c(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=i;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var aC=10;function PD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function FD(n){return n.h?1:n.g?n.g.size:0}function Zy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function om(n,e){n.g?n.g.add(e):n.h=e}function uC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ky(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rf(n.i)}function Yy(){}function lC(){this.g=new Yy}function CA(n,e,t){const r=t||"";try{Kd(n,function(i,u){let d=i;Ud(i)&&(d=Vf(i)),e.push(r+u+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Zf(n){this.l=n.$b||null,this.j=n.ib||!1}function Kf(n,e){Wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=am,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qy.prototype.cancel=function(){if(this.i=Ky(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yy.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},Yy.prototype.parse=function(n){return St.JSON.parse(n,void 0)},gr(Zf,AD),Zf.prototype.g=function(){return new Kf(this.l,this.j)},Zf.prototype.i=function(n){return function(){return n}}({}),gr(Kf,Wr);var am=0;function cC(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ji(n){n.readyState=4,n.l=null,n.j=null,n.A=null,um(n)}function um(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Kf.prototype).open=function(n,e){if(this.readyState!=am)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,um(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ji(this)),this.readyState=am},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,um(this)),this.g&&(this.readyState=3,um(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==St.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cC(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ji(this):um(this),3==this.readyState&&cC(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,ji(this))},it.Ta=function(n){this.g&&(this.response=n,ji(this))},it.ha=function(){this.g&&ji(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TA=St.JSON.parse;function sr(n){Wr.call(this),this.headers=new Yd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jy,this.K=this.L=!1}gr(sr,Wr);var Jy="",LD=/^https?$/i,dC=["POST","PUT"];function VD(n){return"content-type"==n.toLowerCase()}function lm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,BD(n),dm(n)}function BD(n){n.D||(n.D=!0,zr(n,"complete"),zr(n,"error"))}function cm(n){if(n.h&&void 0!==yy&&(!n.C[1]||4!=Wa(n)||2!=n.ba()))if(n.v&&4==Wa(n))Py(n.Fa,0,n);else if(zr(n,"readystatechange"),4==Wa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var i=String(n.H).match(nm)[1]||null;if(!i&&St.self&&St.self.location){var u=St.self.location.protocol;i=u.substr(0,u.length-1)}r=!LD.test(i?i.toLowerCase():"")}t=r}if(t)zr(n,"complete"),zr(n,"success");else{n.m=6;try{var d=2<Wa(n)?n.g.statusText:""}catch(v){d=""}n.j=d+" ["+n.ba()+"]",BD(n)}}finally{dm(n)}}}function dm(n,e){if(n.g){UD(n);const t=n.g,r=n.C[0]?Ug:null;n.g=null,n.C=null,e||zr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function UD(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function Wa(n){return n.g?n.g.readyState:0}function jD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Jy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function hC(n){let e="";return Of(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Ku(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function yc(n){this.za=0,this.l=[],this.h=new $d,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ku("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ku("baseRetryDelayMs",5e3,n),this.$a=Ku("retryDelaySeedMs",1e4,n),this.Ya=Ku("forwardChannelMaxRetries",2,n),this.ra=Ku("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new qy(n&&n.concurrentRequestLimit),this.Ca=new lC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xy(n){if(GD(n),3==n.G){var e=n.V++,t=Es(n.F);Mn(t,"SID",n.J),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),mr(n,t),(e=new zu(n,n.h,e,void 0)).K=2,e.v=im(Es(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=Cc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hf(e)}wc(n)}function Yu(n){n.g&&(Jf(n),n.g.cancel(),n.g=null)}function GD(n){Yu(n),n.u&&(St.clearTimeout(n.u),n.u=null),za(n),n.i.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function ev(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&rh(n)}function rh(n){PD(n.i)||n.m||(n.m=!0,vD(n.Ha,n),n.C=0)}function ih(n,e){var t;t=e?e.m:n.V++;const r=Es(n.F);Mn(r,"SID",n.J),Mn(r,"RID",t),Mn(r,"AID",n.U),mr(n,r),n.o&&n.s&&Qy(r,n.o,n.s),t=new zu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ju(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),om(n.i,t),Xg(t,r,e)}function mr(n,e){n.j&&Kd({},function(t,r){Mn(e,r,t)})}function Ju(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Gr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=i[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let w=i[v].h;const A=i[v].g;if(w-=u,0>w)u=Math.max(0,i[v].h-100),m=!1;else try{CA(A,d,"req"+w+"_")}catch(M){r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Yf(n){n.g||n.u||(n.Y=1,vD(n.Ga,n),n.A=0)}function ts(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=mc(Gr(n.Ga,n),Dc(n,n.A)),n.A++,0))}function Jf(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function vc(n){n.g=new zu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Es(n.oa);Mn(e,"RID","rpc"),Mn(e,"SID",n.J),Mn(e,"CI",n.N?"0":"1"),Mn(e,"AID",n.U),mr(n,e),Mn(e,"TYPE","xmlhttp"),n.o&&n.s&&Qy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=im(Es(e)),t.s=null,t.U=!0,SD(t,n)}function za(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function bc(n,e){var t=null;if(n.g==e){za(n),Jf(n),n.g=null;var r=2}else{if(!Zy(n.i,e))return;t=e.D,uC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;zr(r=Kg(),new Fo(r,t,e,i)),rh(n)}else Yf(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ha(n,e){return!(FD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=mc(Gr(n.Ha,n,e),Dc(n,n.C)),n.C++,0)))}(n,e)||2==r&&ts(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:uo(n,5);break;case 4:uo(n,10);break;case 3:uo(n,6);break;default:uo(n,2)}}function Dc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function uo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Gr(n.jb,n);t||(t=new $a("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||rm(t,"https"),im(t)),function IA(n,e){const t=new $d;if(St.Image){const r=new Image;r.onload=xf(nh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=xf(nh,t,r,"TestLoadImage: error",!1,e),r.onabort=xf(nh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=xf(nh,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.G=0,n.j&&n.j.va(e),wc(n),GD(n)}function wc(n){n.G=0,n.I=-1,n.j&&((0!=Ky(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Rf(n.l),n.l.length=0),n.j.ua())}function Ec(n,e,t){let r=function Wy(n){return n instanceof $a?Es(n):new $a(n,void 0)}(t);if(""!=r.i)e&&Qd(r,e+"."+r.i),Wf(r,r.m);else{const i=St.location;r=function rC(n,e,t,r){var i=new $a(null,void 0);return n&&rm(i,n),e&&Qd(i,e),t&&Wf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Of(n.aa,function(i,u){Mn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Mn(r,e,t),Mn(r,"VER",n.ma),mr(n,r),r}function Cc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&n.Ba&&!n.qa?new Zf({ib:!0}):n.qa)).L=n.H,e}function Ic(){}function Qf(){if(kf&&!(10<=Number(bA)))throw Error("Environmental error: no available transport.")}function ns(n,e){Wr.call(this),this.g=new yc(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ey(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ey(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Tc(this)}function tv(n){Uy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function nv(){jf.call(this),this.status=1}function Tc(n){this.g=n}(it=sr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jy.g(),this.C=function By(n){return n.h||(n.h=n.i())}(this.u?this.u:jy),this.g.onreadystatechange=Gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void lm(this,u)}n=t||"";const i=new Yd(this.headers);r&&Kd(r,function(u,d){i.set(d,u)}),r=function Dy(n){e:{var e=VD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=St.FormData&&n instanceof St.FormData,!(0<=jg(dC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{UD(this),0<this.B&&((this.K=function AA(n){return kf&&function vA(){return function KE(n){var e=yA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Cy(String(Gd)).split("."),t=Cy("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",u=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=jd(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||jd(0==i[2].length,0==u[2].length)||jd(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gr(this.pa,this)):this.A=Py(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){lm(this,u)}},it.pa=function(){void 0!==yy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zr(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zr(this,"complete"),zr(this,"abort"),dm(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dm(this,!0)),sr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?cm(this):this.cb())},it.cb=function(){cm(this)},it.ba=function(){try{return 2<Wa(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),TA(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=yc.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new zu(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=ZE(u),nD(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ju(this,i,e),Mn(t=Es(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),mr(this,t),this.o&&u&&Qy(t,this.o,u),om(this.i,i),this.Ra&&Mn(t,"TYPE","init"),this.ja?(Mn(t,"$req",e),Mn(t,"SID","null"),i.$=!0,Xg(i,t,null)):Xg(i,t,e),this.G=2}}else 3==this.G&&(n?ih(this,n):0==this.l.length||PD(this.i)||ih(this))},it.Ga=function(){if(this.u=null,vc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=mc(Gr(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ui(10),Yu(this),vc(this))},it.ab=function(){null!=this.v&&(this.v=null,Yu(this),ts(this),Ui(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ui(2)):(this.h.info("Failed to ping google.com"),Ui(1))},(it=Ic.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},Qf.prototype.g=function(n,e){return new ns(n,e)},gr(ns,Wr),ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),vD(Gr(n.hb,n,e))),Ui(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Ec(n,null,n.W),rh(n)},ns.prototype.close=function(){Xy(this.g)},ns.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ev(this.g,e)}else this.v?((e={}).__data__=Vf(n),ev(this.g,e)):ev(this.g,n)},ns.prototype.M=function(){this.g.j=null,delete this.j,Xy(this.g),delete this.g,ns.Z.M.call(this)},gr(tv,Uy),gr(nv,jf),gr(Tc,Ic),Tc.prototype.xa=function(){zr(this.g,"a")},Tc.prototype.wa=function(n){zr(this.g,new tv(n))},Tc.prototype.va=function(n){zr(this.g,new nv(n))},Tc.prototype.ua=function(){zr(this.g,"b")},Qf.prototype.createWebChannel=Qf.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,Yg.NO_ERROR=0,Yg.TIMEOUT=8,Yg.HTTP_ERROR=6,TD.COMPLETE="complete",ND.EventType=Uf,Uf.OPEN="a",Uf.CLOSE="b",Uf.ERROR="c",Uf.MESSAGE="d",Wr.prototype.listen=Wr.prototype.N,sr.prototype.listenOnce=sr.prototype.O,sr.prototype.getLastError=sr.prototype.La,sr.prototype.getLastErrorCode=sr.prototype.Da,sr.prototype.getStatus=sr.prototype.ba,sr.prototype.getResponseJson=sr.prototype.Qa,sr.prototype.getResponseText=sr.prototype.ga,sr.prototype.send=sr.prototype.ea;var HD=Ga.createWebChannelTransport=function(){return new Qf},$D=Ga.getStatEventTarget=function(){return Kg()},hm=Ga.ErrorCode=Yg,WD=Ga.EventType=TD,fC=Ga.Event=gc,rv=Ga.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pC=Ga.FetchXmlHttpFactory=Zf,Xf=Ga.WebChannel=ND,zD=Ga.XhrIo=sr;const qD="@firebase/firestore";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let Ac="9.6.10";const Qu=new Hu.Yd("@firebase/firestore");function fm(){return Qu.logLevel}function Le(n,...e){if(Qu.logLevel<=Hu.in.DEBUG){const t=e.map(tp);Qu.debug(`Firestore (${Ac}): ${n}`,...t)}}function Or(n,...e){if(Qu.logLevel<=Hu.in.ERROR){const t=e.map(tp);Qu.error(`Firestore (${Ac}): ${n}`,...t)}}function ep(n,...e){if(Qu.logLevel<=Hu.in.WARN){const t=e.map(tp);Qu.warn(`Firestore (${Ac}): ${n}`,...t)}}function tp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function At(n,e){n||st()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class sh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yC{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let d=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new kr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const w=d;e.enqueueRetryable((0,ve.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},v=w=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(w=>v(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?v(w):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new kr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new mC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new ii(e)}}class ZD{constructor(e,t,r){this.type="FirstParty",this.user=ii.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class vC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new ZD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pm{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new iv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class rs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function bC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}rs.A=-1;class KD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bC(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function oh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function YD(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Qn(0,0))}static max(){return new Ct(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function sv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mm{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),d=t.get(i);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends mm{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const DC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class si extends mm{construct(e,t,r){return new si(e,t,r)}static isValidIdentifier(e){return DC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new si(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new Me(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Me(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===m?(d=!d,i++):"."!==m||d?(r+=m,i++):(u(),i++)}if(u(),d)throw new Me(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new si(t)}static emptyPath(){return new si([])}}class fa{constructor(e){this.fields=e,e.sort(si.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new or(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const ov=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function el(n){if(At(!!n),"string"==typeof n){let e=0;const t=ov.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(n.seconds),nanos:xn(n.nanos)}}function xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pa(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function np(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wC(n){const e=n.mapValue.fields.__previous_value__;return np(e)?wC(e):e}function rp(n){const e=el(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class av{constructor(e,t,r,i,u,d,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class Lo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}function tl(n){return null==n}function ah(n){return 0===n&&1/n==-1/0}function _m(n){return"number"==typeof n&&Number.isInteger(n)&&!ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Jt.fromString(e))}static fromName(e){return new Ge(Jt.fromString(e).popFirst(5))}static empty(){return new Ge(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Jt(e.slice()))}}const uv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ym={nullValue:"NULL_VALUE"};function nl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?np(n)?4:dv(n)?9:10:st()}function ga(n,e){if(n===e)return!0;const t=nl(n);if(t!==nl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=el(r.timestampValue),d=el(i.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,pa(n.bytesValue).isEqual(pa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xn(r.geoPointValue.latitude)===xn(i.geoPointValue.latitude)&&xn(r.geoPointValue.longitude)===xn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xn(r.integerValue)===xn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=xn(r.doubleValue),d=xn(i.doubleValue);return u===d?ah(u)===ah(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return oh(n.arrayValue.values||[],e.arrayValue.values||[],ga);case 10:return function(r,i){const u=r.mapValue.fields||{},d=i.mapValue.fields||{};if(sv(u)!==sv(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ga(u[m],d[m])))return!1;return!0}(n,e);default:return st()}var i}function uh(n,e){return void 0!==(n.values||[]).find(t=>ga(t,e))}function qa(n,e){if(n===e)return 0;const t=nl(n),r=nl(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const d=xn(i.integerValue||i.doubleValue),m=xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return vm(n.timestampValue,e.timestampValue);case 4:return vm(rp(n),rp(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,u){const d=pa(i),m=pa(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const d=i.split("/"),m=u.split("/");for(let v=0;v<d.length&&v<m.length;v++){const w=qt(d[v],m[v]);if(0!==w)return w}return qt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const d=qt(xn(i.latitude),xn(u.latitude));return 0!==d?d:qt(xn(i.longitude),xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const d=i.values||[],m=u.values||[];for(let v=0;v<d.length&&v<m.length;++v){const w=qa(d[v],m[v]);if(w)return w}return qt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const d=i.fields||{},m=Object.keys(d),v=u.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let A=0;A<m.length&&A<w.length;++A){const M=qt(m[A],w[A]);if(0!==M)return M;const F=qa(d[m[A]],v[w[A]]);if(0!==F)return F}return qt(m.length,w.length)}(n.mapValue,e.mapValue);default:throw st()}}function vm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=el(n),r=el(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function Nc(n){return lv(n)}function lv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=el(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pa(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const d of r.values||[])u?u=!1:i+=",",i+=lv(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of i)d?d=!1:u+=",",u+=`${m}:${lv(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function Sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bm(n){return!!n&&"integerValue"in n}function Mc(n){return!!n&&"arrayValue"in n}function ip(n){return!!n&&"nullValue"in n}function cv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sp(n){return!!n&&"mapValue"in n}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hv(n,e){return void 0===n?e:void 0===e||qa(n,e)>0?n:e}function fv(n,e){return void 0===n?e:void 0===e||qa(n,e)<0?n:e}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=si.emptyPath(),r={},i=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=m.popLast()}d?r[m.lastSegment()]=lh(d):i.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ga(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new oi(lh(this.value))}}function pv(n){const e=[];return Xu(n.fields,(t,r)=>{const i=new si([t]);if(sp(r)){const u=pv(r.mapValue).fields;if(0===u.length)e.push(i);else for(const d of u)e.push(i.child(d))}else e.push(i)}),new fa(e)}class Vn{constructor(e,t,r,i,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Vn(e,0,Ct.min(),Ct.min(),oi.empty(),0)}static newFoundDocument(e,t,r){return new Vn(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new Vn(e,2,t,Ct.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Ct.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gv(n){return n.fields.find(e=>2===e.kind)}function xc(n){return n.fields.filter(e=>2!==e.kind)}Dm.UNKNOWN_ID=-1;class wm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wn(0,Za.min())}}function mv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new Za(i,Ge.empty(),e)}function EC(n){return new Za(n.readTime,n.key,-1)}class Za{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Za(Ct.min(),Ge.empty(),-1)}static max(){return new Za(Ct.max(),Ge.empty(),-1)}}function QD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}class CC{constructor(e,t=null,r=[],i=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function _v(n,e=null,t=[],r=[],i=null,u=null,d=null){return new CC(n,e,t,r,i,u,d)}function rl(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Nc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),tl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nc(r)).join(",")),e.P=t}return e.P}function op(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!tw(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ga(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nw(n.startAt,e.startAt)&&nw(n.endAt,e.endAt)}function Em(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ap(n,e){return n.filters.filter(t=>t instanceof ai&&t.field.isEqual(e))}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new XD(e,t,r):"array-contains"===t?new ma(e,r):"in"===t?new IC(e,r):"not-in"===t?new ew(e,r):"array-contains-any"===t?new _a(e,r):new ai(e,t,r)}static V(e,t,r){return"in"===t?new MA(e,r):new yv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(qa(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.v(qa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class XD extends ai{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class MA extends ai{constructor(e,t){super(e,"in",t),this.keys=Cm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yv extends ai{constructor(e,t){super(e,"not-in",t),this.keys=Cm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class ma extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mc(t)&&uh(t.arrayValue,this.value)}}class IC extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&uh(this.value.arrayValue,t)}}class ew extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!uh(this.value.arrayValue,t)}}class _a extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uh(this.value.arrayValue,r))}}class qr{constructor(e,t){this.position=e,this.inclusive=t}}class Ei{constructor(e,t="asc"){this.field=e,this.dir=t}}function tw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function vv(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],d=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):qa(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function nw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ga(n.position[t],e.position[t]))return!1;return!0}class Ka{constructor(e,t=null,r=[],i=[],u=null,d="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=v,this.D=null,this.C=null}}function rw(n,e,t,r,i,u,d,m){return new Ka(n,e,t,r,i,u,d,m)}function dh(n){return new Ka(n)}function hh(n){return!tl(n.limit)&&"F"===n.limitType}function il(n){return!tl(n.limit)&&"L"===n.limitType}function bv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Im(n){for(const e of n.filters)if(e.S())return e.field;return null}function Dv(n){return null!==n.collectionGroup}function Rc(n){const e=qe(n);if(null===e.D){e.D=[];const t=Im(e),r=bv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ei(t)),e.D.push(new Ei(si.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ei(si.keyField(),u))}}}return e.D}function Cs(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=_v(e.path,e.collectionGroup,Rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Rc(e))t.push(new Ei(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new qr(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new qr(e.startAt.position,!e.startAt.inclusive):null;e.C=_v(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function up(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lp(n,e){return op(Cs(n),Cs(e))&&n.limitType===e.limitType}function wv(n){return`${rl(Cs(n))}|lt:${n.limitType}`}function Tm(n){return`Query(target=${function ch(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Nc(r.value)}`;var r}).join(", ")}]`),tl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Nc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Nc(t)).join(",")),`Target(${e})`}(Cs(n))}; limitType=${n.limitType})`}function cp(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,d){const m=vv(i,u,d);return i.inclusive?m<=0:m<0}(t.startAt,Rc(t),r)||t.endAt&&!function(i,u,d){const m=vv(i,u,d);return i.inclusive?m>=0:m>0}(t.endAt,Rc(t),r)));var t,r}function dp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ev(n){return(e,t)=>{let r=!1;for(const i of Rc(n)){const u=iw(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function iw(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,d){const m=u.data.field(i),v=d.data.field(i);return null!==m&&null!==v?qa(m,v):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Cv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function Iv(n){return{integerValue:""+n}}function Tv(n,e){return _m(e)?Iv(e):Cv(n,e)}class hp{constructor(){this._=void 0}}function sw(n,e,t){return n instanceof fh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Oc?uw(n,e):n instanceof kc?lw(n,e):function(r,i){const u=aw(r,i),d=cw(u)+cw(r.k);return bm(u)&&bm(r.k)?Iv(d):Cv(r.M,d)}(n,e)}function ow(n,e,t){return n instanceof Oc?uw(n,e):n instanceof kc?lw(n,e):t}function aw(n,e){return n instanceof ph?bm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class fh extends hp{}class Oc extends hp{constructor(e){super(),this.elements=e}}function uw(n,e){const t=dw(e);for(const r of n.elements)t.some(i=>ga(i,r))||t.push(r);return{arrayValue:{values:t}}}class kc extends hp{constructor(e){super(),this.elements=e}}function lw(n,e){let t=dw(e);for(const r of n.elements)t=t.filter(i=>!ga(i,r));return{arrayValue:{values:t}}}class ph extends hp{constructor(e,t){super(),this.M=e,this.k=t}}function cw(n){return xn(n.integerValue||n.doubleValue)}function dw(n){return Mc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fp{constructor(e,t){this.field=e,this.transform=t}}class AC{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Nm{}function NC(n,e,t){n instanceof gh?function(r,i,u){const d=r.value.clone(),m=xv(r.fieldTransforms,i,u.transformResults);d.setAll(m),i.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof sl?function(r,i,u){if(!Am(r.precondition,i))return void i.convertToUnknownDocument(u.version);const d=xv(r.fieldTransforms,i,u.transformResults),m=i.data;m.setAll(Mv(r)),m.setAll(d),i.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Av(n,e,t){var i;n instanceof gh?function(r,i,u){if(!Am(r.precondition,i))return;const d=r.value.clone(),m=Rv(r.fieldTransforms,u,i);d.setAll(m),i.convertToFoundDocument(Sv(i),d).setHasLocalMutations()}(n,e,t):n instanceof sl?function(r,i,u){if(!Am(r.precondition,i))return;const d=Rv(r.fieldTransforms,u,i),m=i.data;m.setAll(Mv(r)),m.setAll(d),i.convertToFoundDocument(Sv(i),m).setHasLocalMutations()}(n,e,t):Am(n.precondition,i=e)&&i.convertToNoDocument(Ct.min())}function SC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=aw(r.transform,i||null);null!=u&&(null==t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function Nv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&oh(t,r,(i,u)=>function TC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Oc&&r instanceof Oc||t instanceof kc&&r instanceof kc?oh(t.elements,r.elements,ga):t instanceof ph&&r instanceof ph?ga(t.k,r.k):t instanceof fh&&r instanceof fh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Sv(n){return n.isFoundDocument()?n.version:Ct.min()}class gh extends Nm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class sl extends Nm{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function Mv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xv(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],d=u.transform,m=e.data.field(u.field);r.set(u.field,ow(d,m,t[i]))}return r}function Rv(n,e,t){const r=new Map;for(const i of n){const u=i.transform,d=t.data.field(i.field);r.set(i.field,sw(u,d,e))}return r}class mh extends Nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Sm extends Nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ov{constructor(e){this.count=e}}var ar,jt;function hw(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function fw(n){if(void 0===n)return Or("GRPC error has no .code"),ce.UNKNOWN;switch(n){case ar.OK:return ce.OK;case ar.CANCELLED:return ce.CANCELLED;case ar.UNKNOWN:return ce.UNKNOWN;case ar.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case ar.INTERNAL:return ce.INTERNAL;case ar.UNAVAILABLE:return ce.UNAVAILABLE;case ar.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case ar.NOT_FOUND:return ce.NOT_FOUND;case ar.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case ar.ABORTED:return ce.ABORTED;case ar.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case ar.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(jt=ar||(ar={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class Is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return gm(this.inner)}size(){return this.innerSize}}class yr{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}}class _h{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ci.RED,this.left=null!=i?i:Ci.EMPTY,this.right=null!=u?u:Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ci(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pp(n){return n.hasNext()?n.getNext():void 0}const bt=new yr(Ge.comparator);function lo(){return bt}const MC=new yr(Ge.comparator);function Pv(){return MC}function ol(){return new Is(n=>n.toString(),(n,e)=>n.isEqual(e))}const xC=new yr(Ge.comparator),Mm=new Cn(Ge.comparator);function sn(...n){let e=Mm;for(const t of n)e=e.add(t);return e}const Xn=new Cn(qt);function Fv(){return Xn}class yh{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,gp.createSynthesizedTargetChangeForCurrentChange(e,t)),new yh(Ct.min(),r,Fv(),lo(),sn())}}class gp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new gp(or.EMPTY_BYTE_STRING,t,sn(),sn(),sn())}}class xm{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Lv{constructor(e,t){this.targetId=e,this.$=t}}class Vv{constructor(e,t,r=or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Bv{constructor(){this.B=0,this.L=mw(),this.U=or.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=sn(),t=sn(),r=sn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new gp(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=mw()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class pw{constructor(e){this.nt=e,this.st=new Map,this.it=lo(),this.rt=gw(),this.ot=new Cn(qt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(Em(u))if(0===r){const d=new Ge(u.path);this.ct(t,d,Vn.newNoDocument(d,Ct.min()))}else At(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Em(m.target)){const v=new Ge(m.target.path);null!==this.it.get(v)||this.It(d,v)||this.ct(d,v,Vn.newNoDocument(v,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=sn();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(v=>{const w=this.wt(v);return!w||2===w.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const i=new yh(e,t,this.ot,this.it,r);return this.it=lo(),this.rt=gw(),this.ot=new Cn(qt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Bv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Cn(qt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Bv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function gw(){return new yr(Ge.comparator)}function mw(){return new yr(Ge.comparator)}const RC={asc:"ASCENDING",desc:"DESCENDING"},mp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class OC{constructor(e,t){this.databaseId=e,this.N=t}}function _p(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _w(n,e){return n.N?e.toBase64():e.toUint8Array()}function Rm(n,e){return _p(n,e.toTimestamp())}function Pr(n){return At(!!n),Ct.fromTimestamp(function(e){const t=el(e);return new Qn(t.seconds,t.nanos)}(n))}function Om(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Uv(n){const e=Jt.fromString(n);return At(Dw(e)),e}function yp(n,e){return Om(n.databaseId,e.path)}function is(n,e){const t=Uv(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(vw(t))}function Pc(n,e){return Om(n.databaseId,e)}function yw(n){const e=Uv(n);return 4===e.length?Jt.emptyPath():vw(e)}function vp(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vw(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jv(n,e,t){return{name:yp(n,e),fields:t.value.mapValue.fields}}function Gv(n,e,t){const r=is(n,e.name),i=Pr(e.updateTime),u=new oi({mapValue:{fields:e.fields}}),d=Vn.newFoundDocument(r,i,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function vh(n,e){let t;if(e instanceof gh)t={update:jv(n,e.key,e.value)};else if(e instanceof mh)t={delete:yp(n,e.key)};else if(e instanceof sl)t={update:jv(n,e.key,e.data),updateMask:jC(e.fieldMask)};else{if(!(e instanceof Sm))return st();t={verify:yp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const d=u.transform;if(d instanceof fh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Oc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof kc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ph)return{fieldPath:u.field.canonicalString(),increment:d.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Rm(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function Hv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?_r.updateTime(Pr(i.updateTime)):void 0!==i.exists?_r.exists(i.exists):_r.none():_r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,d){let m=null;"setToServerValue"in d?(At("REQUEST_TIME"===d.setToServerValue),m=new fh):"appendMissingElements"in d?m=new Oc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new kc(d.removeAllFromArray.values||[]):"increment"in d?m=new ph(u,d.increment):st();const v=si.fromServerFormat(d.fieldPath);return new fp(v,m)}(n,i)):[];var i;if(e.update){const i=is(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new fa((e.updateMask.fieldPaths||[]).map(w=>si.fromServerFormat(w)));return new sl(i,u,d,t,r)}return new gh(i,u,t,r)}if(e.delete){const i=is(n,e.delete);return new mh(i,t)}if(e.verify){const i=is(n,e.verify);return new Sm(i,t)}return st()}function FC(n,e){return{documents:[Pc(n,e.path)]}}function LC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Pc(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Pc(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0===v.length)return;const w=v.map(A=>function(M){if("=="===M.op){if(cv(M.value))return{unaryFilter:{field:bh(M.field),op:"IS_NAN"}};if(ip(M.value))return{unaryFilter:{field:bh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(cv(M.value))return{unaryFilter:{field:bh(M.field),op:"IS_NOT_NAN"}};if(ip(M.value))return{unaryFilter:{field:bh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(M.field),op:BC(M.op),value:M.value}}}(A));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(v){if(0!==v.length)return v.map(w=>{return{field:bh((A=w).field),direction:km(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(w=e.limit,n.N||tl(w)?w:{value:w});var w,m,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function VC(n){let e=yw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=$v(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Ei(Fc((M=A).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,tl(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new qr((A=t.startAt).values||[],!!A.before));let w=null;return t.endAt&&(w=function(A){return new qr(A.values||[],!A.before)}(t.endAt)),rw(e,i,d,u,m,"F",v,w)}function $v(n){return n?void 0!==n.unaryFilter?[UC(n)]:void 0!==n.fieldFilter?[bp(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>$v(e)).reduce((e,t)=>e.concat(t)):st():[]}function km(n){return RC[n]}function BC(n){return mp[n]}function bh(n){return{fieldPath:n.canonicalString()}}function Fc(n){return si.fromServerFormat(n.fieldPath)}function bp(n){return ai.create(Fc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function UC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Fc(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Fc(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fc(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fc(n.unaryFilter.field);return ai.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function jC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wv(e)),e=GC(n.get(t),e);return Wv(e)}function GC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Wv(n){return n+"\x01\x01"}function Vo(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let v;0===i.length?v=m:(i+=m,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(u,d),i+="\0";break;case"\x11":i+=n.substring(u,d+1);break;default:st()}u=d+2}return new Jt(r)}const ww=["userId","batchId"];function Ya(n,e){return[n,Zr(e)]}function Ew(n,e,t){return[n,Zr(e),t]}const Cw={},HC=["prefixPath","collectionGroup","readTime","documentId"],Iw=["prefixPath","collectionGroup","documentId"],$C=["collectionGroup","readTime","prefixPath","documentId"],Tw=["canonicalId","targetId"],WC=["targetId","path"],zv=["path","targetId"],zC=["collectionId","parent"],Aw=["indexId","uid"],Nw=["uid","sequenceNumber"],qC=["indexId","uid","arrayValue","directionalValue","documentKey"],ZC=["indexId","uid","documentKey"],KC=["userId","collectionPath","documentId"],qv=["userId","collectionPath","largestBatchId"],YC=["userId","collectionGroup","largestBatchId"],Zv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JC=[...Zv,"documentOverlays"],Sw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QC=[...Sw,"indexConfiguration","indexState","indexEntries"],Mw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,u=0,d=!1;e.forEach(m=>{++i,m.next(()=>{++u,d&&u===i&&t()},v=>r(v))}),d=!0,u===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class Pm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new kr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Dh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Yv(r.target.error);this.At.reject(new Dh(e,i))}}static open(e,t,r,i){try{return new Pm(t,e.transaction(i,r))}catch(u){throw new Dh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XC(t)}}class Bo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Bo.Vt((0,zt.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Ja(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,zt.hl)())return!1;if(Bo.St())return!0;const e=(0,zt.z$)(),t=Bo.Vt(e),r=0<t&&t<10,i=Bo.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{i(new Dh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;i("VersionError"===m.name?new Me(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Dh(e,m))},u.onupgradeneeded=d=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const v=Pm.open(u.db,e,d?"readonly":"readwrite",r),w=i(v).next(A=>(v.bt(),A)).catch(A=>(v.abort(A),pe.reject(A))).toPromise();return w.catch(()=>{}),yield v.Rt,w}catch(v){const w="FirebaseError"!==v.name&&m<3;if(Le("SimpleDb","Transaction failed with error:",v.message,"Retrying:",w),u.close(),!w)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rw{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ja(this.Ft.delete())}}class Dh extends Me{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function al(n){return"IndexedDbTransactionError"===n.name}class XC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ja(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Ja(this.store.add(e))}get(e){return Ja(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Ja(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Ja(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Gt(i,(d,m)=>{u.push(m)}).next(()=>u)}{const i=this.store.getAll(r.range);return new pe((u,d)=>{i.onerror=m=>{d(m.target.error)},i.onsuccess=m=>{u(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=u=>{const d=Yv(u.target.error);i(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Gt(e,t){const r=[];return new pe((i,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void i();const v=new Rw(m),w=t(m.primaryKey,m.value,v);if(w instanceof pe){const A=w.catch(M=>(v.done(),pe.reject(M)));r.push(A)}v.isDone?i():null===v.Lt?m.continue():m.continue(v.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ja(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Yv(r.target.error);t(i)}})}let Kv=!1;function Yv(n){const e=Bo.Vt((0,zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kv||(Kv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ow extends xw{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function vr(n,e){const t=qe(n);return Bo.xt(t.Ht,e)}class Dp{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&NC(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Av(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Av(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,(t,r)=>Nv(t,r))&&oh(this.baseMutations,e.baseMutations,(t,r)=>Nv(t,r))}}class Fm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=xC;const u=e.mutations;for(let d=0;d<u.length;d++)i=i.insert(u[d].key,r[d].version);return new Fm(e,t,r,i)}}class wp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ul{constructor(e,t,r,i,u=Ct.min(),d=Ct.min(),m=or.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new ul(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ul(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kw{constructor(e){this.Jt=e}}function Pw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yp(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:_p(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Lc(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Lc(e.version)}}var i,u;return r}function Ep(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Lc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ll(n){const e=new Qn(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function wh(n,e){const t=(e.baseMutations||[]).map(u=>Hv(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Hv(n.Jt,u)),i=Qn.fromMillis(e.localWriteTimeMs);return new Dp(e.batchId,i,t,r)}function Eh(n){const e=ll(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ll(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=Cs(dh(yw(i.documents[0])))):r=Cs(VC(n.query)),new ul(r,n.targetId,0,n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken))}function eI(n,e){const t=Lc(e.snapshotVersion),r=Lc(e.lastLimboFreeSnapshotVersion);let i;i=Em(e.target)?FC(n.Jt,e.target):LC(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qv(n){const e=VC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?up(e,e.limit,"L"):e}function Ch(n,e){return new wp(e.largestBatchId,Hv(n.Jt,e.overlayMutation))}function Fw(n,e){const t=e.path.lastSegment();return[n,Zr(e.path.popLast()),t]}class Ih{getBundleMetadata(e,t){return Th(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ll(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Th(e).put({bundleId:(r=t).id,createTime:Lc(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Lw(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Qv(i.bundledQuery),readTime:ll(i.readTime)};var i})}saveNamedQuery(e,t){return Lw(e).put({name:(r=t).name,readTime:Lc(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Th(n){return vr(n,"bundles")}function Lw(n){return vr(n,"namedQueries")}class Vw{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Vw(e,t.uid||"")}getOverlay(e,t){return Ah(e).get(Fw(this.userId,t)).next(r=>r?Ch(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,d)=>{const m=new wp(t,d);i.push(this.Xt(e,m))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(Zr(d.getCollectionPath())));const u=[];return i.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Ah(e).Qt("collectionPathOverlayIndex",m))}),pe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=ol(),u=Zr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ah(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const v of m){const w=Ch(this.M,v);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=ol();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ah(e).Wt({index:"collectionGroupOverlayIndex",range:m},(v,w,A)=>{const M=Ch(this.M,w);u.size()<i||M.largestBatchId===d?(u.set(M.getKey(),M),d=M.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Ah(e).put(function(r,i,u){const[d,m,v]=Fw(i,u.mutation.key);return{userId:i,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vh(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Ah(n){return vr(n,"documentOverlays")}class Nh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(xn(e.integerValue));else if("doubleValue"in e){const r=xn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),ah(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(pa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?dv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):st()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function tI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Bw(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=tI(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Nh.fe=new Nh;class nI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Bw(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Bw(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Uw{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class jw{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Sh{constructor(){this.De=new nI,this.Ce=new Uw(this.De),this.xe=new jw(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Uo{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Uo(this.indexId,this.documentKey,this.arrayValue,r)}}function jo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Gw(n.arrayValue,e.arrayValue),0!==t?t:(t=Gw(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function Gw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Hw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=gv(e);if(void 0!==t&&!this.Be(t))return!1;const r=xc(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $w{constructor(){this.qe=new Xv}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class Xv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Cn(Jt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cn(Jt.comparator)).toArray()}}const Lm=new Uint8Array(0);class e0{constructor(e){this.user=e,this.Ge=new Xv,this.Ke=new Is(t=>rl(t),(t,r)=>op(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Zr(i)};return Ww(e).put(u)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[YD(t),""],!1,!0);return Ww(e).qt(i).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Vo(d.parent))}return r})}addFieldIndex(e,t){const r=Bm(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Bm(e),i=Um(e),u=Vm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Vm(e);let i=!0;const u=new Map;return pe.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{i&&(i=!!m),u.set(d,m)})).next(()=>{if(i){let d=sn();return pe.forEach(u,(m,v)=>{var w;Le("IndexedDbIndexManager",`Using index ${w=m,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Fe=>`${Fe.fieldPath}:${Fe.kind}`).join(",")}`} to execute ${rl(t)}`);const A=function(Fe,mt){const $e=gv(mt);if(void 0===$e)return null;for(const Je of ap(Fe,$e.fieldPath))switch(Je.op){case"array-contains-any":return Je.value.arrayValue.values||[];case"array-contains":return[Je.value]}return null}(v,m),M=function(Fe,mt){const $e=new Map;for(const Je of xc(mt))for(const Qe of ap(Fe,Je.fieldPath))switch(Qe.op){case"==":case"in":$e.set(Je.fieldPath.canonicalString(),Qe.value);break;case"not-in":case"!=":return $e.set(Je.fieldPath.canonicalString(),Qe.value),Array.from($e.values())}return null}(v,m),F=function(Fe,mt){const $e=[];let Je=!0;for(const Kt of xc(mt)){let Vt,zn=!0;for(const Qt of ap(Fe,Kt.fieldPath)){let Ot,Ti=!0;switch(Qt.op){case"<":case"<=":Ot="nullValue"in(Qe=Qt.value)?ym:"booleanValue"in Qe?{booleanValue:!1}:"integerValue"in Qe||"doubleValue"in Qe?{doubleValue:NaN}:"timestampValue"in Qe?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Qe?{stringValue:""}:"bytesValue"in Qe?{bytesValue:""}:"referenceValue"in Qe?Sc(Lo.empty(),Ge.empty()):"geoPointValue"in Qe?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Qe?{arrayValue:{}}:"mapValue"in Qe?{mapValue:{}}:st();break;case"==":case"in":case">=":Ot=Qt.value;break;case">":Ot=Qt.value,Ti=!1;break;case"!=":case"not-in":Ot=ym}hv(Vt,Ot)===Ot&&(Vt=Ot,zn=Ti)}if(null!==Fe.startAt)for(let Qt=0;Qt<Fe.orderBy.length;++Qt)if(Fe.orderBy[Qt].field.isEqual(Kt.fieldPath)){const Ot=Fe.startAt.position[Qt];hv(Vt,Ot)===Ot&&(Vt=Ot,zn=Fe.startAt.inclusive);break}if(void 0===Vt)return null;$e.push(Vt),Je&&(Je=zn)}var Qe;return new qr($e,Je)}(v,m),B=function(Fe,mt){const $e=[];let Je=!0;for(const Kt of xc(mt)){let Vt,zn=!0;for(const Qt of ap(Fe,Kt.fieldPath)){let Ot,Ti=!0;switch(Qt.op){case">=":case">":Ot="nullValue"in(Qe=Qt.value)?{booleanValue:!1}:"booleanValue"in Qe?{doubleValue:NaN}:"integerValue"in Qe||"doubleValue"in Qe?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Qe?{stringValue:""}:"stringValue"in Qe?{bytesValue:""}:"bytesValue"in Qe?Sc(Lo.empty(),Ge.empty()):"referenceValue"in Qe?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Qe?{arrayValue:{}}:"arrayValue"in Qe?{mapValue:{}}:"mapValue"in Qe?uv:st(),Ti=!1;break;case"==":case"in":case"<=":Ot=Qt.value;break;case"<":Ot=Qt.value,Ti=!1;break;case"!=":case"not-in":Ot=uv}fv(Vt,Ot)===Ot&&(Vt=Ot,zn=Ti)}if(null!==Fe.endAt)for(let Qt=0;Qt<Fe.orderBy.length;++Qt)if(Fe.orderBy[Qt].field.isEqual(Kt.fieldPath)){const Ot=Fe.endAt.position[Qt];fv(Vt,Ot)===Ot&&(Vt=Ot,zn=Fe.endAt.inclusive);break}if(void 0===Vt)return null;$e.push(Vt),Je&&(Je=zn)}var Qe;return new qr($e,Je)}(v,m),J=this.je(m,v,F),ue=this.je(m,v,B),Re=this.We(m,v,M),et=this.ze(m.indexId,A,J,!!F&&F.inclusive,ue,!!B&&B.inclusive,Re);return pe.forEach(et,Fe=>r.Kt(Fe,t.limit).next(mt=>{mt.forEach($e=>{d=d.add(new Ge(Vo($e.documentKey)))})}))}).next(()=>d)}return pe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,u,d,m){const v=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),w=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const F=t?this.He(t[M/w]):Lm,B=r?this.Je(e,F,r[M%w],i):this.Ye(e),J=u?this.Xe(e,F,u[M%w],d):this.Ye(e+1);A.push(...this.createRange(B,J,m.map(ue=>this.Je(e,F,ue,!0))))}return A}Je(e,t,r,i){const u=new Uo(e,Ge.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Uo(e,Ge.empty(),t,r);return i?u.ke():u}Ye(e){return new Uo(e,Ge.empty(),Lm,Lm)}getFieldIndex(e,t){const r=new Hw(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,v)=>v.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Sh;for(const i of xc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const d=r.Ne(i.kind);Nh.fe.Zt(u,d)}return r.Se()}He(e){const t=new Sh;return Nh.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Sh);let u=0;for(const d of xc(e)){const m=r[u++];for(const v of i)if(this.tn(t,d.fieldPath)&&Mc(m))i=this.en(i,d,m);else{const w=v.Ne(d.kind);Nh.fe.Zt(m,w)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of i){const v=new Sh;v.seed(m.Se()),Nh.fe.Zt(d,v.Ne(t.kind)),u.push(v)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof ai&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bm(e),i=Um(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return pe.forEach(u,m=>i.get([m.indexId,this.uid]).next(v=>{d.push(function(w,A){const M=A?new Wn(A.sequenceNumber,new Za(ll(A.readTime),new Ge(Vo(A.documentKey)),A.largestBatchId)):Wn.empty(),F=w.fields.map(([B,J])=>new wm(si.fromServerFormat(B),J));return new Dm(w.indexId,w.collectionGroup,F,M)}(m,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Bm(e),u=Um(e);return this.sn(e).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>pe.forEach(m,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Lc((F=r).readTime),documentKey:Zr(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,u)=>{const d=r.get(i.collectionGroup);return(d?pe.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),pe.forEach(m,v=>this.rn(e,i,v).next(w=>{const A=this.on(u,v);return w.isEqual(A)?pe.resolve():this.un(e,u,w,A)}))))})}an(e,t,r){return Vm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Zr(t.key.path)})}cn(e,t,r){return Vm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Zr(t.key.path)])}rn(e,t,r){const i=Vm(e);let u=new Cn(jo);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Zr(t.path)])},(d,m)=>{u=u.add(new Uo(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}on(e,t){let r=new Cn(jo);const i=this.Ze(t,e);if(null==i)return r;const u=gv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Mc(d))for(const m of d.arrayValue.values||[])r=r.add(new Uo(t.indexId,e.key,this.He(m),i))}else r=r.add(new Uo(t.indexId,e.key,Lm,i));return r}un(e,t,r,i){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,m,v,w,A){const M=d.getIterator(),F=m.getIterator();let B=pp(M),J=pp(F);for(;B||J;){let ue=!1,Re=!1;if(B&&J){const et=v(B,J);et<0?Re=!0:et>0&&(ue=!0)}else null!=B?Re=!0:ue=!0;ue?(w(J),J=pp(F)):Re?(A(B),B=pp(M)):(B=pp(M),J=pp(F))}}(r,i,jo,d=>{u.push(this.an(e,t,d))},d=>{u.push(this.cn(e,t,d))}),pe.waitFor(u)}sn(e){let t=1;return Um(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>jo(d,m)).filter((d,m,v)=>!m||0!==jo(d,v[m-1]));const i=[];i.push(e);for(const d of r){const m=jo(d,e),v=jo(d,t);if(0===m)i[0]=e.ke();else if(m>0&&v<0)i.push(d),i.push(d.ke());else if(v>0)break}i.push(t);const u=[];for(let d=0;d<i.length;d+=2)u.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,""],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,""]));return u}}function Ww(n){return vr(n,"collectionParents")}function Vm(n){return vr(n,"indexEntries")}function Bm(n){return vr(n,"indexConfiguration")}function Um(n){return vr(n,"indexState")}const Vc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bc(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const v=r.Wt({range:d},(A,M,F)=>(m++,F.delete()));u.push(v.next(()=>{At(1===m)}));const w=[];for(const A of t.mutations){const M=Ew(e,A.key.path,t.batchId);u.push(i.delete(M)),w.push(A.key)}return pe.waitFor(u).next(()=>w)}function t0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class jm{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new jm(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uc(e).Wt({index:"userMutationsIndex",range:r},(i,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=jc(e),d=Uc(e);return d.add({}).next(m=>{At("number"==typeof m);const v=new Dp(m,t,r,i),w=function(F,B,J){const ue=J.baseMutations.map(et=>vh(F.Jt,et)),Re=J.mutations.map(et=>vh(F.Jt,et));return{userId:B,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:ue,mutations:Re}}(this.M,this.userId,v),A=[];let M=new Cn((F,B)=>qt(F.canonicalString(),B.canonicalString()));for(const F of i){const B=Ew(this.userId,F.key.path,m);M=M.add(F.key.path.popLast()),A.push(d.put(w)),A.push(u.put(B,Cw))}return M.forEach(F=>{A.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.hn[m]=v.keys()}),pe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Uc(e).get(t).next(r=>r?(At(r.userId===this.userId),wh(this.M,r)):null)}ln(e,t){return this.hn[t]?pe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Uc(e).Wt({index:"userMutationsIndex",range:i},(d,m,v)=>{m.userId===this.userId&&(At(m.batchId>=r),u=wh(this.M,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Uc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uc(e).qt("userMutationsIndex",t).next(r=>r.map(i=>wh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ya(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return jc(e).Wt({range:i},(d,m,v)=>{const[w,A,M]=d,F=Vo(A);if(w===this.userId&&t.path.isEqual(F))return Uc(e).get(M).next(B=>{if(!B)throw st();At(B.userId===this.userId),u.push(wh(this.M,B))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(qt);const i=[];return t.forEach(u=>{const d=Ya(this.userId,u.path),m=IDBKeyRange.lowerBound(d),v=jc(e).Wt({range:m},(w,A,M)=>{const[F,B,J]=w,ue=Vo(B);F===this.userId&&u.path.isEqual(ue)?r=r.add(J):M.done()});i.push(v)}),pe.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Ya(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Cn(qt);return jc(e).Wt({range:d},(v,w,A)=>{const[M,F,B]=v,J=Vo(F);M===this.userId&&r.isPrefixOf(J)?J.length===i&&(m=m.add(B)):A.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Uc(e).get(u).next(d=>{if(null===d)throw st();At(d.userId===this.userId),r.push(wh(this.M,d))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Bc(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return jc(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const v=Vo(u[1]);i.push(v)}else m.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return zw(e,this.userId,t)}_n(e){return rI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zw(n,e,t){const r=Ya(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return jc(n).Wt({range:u,jt:!0},(m,v,w)=>{const[A,M,F]=m;A===e&&M===i&&(d=!0),w.done()}).next(()=>d)}function Uc(n){return vr(n,"mutations")}function jc(n){return vr(n,"documentMutations")}function rI(n){return vr(n,"mutationQueues")}class cl{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new cl(0)}static gn(){return new cl(-1)}}class n0{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new cl(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Ct.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mh(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Mh(e).Wt((d,m)=>{const v=Eh(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,u.push(this.removeTargetData(e,v)))}).next(()=>pe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Mh(e).Wt((r,i)=>{const u=Eh(i);t(u)})}yn(e){return r0(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}pn(e,t){return r0(e).put("targetGlobalKey",t)}In(e,t){return Mh(e).put(eI(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Mh(e).Wt({range:i,index:"queryTargetsIndex"},(d,m,v)=>{const w=Eh(m);op(t,w.target)&&(u=w,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Qa(e);return t.forEach(d=>{const m=Zr(d.path);i.push(u.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,d))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qa(e);return pe.forEach(t,u=>{const d=Zr(u.path);return pe.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Qa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qa(e);let u=sn();return i.Wt({range:r,jt:!0},(d,m,v)=>{const w=Vo(d[1]),A=new Ge(w);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Zr(t.path),i=IDBKeyRange.bound([r],[YD(r)],!1,!0);let u=0;return Qa(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,m],v,w)=>{0!==d&&(u++,w.done())}).next(()=>u>0)}Et(e,t){return Mh(e).get(t).next(r=>r?Eh(r):null)}}function Mh(n){return vr(n,"targets")}function r0(n){return vr(n,"targetGlobal")}function Qa(n){return vr(n,"targetDocuments")}function dl(n){return s0.apply(this,arguments)}function s0(){return s0=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Mw)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),s0.apply(this,arguments)}function qw([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class iI{constructor(e){this.En=e,this.buffer=new Cn(qw),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){al(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield dl(i)}yield t.vn(e)}))}}class oI{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(rs.A);const r=new iI(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Vc)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vc):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,u,d,m,v,w;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,d=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(w=Date.now(),fm()<=Hu.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${i} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${M} documents in `+(w-v)+`ms\nTotal Duration: ${w-A}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class aI{constructor(e,t){this.db=e,this.garbageCollector=new oI(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return hl(e,r)}removeReference(e,t,r){return hl(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hl(e,t)}Mn(e,t){return function(r,i){let u=!1;return rI(r).zt(d=>zw(r,d,i).next(m=>(m&&(u=!0),pe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.kn(e,(d,m)=>{if(m<=t){const v=this.Mn(e,d).next(w=>{if(!w)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Ct.min()),Qa(e).delete([0,Zr(d.path)])))});i.push(v)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hl(e,t)}kn(e,t){const r=Qa(e);let i,u=rs.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:v,sequenceNumber:w})=>{0===d?(u!==rs.A&&t(new Ge(Vo(i)),u),u=w,i=v):u=rs.A}).next(()=>{u!==rs.A&&t(new Ge(Vo(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hl(n,e){return Qa(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zr(e.path),sequenceNumber:r}));var r}class o0{constructor(){this.changes=new Is(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fl(e).put(r)}removeEntry(e,t,r){return fl(e).delete(function(i,u){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ep(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Vn.newInvalidDocument(t);return fl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Cp(t))},(i,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Vn.newInvalidDocument(t)};return fl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Cp(t))},(i,u)=>{r={document:this.Fn(t,u),size:t0(u)}}).next(()=>r)}getEntries(e,t){let r=lo();return this.Bn(e,t,(i,u)=>{const d=this.Fn(i,u);r=r.insert(i,d)}).next(()=>r)}Ln(e,t){let r=lo(),i=new yr(Ge.comparator);return this.Bn(e,t,(u,d)=>{const m=this.Fn(u,d);r=r.insert(u,m),i=i.insert(u,t0(d))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new Cn(Jw);t.forEach(v=>i=i.add(v));const u=IDBKeyRange.bound(Cp(i.first()),Cp(i.last())),d=i.getIterator();let m=d.getNext();return fl(e).Wt({index:"documentKeyIndex",range:u},(v,w,A)=>{const M=Ge.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;m&&Jw(m,M)<0;)r(m,null),m=d.getNext();m&&m.isEqual(M)&&(r(m,w),m=d.hasNext()?d.getNext():null),m?A.Ut(Cp(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).qt(IDBKeyRange.bound(i,u,!0)).next(d=>{let m=lo();for(const v of d){const w=this.Fn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(w.key,w)}return m})}getAllFromCollectionGroup(e,t,r,i){let u=lo();const d=Yw(t,r),m=Yw(t,Za.max());return fl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(v,w,A)=>{const M=this.Fn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(M.key,M),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new Kw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return a0(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}On(e,t){return a0(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function Jv(n,e){let t;if(e.document)t=Gv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=ll(e.noDocument.readTime);t=Vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ge.fromSegments(e.unknownDocument.path),i=ll(e.unknownDocument.version);t=Vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qn(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Vn.newInvalidDocument(e)}}class Kw extends o0{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Is(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Cn((u,d)=>qt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const v=Pw(this.qn.M,d);i=i.add(u.path.popLast()),r+=t0(v)-m.size,t.push(this.qn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=Pw(this.qn.M,d.convertToNoDocument(Ct.min()));t.push(this.qn.addEntry(e,u,v))}}),i.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function a0(n){return vr(n,"remoteDocumentGlobal")}function fl(n){return vr(n,"remoteDocumentsV14")}function Cp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yw(n,e){const t=e.documentKey.path.toArray();return[n,Ep(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Jw(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ge.comparator(n,e)}class uI{constructor(e){this.M=e}kt(e,t,r,i){const u=new Pm("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ww,{unique:!0}),m.createObjectStore("documentMutations"),Qw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Qw(e)),d=d.next(()=>function(m){const v=m.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",w)}(u))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(m,v){return v.store("mutations").qt().next(w=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ww,{unique:!0});const A=v.store("mutations"),M=w.map(F=>A.put(F));return pe.waitFor(M)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Kn(u))),r<6&&i>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&i>=7&&(d=d.next(()=>this.jn(u))),r<8&&i>=8&&(d=d.next(()=>this.Wn(e,u))),r<9&&i>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(d=d.next(()=>this.zn(u))),r<11&&i>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:KC});v.createIndex("collectionPathOverlayIndex",qv,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",YC,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:HC});v.createIndex("documentKeyIndex",Iw),v.createIndex("collectionGroupIndex",$C)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Aw}).createIndex("sequenceNumberIndex",Nw,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:qC}).createIndex("documentKeyIndex",ZC,{unique:!1})}(e)})),d}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=t0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>pe.forEach(i,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>pe.forEach(m,v=>{At(v.userId===u.userId);const w=wh(this.M,v);return Bc(e,u.userId,w).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((d,m)=>{const v=new Jt(d),w=[0,Zr(v)];u.push(t.get(w).next(A=>A?pe.resolve():t.put({targetId:0,path:Zr(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:zC});const r=t.store("collectionParents"),i=new Xv,u=d=>{if(i.add(d)){const m=d.lastSegment(),v=d.popLast();return r.put({collectionId:m,parent:Zr(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const v=new Jt(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,v],w)=>{const A=Vo(m);return u(A.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=Eh(i),d=eI(this.M,u);return t.put(d)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),v=(w=d,w.document?new Ge(Jt.fromString(w.document.name).popFirst(5)):w.noDocument?Ge.fromSegments(w.noDocument.path):w.unknownDocument?Ge.fromSegments(w.unknownDocument.path):st()).path.toArray();var w;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(m.put(A))}).next(()=>pe.waitFor(i))}}function Qw(n){n.createObjectStore("targetDocuments",{keyPath:WC}).createIndex("documentTargetsIndex",zv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tw,{unique:!0}),n.createObjectStore("targetGlobal")}const u0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class l0{constructor(e,t,r,i,u,d,m,v,w,A,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=d,this.document=m,this.Yn=w,this.Xn=A,this.Zn=M,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=F=>Promise.resolve(),!l0.vt())throw new Me(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aI(this,i),this.cs=t+"main",this.M=new kw(v),this.hs=new Bo(this.cs,this.Zn,new uI(this.M)),this.ls=new n0(this.referenceDelegate,this.M),this.fs=new Zw(this.M),this.ds=new Ih,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===A&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,u0);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new rs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(al(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Xa(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Ps(e){return Gm(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vr(r,"clientMetadata");return i.qt().next(u=>{const d=e.Ss(u,18e5),m=u.filter(v=>-1===d.indexOf(v));return pe.forEach(m,v=>i.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?pe.resolve(!0):Xa(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,u0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gm(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,m=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ow(t,rs.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Gm(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return jm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new e0(e)}getDocumentOverlayCache(e){return Vw.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(d=this.Zn)?QC:13===d?Sw:12===d?JC:11===d?Zv:void st();var d;let m;return this.hs.runTransaction(e,i,u,v=>(m=new Ow(v,this.ts?this.ts.next():rs.A),"readwrite-primary"===t?this.Ts(m).next(w=>!!w||this.Es(m)).next(w=>{if(!w)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Me(ce.FAILED_PRECONDITION,Mw);return r(m)}).next(w=>this.Rs(m).next(()=>w)):this.Fs(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Fs(e){return Xa(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ce.FAILED_PRECONDITION,u0)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xa(e).put("owner",t)}static vt(){return Bo.vt()}As(e){const t=Xa(e);return t.get("owner").next(r=>this.bs(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,zt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xa(n){return vr(n,"owner")}function Gm(n){return vr(n,"clientMetadata")}function Ip(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ya{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Dv(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ge(t)).next(r=>{let i=Pv();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let u=Pv();return this.indexManager.getCollectionParents(e,i).next(d=>pe.forEach(d,m=>{const v=(w=t,A=m.child(i),new Ka(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,A;return this.Ws(e,v,r).next(w=>{w.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const v=m.key;let w=i.get(v);null==w&&(w=Vn.newInvalidDocument(v),i=i.insert(v,w)),Av(m,w,d.localWriteTime),w.isFoundDocument()||(i=i.remove(v))}}).next(()=>(i.forEach((u,d)=>{cp(t,d)||(i=i.remove(u))}),i))}}class c0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=sn(),i=sn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new c0(e,t.fromCache,r,i)}}class Hm{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ct.min())?this.Zs(e,t):this.Xs.qs(e,i).next(u=>{const d=this.ti(t,u);return(hh(t)||il(t))&&this.ei(t.limitType,d,i,r)?this.Zs(e,t):(fm()<=Hu.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tm(t)),this.Xs.Ks(e,t,mv(r,-1)).next(m=>(d.forEach(v=>{m=m.insert(v.key,v)}),m)))});var u}ti(e,t){let r=new Cn(Ev(e));return t.forEach((i,u)=>{cp(e,u)&&(r=r.add(u))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Zs(e,t){return fm()<=Hu.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Tm(t)),this.Xs.Ks(e,t,Za.min())}}class Tp{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new yr(qt),this.ii=new Is(u=>rl(u),op),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new ya(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Xw(n,e,t,r){return new Tp(n,e,t,r)}function e1(n,e){return d0.apply(this,arguments)}function d0(){return d0=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(u=>(i=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let v=sn();for(const w of i){d.push(w.batchId);for(const A of w.mutations)v=v.add(A.key)}for(const w of u){m.push(w.batchId);for(const A of w.mutations)v=v.add(A.key)}return t.ai.qs(r,v).next(w=>({ci:w,removedBatchIds:d,addedBatchIds:m}))})})}),d0.apply(this,arguments)}function $m(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(d,m,v,w){const A=v.batch,M=A.keys();let F=pe.resolve();return M.forEach(B=>{F=F.next(()=>w.getEntry(m,B)).next(J=>{const ue=v.docVersions.get(B);At(null!==ue),J.version.compareTo(ue)<0&&(A.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),w.addEntry(J)))})}),F.next(()=>d.$s.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function Ap(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function lI(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const m=[];e.targetChanges.forEach((w,A)=>{const M=i.get(A);if(!M)return;m.push(t.ls.removeMatchingKeys(u,w.removedDocuments,A).next(()=>t.ls.addMatchingKeys(u,w.addedDocuments,A)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,J,ue;e.targetMismatches.has(A)?F=F.withResumeToken(or.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):w.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(w.resumeToken,r)),i=i.insert(A,F),J=F,ue=w,(0===(B=M).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(u,F))});let v=lo();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))}),m.push(t1(u,d,e.documentUpdates).next(w=>{v=w})),!r.isEqual(Ct.min())){const w=t.ls.getLastRemoteSnapshotVersion(u).next(A=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(w)}return pe.waitFor(m).next(()=>d.apply(u)).next(()=>t.ai.Gs(u,v)).next(()=>v)}).then(u=>(t.si=i,u))}function t1(n,e,t){let r=sn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=lo();return t.forEach((d,m)=>{const v=i.get(d);m.isNoDocument()&&m.version.isEqual(Ct.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Le("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",m.version)}),u})}function n1(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Gc(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(u=>u?(i=u,pe.resolve(i)):t.ls.allocateTargetId(r).next(d=>(i=new ul(e,d,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function pl(n,e,t){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!al(d))throw d;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),Wm.apply(this,arguments)}function zm(n,e,t){const r=qe(n);let i=Ct.min(),u=sn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,v,w){const A=qe(m),M=A.ii.get(w);return void 0!==M?pe.resolve(A.si.get(M)):A.ls.getTargetData(v,w)}(r,d,Cs(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(d,m.targetId).next(v=>{u=v})}).next(()=>r.ni.Ks(d,e,t?i:Ct.min(),t?u:sn())).next(m=>(qm(r,dp(e),m),{documents:m,hi:u})))}function r1(n,e){const t=qe(n),r=qe(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function cI(n,e){const t=qe(n),r=t.ri.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,mv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(qm(t,e,i),i))}function qm(n,e,t){let r=Ct.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function Zm(){return Zm=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);let u=sn(),d=lo();for(const w of t){const A=e.li(w.metadata.name);w.document&&(u=u.add(A));const M=e.fi(w);M.setReadTime(e.di(w.metadata.readTime)),d=d.insert(A,M)}const m=i.oi.newChangeBuffer({trackRemovals:!0}),v=yield Gc(i,(w=r,Cs(dh(Jt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>t1(w,m,d).next(A=>(m.apply(w),A)).next(A=>i.ls.removeMatchingKeysForTargetId(w,v.targetId).next(()=>i.ls.addMatchingKeys(w,u,v.targetId)).next(()=>i.ai.Gs(w,A)).next(()=>A)))}),Zm.apply(this,arguments)}function f0(n,e){return Np.apply(this,arguments)}function Np(){return Np=(0,ve.Z)(function*(n,e,t=sn()){const r=yield Gc(n,Cs(Qv(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const d=Pr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.ds.saveNamedQuery(u,e);const m=r.withResumeToken(or.EMPTY_BYTE_STRING,d);return i.si=i.si.insert(m.targetId,m),i.ls.updateTargetData(u,m).next(()=>i.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.ls.addMatchingKeys(u,t,r.targetId)).next(()=>i.ds.saveNamedQuery(u,e))})}),Np.apply(this,arguments)}class dI{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return pe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Qv(r.bundledQuery),readTime:Pr(r.readTime)}),pe.resolve();var r}}class hI{constructor(){this.overlays=new yr(Ge.comparator),this.mi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=ol(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const v=m.getNext().value,w=v.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&v.largestBatchId>r&&i.set(v.getKey(),v)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new yr((w,A)=>w-A);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let A=u.get(w.largestBatchId);null===A&&(A=ol(),u=u.insert(w.largestBatchId,A)),A.set(w.getKey(),w)}}const m=ol(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((w,A)=>m.set(w,A)),!(m.size()>=i)););return pe.resolve(m)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new wp(t,r));let u=this.mi.get(t);void 0===u&&(u=sn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class p0{constructor(){this.gi=new Cn(Kr.yi),this.pi=new Cn(Kr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Kr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Kr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ge(new Jt([])),r=new Kr(t,e),i=new Kr(t,e+1),u=[];return this.pi.forEachInRange([r,i],d=>{this.Ei(d),u.push(d.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ge(new Jt([])),r=new Kr(t,e),i=new Kr(t,e+1);let u=sn();return this.pi.forEachInRange([r,i],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Kr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ge.comparator(e.key,t.key)||qt(e.Vi,t.Vi)}static Ii(e,t){return qt(e.Vi,t.Vi)||Ge.comparator(e.key,t.key)}}class i1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Cn(Kr.yi)}checkEmpty(e){return pe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const u=this.vi;this.vi++;const d=new Dp(u,t,r,i);this.$s.push(d);for(const m of i)this.Si=this.Si.add(new Kr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return pe.resolve(d)}lookupMutationBatch(e,t){return pe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),u=i<0?0:i;return pe.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return pe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kr(t,0),i=new Kr(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,i],d=>{const m=this.Di(d.Vi);u.push(m)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(qt);return t.forEach(i=>{const u=new Kr(i,0),d=new Kr(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,d],m=>{r=r.add(m.Vi)})}),pe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new Kr(new Ge(u),0);let m=new Cn(qt);return this.Si.forEachWhile(v=>{const w=v.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(m=m.add(v.Vi)),!0)},d),pe.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return pe.forEach(t.mutations,i=>{const u=new Kr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Kr(t,0),i=this.Si.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class g0{constructor(e){this.ki=e,this.docs=new yr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,d=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=lo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Vn.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=lo();const u=new Ge(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||QD(EC(v),r)<=0||(i=i.insert(v.key,v.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}Mi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s1(this)}getSize(e){return pe.resolve(this.size)}}class s1 extends o0{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class o1{constructor(e){this.persistence=e,this.Oi=new Is(t=>rl(t),op),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Fi=0,this.$i=new p0,this.targetCount=0,this.Bi=cl.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),pe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.In(t),pe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Oi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),pe.waitFor(u).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(d=>{u.push(i.markPotentiallyOrphaned(e,d))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.$i.containsKey(t))}}class a1{constructor(e,t){this.Li={},this.overlays={},this.ts=new rs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new o1(this),this.indexManager=new $w,this.fs=new g0(r=>this.referenceDelegate.Ui(r)),this.M=new kw(t),this.ds=new dI(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new i1(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new u1(this.ts.next());return this.referenceDelegate.qi(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ki(e,t){return pe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class u1 extends xw{constructor(e){super(),this.currentSequenceNumber=e}}class m0{constructor(e){this.persistence=e,this.Qi=new p0,this.ji=null}static Wi(e){return new m0(e)}get zi(){if(this.ji)return this.ji;throw st()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.zi,r=>{const i=Ge.fromPath(r);return this.Hi(e,i).next(u=>{u||t.removeEntry(i,Ct.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return pe.or([()=>pe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function _0(n,e){return`firestore_clients_${n}_${e}`}function y0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function v0(n,e){return`firestore_targets_${n}_${e}`}class Sp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let u,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(u=new Me(i.error.code,i.error.message))),d?new Sp(e,t,i.state,u):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Me(r.error.code,r.error.message))),u?new xh(e,r.state,i):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yr{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Fv();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=_m(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return i?new Yr(e,u):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gl{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gl(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class b0{constructor(){this.activeTargetIds=Fv()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D0{constructor(e,t,r,i,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new yr(qt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=_0(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new b0),this.ar=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const u=e.getItem(_0(e.persistenceKey,i));if(u){const d=Yr.Ji(i,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(v0(this.persistenceKey,e));if(r){const i=xh.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(v0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(u){let d=rs.A;if(null!=u)try{const m=JSON.parse(u);At("number"==typeof m),d=m}catch(m){Or("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);i!==rs.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new Sp(this.currentUser,e,t,r),u=y0(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Yi())}pr(e){const t=y0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=v0(this.persistenceKey,e),u=new xh(e,t,r);this.setItem(i,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Yr.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return Sp.Ji(new ii(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return xh.Ji(i,t)}wr(e){return gl.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),u=this.gr(r),d=[],m=[];return u.forEach(v=>{i.has(v)||d.push(v)}),i.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Or(d,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Fv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class fI{constructor(){this.Fr=new b0,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new b0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mp{Br(e){}shutdown(){}}class l1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const w0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class pI{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class c1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,u){const d=this.oo(e,t);Le("RestConnection","Sending: ",d,r);const m={};return this.uo(m,i,u),this.ao(e,d,m,r).then(v=>(Le("RestConnection","Received: ",v),v),v=>{throw ep("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}co(e,t,r,i,u){return this.ro(e,t,r,i,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ac,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}oo(e,t){return`${this.so}/v1/${t}:${w0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((u,d)=>{const m=new zD;m.listenOnce(WD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case hm.NO_ERROR:const w=m.getResponseJson();Le("Connection","XHR received:",JSON.stringify(w)),u(w);break;case hm.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),d(new Me(ce.DEADLINE_EXCEEDED,"Request time out"));break;case hm.HTTP_ERROR:const A=m.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const J=B.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(J)>=0?J:ce.UNKNOWN}(M.status);d(new Me(F,M.message))}else d(new Me(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(i);m.send(t,"POST",v,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=HD(),d=$D(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new pC({})),this.uo(m.initMessageHeaders,t,r),(0,zt.uI)()||(0,zt.b$)()||(0,zt.d)()||(0,zt.w1)()||(0,zt.Mn)()||(0,zt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=i.join("");Le("Connection","Creating WebChannel: "+v,m);const w=u.createWebChannel(v,m);let A=!1,M=!1;const F=new pI({jr:J=>{M?Le("Connection","Not sending because WebChannel is closed:",J):(A||(Le("Connection","Opening WebChannel transport."),w.open(),A=!0),Le("Connection","WebChannel sending:",J),w.send(J))},Wr:()=>w.close()}),B=(J,ue,Re)=>{J.listen(ue,et=>{try{Re(et)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return B(w,Xf.EventType.OPEN,()=>{M||Le("Connection","WebChannel transport opened.")}),B(w,Xf.EventType.CLOSE,()=>{M||(M=!0,Le("Connection","WebChannel transport closed"),F.eo())}),B(w,Xf.EventType.ERROR,J=>{M||(M=!0,ep("Connection","WebChannel transport errored:",J),F.eo(new Me(ce.UNAVAILABLE,"The operation could not be completed")))}),B(w,Xf.EventType.MESSAGE,J=>{var ue;if(!M){const Re=J.data[0];At(!!Re);const et=Re,Fe=et.error||(null===(ue=et[0])||void 0===ue?void 0:ue.error);if(Fe){Le("Connection","WebChannel received error:",Fe);const mt=Fe.status;let $e=function(Qe){const Kt=ar[Qe];if(void 0!==Kt)return fw(Kt)}(mt),Je=Fe.message;void 0===$e&&($e=ce.INTERNAL,Je="Unknown error status: "+mt+" with message "+Fe.message),M=!0,F.eo(new Me($e,Je)),w.close()}else Le("Connection","WebChannel received:",Re),F.no(Re)}}),B(d,fC.STAT_EVENT,J=>{J.stat===rv.PROXY?Le("Connection","Detected buffering proxy"):J.stat===rv.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.Zr()},0),F}}function d1(){return"undefined"!=typeof window?window:null}function Km(){return"undefined"!=typeof document?document:null}function Hc(n){return new OC(n,!0)}class Ym{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class E0{constructor(e,t,r,i,u,d,m,v){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Ym(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Me(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jm extends E0{constructor(e,t,r,i,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function kC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:st(),i=e.targetChange.targetIds||[],u=function(v,w){return v.N?(At(void 0===w||"string"==typeof w),or.fromBase64String(w||"")):(At(void 0===w||w instanceof Uint8Array),or.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const w=void 0===v.code?ce.UNKNOWN:fw(v.code);return new Me(w,v.message||"")}(d);t=new Vv(r,i,u,m||null)}else if("documentChange"in e){const r=e.documentChange,i=is(n,r.document.name),u=Pr(r.document.updateTime),d=new oi({mapValue:{fields:r.document.fields}}),m=Vn.newFoundDocument(i,u,d);t=new xm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=is(n,r.document),u=r.readTime?Pr(r.readTime):Ct.min(),d=Vn.newNoDocument(i,u);t=new xm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=is(n,r.document);t=new xm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new Ov(r.count||0);t=new Lv(r.targetId,u)}}var v;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Ct.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?Pr(u.readTime):Ct.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=vp(this.M),t.addTarget=function(i,u){let d;const m=u.target;return d=Em(m)?{documents:FC(i,m)}:{query:LC(i,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=_w(i,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(d.readTime=_p(i,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function xA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=vp(this.M),t.removeTarget=e,this.Oo(t)}}class C0 extends E0{constructor(e,t,r,i,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function PC(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let u=Pr(r.updateTime?r.updateTime:i);return u.isEqual(Ct.min())&&(u=Pr(i)),new AC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.Jo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=vp(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vh(this.M,r))};this.Oo(t)}}class RA extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ro(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ce.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ce.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class h1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Or(t),this.su=!1):Le("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class gI{constructor(e,t,r,i,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var v;eu(d)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ve.Z)(function*(w){const A=qe(w);A.lu.add(4),yield $c(A),A._u.set("Unknown"),A.lu.delete(4),yield Rh(A)}),function(w){return v.apply(this,arguments)})(d))}))}),this._u=new h1(r,i)}}function Rh(n){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,ve.Z)(function*(n){if(eu(n))for(const e of n.fu)yield e(!0)}),Oh.apply(this,arguments)}function $c(n){return I0.apply(this,arguments)}function I0(){return I0=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),I0.apply(this,arguments)}function kh(n,e){const t=qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Qm(t)?T0(t):qc(t).Co()&&f1(t,e))}function Wc(n,e){const t=qe(n),r=qc(t);t.hu.delete(e),r.Co()&&p1(t,e),0===t.hu.size&&(r.Co()?r.ko():eu(t)&&t._u.set("Unknown"))}function f1(n,e){n.wu.Z(e.targetId),qc(n).Qo(e)}function p1(n,e){n.wu.Z(e),qc(n).jo(e)}function T0(n){n.wu=new pw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),qc(n).start(),n._u.iu()}function Qm(n){return eu(n)&&!qc(n).Do()&&n.hu.size>0}function eu(n){return 0===qe(n).lu.size}function g1(n){n.wu=void 0}function m1(n){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{f1(n,e)})}),Xm.apply(this,arguments)}function mI(n,e){return A0.apply(this,arguments)}function A0(){return A0=(0,ve.Z)(function*(n,e){g1(n),Qm(n)?(n._u.uu(e),T0(n)):n._u.set("Unknown")}),A0.apply(this,arguments)}function _1(n,e,t){return N0.apply(this,arguments)}function N0(){return N0=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Vv&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,u){const d=u.cause;for(const m of u.targetIds)i.hu.has(m)&&(yield i.remoteSyncer.rejectListen(m,d),i.hu.delete(m),i.wu.removeTarget(m))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xp(n,r)}else if(e instanceof xm?n.wu.ut(e):e instanceof Lv?n.wu._t(e):n.wu.ht(e),!t.isEqual(Ct.min()))try{const r=yield Ap(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const d=i.wu.yt(u);return d.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=i.hu.get(v);w&&i.hu.set(v,w.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const v=i.hu.get(m);if(!v)return;i.hu.set(m,v.withResumeToken(or.EMPTY_BYTE_STRING,v.snapshotVersion)),p1(i,m);const w=new ul(v.target,m,1,v.sequenceNumber);f1(i,w)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield xp(n,r)}var r}),N0.apply(this,arguments)}function xp(n,e,t){return e_.apply(this,arguments)}function e_(){return e_=(0,ve.Z)(function*(n,e,t){if(!al(e))throw e;n.lu.add(1),yield $c(n),n._u.set("Offline"),t||(t=()=>Ap(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Rh(n)}))}),e_.apply(this,arguments)}function S0(n,e){return e().catch(t=>xp(n,t,e))}function zc(n){return M0.apply(this,arguments)}function M0(){return M0=(0,ve.Z)(function*(n){const e=qe(n),t=Zc(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;_I(e);)try{const i=yield n1(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,OA(e,i)}catch(i){yield xp(e,i)}x0(e)&&yI(e)}),M0.apply(this,arguments)}function _I(n){return eu(n)&&n.cu.length<10}function OA(n,e){n.cu.push(e);const t=Zc(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function x0(n){return eu(n)&&!Zc(n).Do()&&n.cu.length>0}function yI(n){Zc(n).start()}function kA(n){return y1.apply(this,arguments)}function y1(){return y1=(0,ve.Z)(function*(n){Zc(n).Xo()}),y1.apply(this,arguments)}function PA(n){return v1.apply(this,arguments)}function v1(){return v1=(0,ve.Z)(function*(n){const e=Zc(n);for(const t of n.cu)e.Ho(t.mutations)}),v1.apply(this,arguments)}function FA(n,e,t){return b1.apply(this,arguments)}function b1(){return b1=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),i=Fm.from(r,e,t);yield S0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zc(n)}),b1.apply(this,arguments)}function LA(n,e){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,ve.Z)(function*(n,e){var t;e&&Zc(n).zo&&(yield(t=(0,ve.Z)(function*(r,i){if(hw(u=i.code)&&u!==ce.ABORTED){const d=r.cu.shift();Zc(r).No(),yield S0(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield zc(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),x0(n)&&yI(n)}),Ph.apply(this,arguments)}function vI(n,e){return t_.apply(this,arguments)}function t_(){return t_=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=eu(t);t.lu.add(3),yield $c(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Rh(t)}),t_.apply(this,arguments)}function Rp(n,e){return n_.apply(this,arguments)}function n_(){return n_=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t.lu.delete(2),yield Rh(t)):e||(t.lu.add(2),yield $c(t),t._u.set("Unknown"))}),n_.apply(this,arguments)}function qc(n){return n.mu||(n.mu=function(e,t,r){const i=qe(e);return i.tu(),new Jm(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:m1.bind(null,n),Jr:mI.bind(null,n),Ko:_1.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),Qm(n)?T0(n):n._u.set("Unknown")):(yield n.mu.stop(),g1(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Zc(n){return n.gu||(n.gu=function(e,t,r){const i=qe(e);return i.tu(),new C0(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:kA.bind(null,n),Jr:LA.bind(null,n),Yo:PA.bind(null,n),Jo:FA.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield zc(n)):(yield n.gu.stop(),n.cu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Op{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,u){const d=Date.now()+r,m=new Op(e,t,d,i,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kc(n,e){if(Or("AsyncQueue",`${e}: ${n}`),al(n))return new Me(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Yc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Pv(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new Yc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class R0{constructor(){this.yu=new yr(Ge.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):st():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class kp{constructor(e,t,r,i,u,d,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new kp(e,t,Yc.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class D1{constructor(){this.Iu=void 0,this.listeners=[]}}class bI{constructor(){this.queries=new Is(e=>wv(e),lp),this.onlineState="Unknown",this.Tu=new Set}}function Pp(n,e){return O0.apply(this,arguments)}function O0(){return O0=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new D1),i)try{u.Iu=yield t.onListen(r)}catch(d){const m=Kc(d,`Initialization of query '${Tm(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&k0(t)}),O0.apply(this,arguments)}function w1(n,e){return E1.apply(this,arguments)}function E1(){return E1=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),E1.apply(this,arguments)}function VA(n,e){const t=qe(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const m of d.listeners)m.Au(i)&&(r=!0);d.Iu=i}}r&&k0(t)}function DI(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function k0(n){n.Tu.forEach(e=>{e.next()})}class P0{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new kp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=kp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class BA{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class C1{constructor(e){this.M=e}li(e){return is(this.M,e)}fi(e){return e.metadata.exists?Gv(this.M,e.document,!1):Vn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Pr(e)}}class F0{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=I1(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new C1(this.M);for(const i of e)if(i.metadata.queries){const u=r.li(i.metadata.name);for(const d of i.metadata.queries){const m=(t.get(d)||sn()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function h0(n,e,t,r){return Zm.apply(this,arguments)}(e.localStore,new C1(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield f0(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function I1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class co{constructor(e){this.key=e}}class T1{constructor(e){this.key=e}}class r_{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=sn(),this.mutatedKeys=sn(),this.Lu=Ev(e),this.Uu=new Yc(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new R0,i=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=i,m=!1;const v=hh(this.query)&&i.size===this.query.limit?i.last():null,w=il(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,M)=>{const F=i.get(A),B=cp(this.query,M)?M:null,J=!!F&&this.mutatedKeys.has(F.key),ue=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Re=!1;F&&B?F.data.isEqual(B.data)?J!==ue&&(r.track({type:3,doc:B}),Re=!0):this.Qu(F,B)||(r.track({type:2,doc:B}),Re=!0,(v&&this.Lu(B,v)>0||w&&this.Lu(B,w)<0)&&(m=!0)):!F&&B?(r.track({type:0,doc:B}),Re=!0):F&&!B&&(r.track({type:1,doc:F}),Re=!0,(v||w)&&(m=!0)),Re&&(B?(d=d.add(B),u=ue?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),hh(this.query)||il(this.query))for(;d.size>this.query.limit;){const A=hh(this.query)?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Uu:d,Ku:r,ei:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((w,A)=>function(M,F){const B=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return B(M)-B(F)}(w.type,A.type)||this.Lu(w.doc,A.doc)),this.ju(r);const d=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,v=m!==this.$u;return this.$u=m,0!==u.length||v?{snapshot:new kp(this.query,e.Uu,i,u,e.mutatedKeys,0===m,v,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new R0,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=sn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new T1(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new co(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=sn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return kp.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class wI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EI{constructor(e){this.key=e,this.Xu=!1}}class L0{constructor(e,t,r,i,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.ta=new Is(m=>wv(m),lp),this.ea=new Map,this.na=new Set,this.sa=new yr(Ge.comparator),this.ia=new Map,this.ra=new p0,this.oa={},this.ua=new Map,this.aa=cl.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function A1(n,e){return i_.apply(this,arguments)}function i_(){return i_=(0,ve.Z)(function*(n,e){const t=nu(n);let r,i;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Yu();else{const d=yield Gc(t.localStore,Cs(e));t.isPrimaryClient&&kh(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield V0(t,e,r,"current"===m)}return i}),i_.apply(this,arguments)}function V0(n,e,t,r){return s_.apply(this,arguments)}function s_(){return s_=(0,ve.Z)(function*(n,e,t,r){n.ha=(A,M,F)=>{return(B=(0,ve.Z)(function*(J,ue,Re,et){let Fe=ue.view.Gu(Re);Fe.ei&&(Fe=yield zm(J.localStore,ue.query,!1).then(({documents:Je})=>ue.view.Gu(Je,Fe)));const mt=et&&et.targetChanges.get(ue.targetId),$e=ue.view.applyChanges(Fe,J.isPrimaryClient,mt);return Lp(J,ue.targetId,$e.zu),$e.snapshot}),function(J,ue,Re,et){return B.apply(this,arguments)})(n,A,M,F);var B};const i=yield zm(n.localStore,e,!0),u=new r_(e,i.hi),d=u.Gu(i.documents),m=gp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(d,n.isPrimaryClient,m);Lp(n,t,v.zu);const w=new wI(e,t,u);return n.ta.set(e,w),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),v.snapshot}),s_.apply(this,arguments)}function N1(n,e){return B0.apply(this,arguments)}function B0(){return B0=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(u=>!lp(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield pl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Wc(t.remoteStore,r.targetId),Fh(t,r.targetId)}).catch(dl))):(Fh(t,r.targetId),yield pl(t.localStore,r.targetId,!0))}),B0.apply(this,arguments)}function Fp(){return Fp=(0,ve.Z)(function*(n,e,t){const r=f_(n);try{const i=yield function(u,d){const m=qe(u),v=Qn.now(),w=d.reduce((M,F)=>M.add(F.key),sn());let A;return m.persistence.runTransaction("Locally write mutations","readwrite",M=>m.ai.qs(M,w).next(F=>{A=F;const B=[];for(const J of d){const ue=SC(J,A.get(J.key));null!=ue&&B.push(new sl(J.key,ue,pv(ue.value.mapValue),_r.exists(!0)))}return m.$s.addMutationBatch(M,v,B,d)})).then(M=>(M.applyToLocalDocumentSet(A),{batchId:M.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,d,m){let v=u.oa[u.currentUser.toKey()];v||(v=new yr(qt)),v=v.insert(d,m),u.oa[u.currentUser.toKey()]=v}(r,i.batchId,t),yield tu(r,i.changes),yield zc(r.remoteStore)}catch(i){const u=Kc(i,"Failed to persist write");t.reject(u)}}),Fp.apply(this,arguments)}function ho(n,e){return U0.apply(this,arguments)}function U0(){return U0=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield lI(t.localStore,e);e.targetChanges.forEach((i,u)=>{const d=t.ia.get(u);d&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Xu=!0:i.modifiedDocuments.size>0?At(d.Xu):i.removedDocuments.size>0&&(At(d.Xu),d.Xu=!1))}),yield tu(t,r,e)}catch(r){yield dl(r)}}),U0.apply(this,arguments)}function II(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((u,d)=>{const m=d.view.Eu(e);m.snapshot&&i.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let v=!1;m.queries.forEach((w,A)=>{for(const M of A.listeners)M.Eu(d)&&(v=!0)}),v&&k0(m)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TI(n,e,t){return o_.apply(this,arguments)}function o_(){return o_=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),u=i&&i.key;if(u){let d=new yr(Ge.comparator);d=d.insert(u,Vn.newNoDocument(u,Ct.min()));const m=sn().add(u),v=new yh(Ct.min(),new Map,new Cn(qt),d,m);yield ho(r,v),r.sa=r.sa.remove(u),r.ia.delete(e),l_(r)}else yield pl(r.localStore,e,!1).then(()=>Fh(r,e,t)).catch(dl)}),o_.apply(this,arguments)}function AI(n,e){return j0.apply(this,arguments)}function j0(){return j0=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield $m(t.localStore,e);H0(t,r,null),u_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tu(t,i)}catch(i){yield dl(i)}}),j0.apply(this,arguments)}function S1(n,e,t){return G0.apply(this,arguments)}function G0(){return G0=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return m.$s.lookupMutationBatch(v,d).next(A=>(At(null!==A),w=A.keys(),m.$s.removeMutationBatch(v,A))).next(()=>m.$s.performConsistencyCheck(v)).next(()=>m.ai.qs(v,w))})}(r.localStore,e);H0(r,e,t),u_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tu(r,i)}catch(i){yield dl(i)}}),G0.apply(this,arguments)}function a_(){return a_=(0,ve.Z)(function*(n,e){const t=qe(n);eu(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Kc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),a_.apply(this,arguments)}function u_(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function H0(n,e,t){const r=qe(n);let i=r.oa[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Fh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||$0(n,r)})}function $0(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Wc(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),l_(n))}function Lp(n,e,t){for(const r of t)r instanceof co?(n.ra.addReference(r.key,e),W0(n,r)):r instanceof T1?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||$0(n,r.key)):st()}function W0(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.na.add(r),l_(n))}function l_(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ge(Jt.fromString(e)),r=n.aa.next();n.ia.set(r,new EI(t)),n.sa=n.sa.insert(t,r),kh(n.remoteStore,new ul(Cs(dh(t.path)),r,2,rs.A))}}function tu(n,e,t){return c_.apply(this,arguments)}function c_(){return c_=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],d=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,v)=>{d.push(r.ha(v,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,w.fromCache?"not-current":"current"),i.push(w);const A=c0.Js(v.targetId,w);u.push(A)}}))}),yield Promise.all(d),r.Zu.Ko(i),yield(m=(0,ve.Z)(function*(v,w){const A=qe(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>pe.forEach(w,F=>pe.forEach(F.zs,B=>A.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>pe.forEach(F.Hs,B=>A.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!al(M))throw M;Le("LocalStore","Failed to update sequence numbers: "+M)}for(const M of w){const F=M.targetId;if(!M.fromCache){const B=A.si.get(F),ue=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);A.si=A.si.insert(F,ue)}}}),function(v,w){return m.apply(this,arguments)})(r.localStore,u))}),c_.apply(this,arguments)}function M1(n,e){return z0.apply(this,arguments)}function z0(){return z0=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield e1(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(d=>{d.forEach(m=>{m.reject(new Me(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tu(t,r.ci)}var i}),z0.apply(this,arguments)}function NI(n,e){const t=qe(n),r=t.ia.get(e);if(r&&r.Xu)return sn().add(r.key);{let i=sn();const u=t.ea.get(e);if(!u)return i;for(const d of u){const m=t.ta.get(d);i=i.unionWith(m.view.qu)}return i}}function jA(n,e){return x1.apply(this,arguments)}function x1(){return x1=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield zm(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Lp(t,e.targetId,i.zu),i}),x1.apply(this,arguments)}function R1(n,e){return q0.apply(this,arguments)}function q0(){return q0=(0,ve.Z)(function*(n,e){const t=qe(n);return cI(t.localStore,e).then(r=>tu(t,r))}),q0.apply(this,arguments)}function SI(n,e,t,r){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,ve.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(d,m){const v=qe(d),w=qe(v.$s);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>w.ln(A,m).next(M=>M?v.ai.qs(A,M):pe.resolve(null)))}(i.localStore,e);var m;null!==u?("pending"===t?yield zc(i.remoteStore):"acknowledged"===t||"rejected"===t?(H0(i,e,r||null),u_(i,e),m=e,qe(qe(i.localStore).$s).dn(m)):st(),yield tu(i,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),Z0.apply(this,arguments)}function O1(){return O1=(0,ve.Z)(function*(n,e){const t=qe(n);if(nu(t),f_(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield MI(t,r.toArray());t.ca=!0,yield Rp(t.remoteStore,!0);for(const u of i)kh(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Fh(t,d),pl(t.localStore,d,!0))),Wc(t.remoteStore,d)}),yield i,yield MI(t,r),function(u){const d=qe(u);d.ia.forEach((m,v)=>{Wc(d.remoteStore,v)}),d.ra.bi(),d.ia=new Map,d.sa=new yr(Ge.comparator)}(t),t.ca=!1,yield Rp(t.remoteStore,!1)}}),O1.apply(this,arguments)}function MI(n,e,t){return k1.apply(this,arguments)}function k1(){return k1=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const d of e){let m;const v=r.ea.get(d);if(v&&0!==v.length){m=yield Gc(r.localStore,Cs(v[0]));for(const w of v){const A=r.ta.get(w),M=yield jA(r,A);M.snapshot&&u.push(M.snapshot)}}else{const w=yield r1(r.localStore,d);m=yield Gc(r.localStore,w),yield V0(r,xI(w),d,!1)}i.push(m)}return r.Zu.Ko(u),i}),k1.apply(this,arguments)}function xI(n){return rw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function RI(n){const e=qe(n);return qe(qe(e.localStore).persistence).Os()}function d_(n,e,t,r){return K0.apply(this,arguments)}function K0(){return K0=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);if(i.ca)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=i.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield cI(i.localStore,dp(u[0])),m=yh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield tu(i,d,m);break}case"rejected":yield pl(i.localStore,e,!0),Fh(i,e,r);break;default:st()}}),K0.apply(this,arguments)}function OI(n,e,t){return h_.apply(this,arguments)}function h_(){return h_=(0,ve.Z)(function*(n,e,t){const r=nu(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const u=yield r1(r.localStore,i),d=yield Gc(r.localStore,u);yield V0(r,xI(u),d.targetId,!1),kh(r.remoteStore,d)}for(const i of t)r.ea.has(i)&&(yield pl(r.localStore,i,!1).then(()=>{Wc(r.remoteStore,i),Fh(r,i)}).catch(dl))}}),h_.apply(this,arguments)}function nu(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ho.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TI.bind(null,e),e.Zu.Ko=VA.bind(null,e.eventManager),e.Zu.la=DI.bind(null,e.eventManager),e}function f_(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S1.bind(null,e),e}class p_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Hc(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Xw(this.persistence,new Hm,e.initialUser,this.M)}_a(e){return new a1(m0.Wi,this.M)}da(e){return new fI}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class P1 extends p_{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield f_(r.ga.syncEngine),yield zc(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return Xw(this.persistence,new Hm,e.initialUser,this.M)}wa(e){return new sI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Ip(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new l0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,d1(),Km(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new fI}}class J0 extends P1{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof D0&&(r.sharedClientState.syncEngine={kr:SI.bind(null,i),Mr:d_.bind(null,i),Or:OI.bind(null,i),Os:RI.bind(null,i),Nr:R1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ve.Z)(function*(d){yield function GA(n,e){return O1.apply(this,arguments)}(r.ga.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}da(e){const t=d1();if(!D0.vt(t))throw new Me(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ip(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new D0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vp{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>II(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=M1.bind(null,r.syncEngine),yield Rp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bI}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),r=new c1(e.databaseInfo);return new RA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=m=>II(this.syncEngine,m,0),d=l1.vt()?new l1:new Mp,new gI(t,r,i,u,d);var t,r,i,u,d}createSyncEngine(e,t){return function(r,i,u,d,m,v,w){const A=new L0(r,i,u,d,m,v);return w&&(A.ca=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);Le("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield $c(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Bp(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HA{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new kr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new BA(JSON.parse(u),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $A{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(u,d){const m=qe(u),v=vp(m.M)+"/documents",w={documents:d.map(B=>yp(m.M,B))},A=yield m.co("BatchGetDocuments",v,w),M=new Map;A.forEach(B=>{const J=function bw(n,e){return"found"in e?function(t,r){At(!!r.found);const i=is(t,r.found.name),u=Pr(r.found.updateTime),d=new oi({mapValue:{fields:r.found.fields}});return Vn.newFoundDocument(i,u,d)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=is(t,r.missing),u=Pr(r.readTime);return Vn.newNoDocument(i,u)}(n,e):st()}(m.M,B);M.set(J.key.toString(),J)});const F=[];return d.forEach(B=>{const J=M.get(B.toString());At(!!J),F.push(J)}),F}),function(u,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new Sm(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(i,u){const d=qe(i),m=vp(d.M)+"/documents",v={writes:u.map(w=>vh(d.M,w))};yield d.ro("Commit",m,v)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Me(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WA{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Ym(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new $A(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ca(u)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!tl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!hw(t)}return!1}}class F1{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ii.UNAUTHENTICATED,this.clientId=KD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(m){Le("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Le("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Kc(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function L1(n,e){return X0.apply(this,arguments)}function X0(){return X0=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(u){r.isEqual(u)||(yield e1(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),X0.apply(this,arguments)}function V1(n,e){return eb.apply(this,arguments)}function eb(){return eb=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield g_(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>vI(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>vI(e.remoteStore,u)),n.onlineComponents=e}),eb.apply(this,arguments)}function g_(n){return m_.apply(this,arguments)}function m_(){return m_=(0,ve.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield L1(n,new p_)),n.offlineComponents}),m_.apply(this,arguments)}function Up(n){return tb.apply(this,arguments)}function tb(){return tb=(0,ve.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield V1(n,new Vp)),n.onlineComponents}),tb.apply(this,arguments)}function B1(n){return g_(n).then(e=>e.persistence)}function __(n){return g_(n).then(e=>e.localStore)}function y_(n){return Up(n).then(e=>e.remoteStore)}function U1(n){return Up(n).then(e=>e.syncEngine)}function Jc(n){return jp.apply(this,arguments)}function jp(){return jp=(0,ve.Z)(function*(n){const e=yield Up(n),t=e.eventManager;return t.onListen=A1.bind(null,e.syncEngine),t.onUnlisten=N1.bind(null,e.syncEngine),t}),jp.apply(this,arguments)}function FI(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,d,m,v){const w=new Q0({next:M=>{u.enqueueAndForget(()=>w1(i,A));const F=M.docs.has(d);!F&&M.fromCache?v.reject(new Me(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&m&&"server"===m.source?v.reject(new Me(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new P0(dh(d.path),w,{includeMetadataChanges:!0,Du:!0});return Pp(i,A)}(yield Jc(n),n.asyncQueue,e,t,r)})),r.promise}function j1(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,d,m,v){const w=new Q0({next:M=>{u.enqueueAndForget(()=>w1(i,A)),M.fromCache&&"server"===m.source?v.reject(new Me(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new P0(d,w,{includeMetadataChanges:!0,Du:!0});return Pp(i,A)}(yield Jc(n),n.asyncQueue,e,t,r)})),r.promise}const VI=new Map;function G1(n,e,t){if(!t)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H1(n,e,t,r){if(!0===e&&!0===r)throw new Me(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BI(n){if(!Ge.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UI(n){if(Ge.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nb(n);throw new Me(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function s(n,e){if(e<=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class o{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,H1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class a{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o({}),this._settingsFrozen=!1,e instanceof Lo?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _C;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=VI.get(e);t&&(Le("ComponentProvider","Removing Datastore"),VI.delete(e),t.terminate())}(this),Promise.resolve()}}class h{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new y(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new h(this.firestore,e,this._key)}}class p{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new p(this.firestore,e,this._query)}}class y extends p{constructor(e,t,r){super(e,t,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new h(this.firestore,null,new Ge(e))}withConverter(e){return new y(this.firestore,e,this._path)}}function D(n,e,...t){if(n=(0,zt.m9)(n),G1("collection","path",e),n instanceof a){const r=Jt.fromString(e,...t);return UI(r),new y(n,null,r)}{if(!(n instanceof h||n instanceof y))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return UI(r),new y(n.firestore,null,r)}}function T(n,e,...t){if(n=(0,zt.m9)(n),1===arguments.length&&(e=KD.R()),G1("doc","path",e),n instanceof a){const r=Jt.fromString(e,...t);return BI(r),new h(n,null,new Ge(r))}{if(!(n instanceof h||n instanceof y))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return BI(r),new h(n.firestore,n instanceof y?n.converter:null,new Ge(r))}}function S(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),(n instanceof h||n instanceof y)&&(e instanceof h||e instanceof y)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function P(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),n instanceof p&&e instanceof p&&n.firestore===e.firestore&&lp(n._query,e._query)&&n.converter===e.converter}class U{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Ym(this,"async_queue_retry"),this.Ua=()=>{const t=Km();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Km();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Km();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new kr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!al(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Or("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=Op.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(i),i}qa(){this.Fa&&st()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Z(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _e{constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xe extends a{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new U,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Zt(this),this._firestoreClient.terminate()}}function Ze(n){return n._firestoreClient||Zt(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Zt(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new av(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new F1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ml(n,e,t){const r=new kr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield L1(n,t),yield V1(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function v_(n){if(n._initialized||n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Go{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(or.fromBase64String(e))}catch(t){throw new Me(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _l(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gp{constructor(e){this._methodName=e}}class W1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const Kx=/^__.*__$/;class Yx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new gh(e,this.data,t,this.fieldTransforms)}}class JA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class z1{constructor(e,t,r,i,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new z1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return K1(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(QA(this.Ya)&&Kx.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Jx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Hc(e)}uc(e,t,r,i=!1){return new z1({Ya:e,methodName:t,oc:r,path:si.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Hp(n){const e=n._freezeSettings(),t=Hc(n._databaseId);return new Jx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function q1(n,e,t,r,i,u={}){const d=n.uc(u.merge||u.mergeFields?2:0,e,t,i);$I("Data must be an object, but it was:",d,r);const m=tN(r,d);let v,w;if(u.merge)v=new fa(d.fieldMask),w=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const F=WI(e,M,t);if(!d.contains(F))throw new Me(ce.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);rN(A,F)||A.push(F)}v=new fa(A),w=d.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,w=d.fieldTransforms;return new Yx(new oi(m),v,w)}class lb extends Gp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lb}}function XA(n,e,t){return new z1({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class jI extends Gp{_toFieldTransform(e){return new fp(e.path,new fh)}isEqual(e){return e instanceof jI}}class Qx extends Gp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=XA(this,e,!0),r=this.ac.map(u=>$p(u,t)),i=new Oc(r);return new fp(e.path,i)}isEqual(e){return this===e}}class Xx extends Gp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=XA(this,e,!0),r=this.ac.map(u=>$p(u,t)),i=new kc(r);return new fp(e.path,i)}isEqual(e){return this===e}}class eR extends Gp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new ph(e.M,Tv(e.M,this.cc));return new fp(e.path,t)}isEqual(e){return this===e}}function GI(n,e,t,r){const i=n.uc(1,e,t);$I("Data must be an object, but it was:",i,r);const u=[],d=oi.empty();Xu(r,(v,w)=>{const A=Z1(e,v,t);w=(0,zt.m9)(w);const M=i.nc(A);if(w instanceof lb)u.push(A);else{const F=$p(w,M);null!=F&&(u.push(A),d.set(A,F))}});const m=new fa(u);return new JA(d,m,i.fieldTransforms)}function HI(n,e,t,r,i,u){const d=n.uc(1,e,t),m=[WI(e,r,t)],v=[i];if(u.length%2!=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)m.push(WI(e,u[F])),v.push(u[F+1]);const w=[],A=oi.empty();for(let F=m.length-1;F>=0;--F)if(!rN(w,m[F])){const B=m[F];let J=v[F];J=(0,zt.m9)(J);const ue=d.nc(B);if(J instanceof lb)w.push(B);else{const Re=$p(J,ue);null!=Re&&(w.push(B),A.set(B,Re))}}const M=new fa(w);return new JA(A,M,d.fieldTransforms)}function eN(n,e,t,r=!1){return $p(t,n.uc(r?4:3,e))}function $p(n,e){if(nN(n=(0,zt.m9)(n)))return $I("Unsupported field value:",e,n),tN(n,e);if(n instanceof Gp)return function(t,r){if(!QA(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const d of t){let m=$p(d,r.sc(u));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qn.fromDate(t);return{timestampValue:_p(r.M,i)}}if(t instanceof Qn){const i=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_p(r.M,i)}}if(t instanceof W1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _l)return{bytesValue:_w(r.M,t._byteString)};if(t instanceof h){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Om(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${nb(t)}`)}(n,e)}function tN(n,e){const t={};return gm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xu(n,(r,i)=>{const u=$p(i,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function nN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof W1||n instanceof _l||n instanceof h||n instanceof Gp)}function $I(n,e,t){if(!nN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=nb(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function WI(n,e,t){if((e=(0,zt.m9)(e))instanceof Go)return e._internalPath;if("string"==typeof e)return Z1(n,e);throw K1("Field path arguments must be of type string or ",n,!1,void 0,t)}const tR=new RegExp("[~\\*/\\[\\]]");function Z1(n,e,t){if(e.search(tR)>=0)throw K1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Go(...e.split("."))._internalPath}catch(r){throw K1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function K1(n,e,t,r,i){const u=r&&!r.isEmpty(),d=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${i}`),v+=")"),new Me(ce.INVALID_ARGUMENT,m+n+v)}function rN(n,e){return n.some(t=>t.isEqual(e))}class cb{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new h(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Y1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nR extends cb{data(){return super.data()}}function Y1(n,e){return"string"==typeof e?Z1(n,e):e instanceof Go?e._internalPath:e._delegate._internalPath}class Wp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qc extends cb{constructor(e,t,r,i,u,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new db(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Y1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class db extends Qc{data(e={}){return super.data(e)}}class Lh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new db(this._firestore,this._userDataWriter,r.key,r,new Wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new db(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const m=new db(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,w=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),w=u.indexOf(d.doc.key)),{type:rR(d.type),doc:m,oldIndex:v,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function iN(n,e){return n instanceof Qc&&e instanceof Qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lh&&e instanceof Lh&&n._firestore===e._firestore&&P(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sN(n){if(il(n)&&0===n.explicitOrderBy.length)throw new Me(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hb{}function Vh(n,...e){for(const t of e)n=t._apply(n);return n}class iR extends hb{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Hp(e.firestore),r=function(i,u,d,m,v,w,A){let M;if(v.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){dN(A,w);const B=[];for(const J of A)B.push(cN(m,i,J));M={arrayValue:{values:B}}}else M=cN(m,i,A)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||dN(A,w),M=eN(d,"where",A,"in"===w||"not-in"===w);const F=ai.create(v,w,M);return function(B,J){if(J.S()){const Re=Im(B);if(null!==Re&&!Re.isEqual(J.field))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${J.field.toString()}'`);const et=bv(B);null!==et&&hN(0,J.field,et)}const ue=function(Re,et){for(const Fe of Re.filters)if(et.indexOf(Fe.op)>=0)return Fe.op;return null}(B,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==ue)throw new Me(ce.INVALID_ARGUMENT,ue===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new p(e.firestore,e.converter,function(i,u){const d=i.filters.concat([u]);return new Ka(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class oR extends hb{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ei(i,u);return function(m,v){if(null===bv(m)){const w=Im(m);null!==w&&hN(0,w,v.field)}}(r,d),d}(e._query,this.hc,this.dc);return new p(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Ka(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class oN extends hb{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new p(e.firestore,e.converter,up(e._query,this._c,this.wc))}}class aN extends hb{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=lN(e,this.type,this.mc,this.gc);return new p(e.firestore,e.converter,(i=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class uN extends hb{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=lN(e,this.type,this.mc,this.gc);return new p(e.firestore,e.converter,(i=t,new Ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function lN(n,e,t,r){if(t[0]=(0,zt.m9)(t[0]),t[0]instanceof cb)return function(i,u,d,m,v){if(!m)throw new Me(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const A of Rc(i))if(A.field.isKeyField())w.push(Sc(u,m.key));else{const M=m.data.field(A.field);if(np(M))throw new Me(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=A.field.canonicalString();throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}w.push(M)}return new qr(w,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hp(n.firestore);return function(u,d,m,v,w,A){const M=u.explicitOrderBy;if(w.length>M.length)throw new Me(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<w.length;B++){const J=w[B];if(M[B].field.isKeyField()){if("string"!=typeof J)throw new Me(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof J}`);if(!Dv(u)&&-1!==J.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${J}' contains a slash.`);const ue=u.path.child(Jt.fromString(J));if(!Ge.isDocumentKey(ue))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Re=new Ge(ue);F.push(Sc(d,Re))}else{const ue=eN(m,v,J);F.push(ue)}}return new qr(F,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function cN(n,e,t){if("string"==typeof(t=(0,zt.m9)(t))){if(""===t)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dv(e)&&-1!==t.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ge.isDocumentKey(r))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sc(n,new Ge(r))}if(t instanceof h)return Sc(n,t._key);throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nb(t)}.`)}function dN(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hN(n,e,t){if(!t.isEqual(e))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zI{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Xu(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new W1(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const t=el(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);At(Dw(r));const i=new Lo(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||Or(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function J1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pR extends zI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new h(this.firestore,null,t)}}class fN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hp(e)}set(e,t,r){this._verifyNotCommitted();const i=Bh(e,this._firestore),u=J1(i.converter,t,r),d=q1(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,_r.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Bh(e,this._firestore);let d;return d="string"==typeof(t=(0,zt.m9)(t))||t instanceof Go?HI(this._dataReader,"WriteBatch.update",u._key,t,r,i):GI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bh(e,this._firestore);return this._mutations=this._mutations.concat(new mh(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bh(n,e){if((n=(0,zt.m9)(n)).firestore!==e)throw new Me(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zp extends zI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new h(this.firestore,null,t)}}function pN(n,e,t){n=tn(n,h);const r=tn(n.firestore,xe),i=J1(n.converter,e,t);return b_(r,[q1(Hp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,_r.none())])}function gN(n,e,t,...r){n=tn(n,h);const i=tn(n.firestore,xe),u=Hp(i);let d;return d="string"==typeof(e=(0,zt.m9)(e))||e instanceof Go?HI(u,"updateDoc",n._key,e,t,r):GI(u,"updateDoc",n._key,e),b_(i,[d.toMutation(n._key,_r.exists(!0))])}function mN(n,...e){var t,r,i;n=(0,zt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Z(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(Z(e[d])){const M=e[d];e[d]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[d+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[d+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let v,w,A;if(n instanceof h)w=tn(n.firestore,xe),A=dh(n._key.path),v={next:M=>{e[d]&&e[d](qI(w,n,M))},error:e[d+1],complete:e[d+2]};else{const M=tn(n,p);w=tn(M.firestore,xe),A=M._query;const F=new zp(w);v={next:B=>{e[d]&&e[d](new Lh(w,F,M,B))},error:e[d+1],complete:e[d+2]},sN(n._query)}return function(M,F,B,J){const ue=new Q0(J),Re=new P0(F,ue,B);return M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Pp(yield Jc(M),Re)})),()=>{ue.pa(),M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return w1(yield Jc(M),Re)}))}}(Ze(w),A,m,v)}function b_(n,e){return function(t,r){const i=new kr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function CI(n,e,t){return Fp.apply(this,arguments)}(yield U1(t),r,i)})),i.promise}(Ze(n),e)}function qI(n,e,t){const r=t.docs.get(e._key),i=new zp(n);return new Qc(n,i,e._key,r,new Wp(t.hasPendingWrites,t.fromCache),e.converter)}class CR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hp(e)}get(e){const t=Bh(e,this._firestore),r=new pR(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new cb(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new cb(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Bh(e,this._firestore),u=J1(i.converter,t,r),d=q1(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const u=Bh(e,this._firestore);let d;return d="string"==typeof(t=(0,zt.m9)(t))||t instanceof Go?HI(this._dataReader,"Transaction.update",u._key,t,r,i):GI(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bh(e,this._firestore),r=new zp(this._firestore);return super.get(e).then(i=>new Qc(this._firestore,r,t._key,i._document,new Wp(!1,!1),t.converter))}}function ZI(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yN(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function vN(){if(!function JD(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ac=dc.SDK_VERSION,(0,dc._registerComponent)(new Mf.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new xe(i,new yC(t.getProvider("auth-internal")),new pm(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,dc.registerVersion)(qD,"3.4.7",n),(0,dc.registerVersion)(qD,"3.4.7","esm2017")}();class fb{constructor(e){this._delegate=e}static fromBase64String(e){return vN(),new fb(_l.fromBase64String(e))}static fromUint8Array(e){return yN(),new fb(_l.fromUint8Array(e))}toBase64(){return vN(),this._delegate.toBase64()}toUint8Array(){return yN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KI(n){return function OR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class kR{enableIndexedDbPersistence(e,t){return function gn(n,e){v_(n=tn(n,xe));const t=Ze(n),r=n._freezeSettings(),i=new Vp;return ml(t,i,new P1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ts(n){v_(n=tn(n,xe));const e=Ze(n),t=n._freezeSettings(),r=new Vp;return ml(e,r,new J0(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rb(n){if(n._initialized&&!n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Bo.vt())return Promise.resolve();const i=r+"main";yield Bo.delete(i)}),function(r){return t.apply(this,arguments)})(Ip(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class bN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ep("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function l(n,e,t,r={}){var i;const u=(n=tn(n,a))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ep("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=ii.MOCK_USER;else{d=(0,zt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Me(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ii(v)}n._authCredentials=new sh(new mC(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function sb(n){return function kI(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield B1(n),t=yield y_(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.lu.delete(0),Rh(i)}(t)}))}(Ze(n=tn(n,xe)))}(this._delegate)}disableNetwork(){return function ob(n){return function PI(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield B1(n),t=yield y_(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const u=qe(i);u.lu.add(0),yield $c(u),u._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ze(n=tn(n,xe)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,H1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ib(n){return function(e){const t=new kr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function UA(n,e){return a_.apply(this,arguments)}(yield U1(e),t)})),t.promise}(Ze(n=tn(n,xe)))}(this._delegate)}onSnapshotsInSync(e){return function ER(n,e){return function LI(n,e){const t=new Q0(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Jc(n),i=t,qe(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Jc(n),i=t,void qe(r).Tu.delete(i);var r,i}))}}(Ze(n=tn(n,xe)),Z(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new D_(this,D(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,T(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,function E(n,e){if(n=tn(n,a),G1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new p(n,null,(t=e,new Ka(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function IR(n,e){return function ZA(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,Up(i).then(u=>u.datastore));var i;new WA(n.asyncQueue,r,e,t).run()})),t.promise}(Ze(n=tn(n,xe)),t=>e(new CR(n,t)))}(this._delegate,t=>e(new DN(this,t)))}batch(){return Ze(this._delegate),new wN(new fN(this._delegate,e=>b_(this._delegate,e)))}loadBundle(e){return function ab(n,e){const t=Ze(n=tn(n,xe)),r=new _e;return function KA(n,e,t,r){const i=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,w){if(v instanceof Uint8Array)return Bp(v,w);if(v instanceof ArrayBuffer)return Bp(new Uint8Array(v),w);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new HA(v,d);var v}(t,Hc(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function Y0(n,e,t){const r=qe(n);var i;(i=(0,ve.Z)(function*(u,d,m){try{const v=yield d.getMetadata();if(yield function(F,B){const J=qe(F),ue=Pr(B.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",Re=>J.ds.getBundleMetadata(Re,B.id)).then(Re=>!!Re&&Re.createTime.compareTo(ue)>=0)}(u.localStore,v))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(F=v).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);m._updateProgress(I1(v));const w=new F0(v,u.localStore,d.M);let A=yield d.fa();for(;A;){const F=yield w.Nu(A);F&&m._updateProgress(F),A=yield d.fa()}const M=yield w.complete();return yield tu(u,M.Ou,void 0),yield function(F,B){const J=qe(F);return J.persistence.runTransaction("Save bundle","readwrite",ue=>J.ds.saveBundleMetadata(ue,B))}(u.localStore,v),m._completeWith(M.progress),Promise.resolve(M.Mu)}catch(v){return ep("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var F}),function(u,d,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield U1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ub(n,e){return function YA(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.ds.getNamedQuery(u,r))}(yield __(n),e)}))}(Ze(n=tn(n,xe)),e).then(t=>t?new p(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ns(this,t):null)}}class Q1 extends zI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fb(new _l(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class DN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Q1(e)}get(e){const t=Zp(e);return this._delegate.get(t).then(r=>new pb(this._firestore,new Qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Zp(e);return r?(ZI("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Zp(e);return this._delegate.delete(t),this}}class wN{constructor(e){this._delegate=e}set(e,t,r){const i=Zp(e);return r?(ZI("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new db(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new qp(e,new Q1(e),t),i.set(t,u)),u}}qp.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Q1(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new h(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new va(t,new h(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new D_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new D_(this.firestore,D(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,zt.m9)(e))instanceof h&&S(this._delegate,e)}set(e,t){t=ZI("DocumentReference.set",t);try{return t?pN(this._delegate,e,t):pN(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?gN(this._delegate,e):gN(this._delegate,e,t,...r)}catch(i){throw As(i,"updateDoc()","DocumentReference.update()")}}delete(){return function DR(n){return b_(tn(n.firestore,xe),[new mh(n._key,_r.none())])}(this._delegate)}onSnapshot(...e){const t=EN(e),r=CN(e,i=>new pb(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function mR(n){n=tn(n,h);const e=tn(n.firestore,xe),t=Ze(e),r=new zp(e);return function zA(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,d){try{const m=yield function(v,w){const A=qe(v);return A.persistence.runTransaction("read document","readonly",M=>A.ai.Bs(M,w))}(i,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Kc(m,`Failed to get document '${u} from cache`);d.reject(v)}}),function(i,u,d){return r.apply(this,arguments)})(yield __(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qc(e,r,n._key,i,new Wp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function _R(n){n=tn(n,h);const e=tn(n.firestore,xe);return FI(Ze(e),n._key,{source:"server"}).then(t=>qI(e,n,t))}(this._delegate):function gR(n){n=tn(n,h);const e=tn(n.firestore,xe);return FI(Ze(e),n._key).then(t=>qI(e,n,t))}(this._delegate),t.then(r=>new pb(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?qp.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function EN(n){for(const e of n)if("object"==typeof e&&!KI(e))return e;return{}}function CN(n,e){var t,r;let i;return i=KI(n[0])?n[0]:KI(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iN(this._delegate,e._delegate)}}class gb extends pb{data(e){const t=this._delegate.data(e);return function NA(n,e){n||st()}(void 0!==t),t}}class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Q1(e)}where(e,t,r){try{return new Ns(this.firestore,Vh(this._delegate,function sR(n,e,t){const r=e,i=Y1("where",n);return new iR(i,r,t)}(e,t,r)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ns(this.firestore,Vh(this._delegate,function aR(n,e="asc"){const t=e,r=Y1("orderBy",n);return new oR(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ns(this.firestore,Vh(this._delegate,function uR(n){return s("limit",n),new oN("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ns(this.firestore,Vh(this._delegate,function lR(n){return s("limitToLast",n),new oN("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ns(this.firestore,Vh(this._delegate,function cR(...n){return new aN("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ns(this.firestore,Vh(this._delegate,function dR(...n){return new aN("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ns(this.firestore,Vh(this._delegate,function hR(...n){return new uN("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ns(this.firestore,Vh(this._delegate,function fR(...n){return new uN("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return P(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function vR(n){n=tn(n,p);const e=tn(n.firestore,xe),t=Ze(e),r=new zp(e);return function qA(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,d){try{const m=yield zm(i,u,!0),v=new r_(u,m.hi),w=v.Gu(m.documents),A=v.applyChanges(w,!1);d.resolve(A.snapshot)}catch(m){const v=Kc(m,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(i,u,d){return r.apply(this,arguments)})(yield __(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Lh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function bR(n){n=tn(n,p);const e=tn(n.firestore,xe),t=Ze(e),r=new zp(e);return j1(t,n._query,{source:"server"}).then(i=>new Lh(e,r,n,i))}(this._delegate):function yR(n){n=tn(n,p);const e=tn(n.firestore,xe),t=Ze(e),r=new zp(e);return sN(n._query),j1(t,n._query).then(i=>new Lh(e,r,n,i))}(this._delegate),t.then(r=>new YI(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=EN(e),r=CN(e,i=>new YI(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mN(this._delegate,t,r)}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?qp.getInstance(this.firestore,e):null))}}class FR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gb(this._firestore,r))})}isEqual(e){return iN(this._delegate,e._delegate)}}class D_ extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?T(this._delegate):T(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function wR(n,e){const t=tn(n.firestore,xe),r=T(n),i=J1(n.converter,e);return b_(t,[q1(Hp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return S(this._delegate,e._delegate)}withConverter(e){return new D_(this.firestore,this._delegate.withConverter(e?qp.getInstance(this.firestore,e):null))}}function Zp(n){return tn(n,h)}class JI{constructor(...e){this._delegate=new Go(...e)}static documentId(){return new JI(si.keyField().canonicalString())}isEqual(e){return(e=(0,zt.m9)(e))instanceof Go&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function AR(){return new jI("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kp(e)}static delete(){const e=function TR(){return new lb("deleteField")}();return e._methodName="FieldValue.delete",new Kp(e)}static arrayUnion(...e){const t=function NR(...n){return new Qx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kp(t)}static arrayRemove(...e){const t=function SR(...n){return new Xx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kp(t)}static increment(e){const t=function MR(n){return new eR("increment",n)}(e);return t._methodName="FieldValue.increment",new Kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LR={Firestore:bN,GeoPoint:W1,Timestamp:Qn,Blob:fb,Transaction:DN,WriteBatch:wN,DocumentReference:va,DocumentSnapshot:pb,Query:Ns,QueryDocumentSnapshot:gb,QuerySnapshot:YI,CollectionReference:D_,FieldPath:JI,FieldValue:Kp,setLogLevel:function PR(n){!function gC(n){Qu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function BR(n){(function VR(n,e){n.INTERNAL.registerComponent(new Mf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LR)))})(n,(e,t)=>new bN(e,t,new kR)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(_A.Z);var UR=O(6451),X1=O(5363),jR=O(6063);class GR extends nn.x{constructor(e=1/0,t=1/0,r=jR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!i&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const d=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)m=v;m&&r.splice(0,m+1)}}}var HR=O(3099);function IN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,HR.B)({connector:()=>new GR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function TN(n,e){return(0,_i.m)(e)?wn(()=>n,e):wn(()=>n)}var QI=O(9468);O(5867);const NN=new Map,ZR={activated:!1,tokenObservers:[]},KR={initialized:!1,enabled:!1};function Ii(n){return NN.get(n)||ZR}function ru(n,e){NN.set(n,e)}function tE(){return KR}class eO{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new zt.BH,yield function tO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ss=new zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function MN(n){if(!Ii(n).activated)throw Ss.create("use-before-activation",{appName:n.name})}function nT(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(M){throw Ss.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==d.status)throw Ss.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(M){throw Ss.create("fetch-parse-error",{originalErrorMessage:M.message})}const v=m.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const w=1e3*Number(v[1]),A=Date.now();return{token:m.attestationToken,expireTimeMillis:A+w,issuedAtTimeMillis:A}}),rT.apply(this,arguments)}function oO(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const mb="firebase-app-check-store";let iE=null;function RN(){return iE||(iE=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ss.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mb,{keyPath:"compositeKey"})}}catch(t){e(Ss.create("storage-open",{originalErrorMessage:t.message}))}}),iE)}function iT(){return iT=(0,ve.Z)(function*(n,e){const r=(yield RN()).transaction(mb,"readwrite"),u=r.objectStore(mb).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var w;m(Ss.create("storage-set",{originalErrorMessage:null===(w=v.target.error)||void 0===w?void 0:w.message}))}})}),iT.apply(this,arguments)}const _b=new Hu.Yd("@firebase/app-check");function FN(n,e){return(0,zt.hl)()?function cO(n,e){return function ON(n,e){return iT.apply(this,arguments)}(function PN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_b.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LN(){return tE().enabled}function VN(){return uT.apply(this,arguments)}function uT(){return uT=(0,ve.Z)(function*(){const n=tE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uT.apply(this,arguments)}const mO={error:"UNKNOWN_ERROR"};function _O(n){return zt.US.encodeString(JSON.stringify(n),!1)}function sE(n){return lT.apply(this,arguments)}function lT(){return lT=(0,ve.Z)(function*(n,e=!1){const t=n.app;MN(t);const r=Ii(t);let u,i=r.token;if(!i){const v=yield r.cachedTokenPromise;v&&oE(v)&&(i=v)}if(!e&&i&&oE(i))return{token:i.token};let m,d=!1;if(LN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nT(oO(t,yield VN()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const v=yield r.exchangeTokenPromise;return yield FN(t,v),ru(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),d=!0),i=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?_b.warn(v.message):_b.error(v),u=v}return i?(m={token:i.token},ru(t,Object.assign(Object.assign({},r),{token:i})),yield FN(t,i)):m=vO(u),d&&UN(t,m),m}),lT.apply(this,arguments)}function dT(n,e){const t=Ii(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ru(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function BN(n){const{app:e}=n,t=Ii(e);let r=t.tokenRefresher;r||(r=function yO(n){const{app:e}=n;return new eO((0,ve.Z)(function*(){let r;if(r=Ii(e).token?yield sE(n,!0):yield sE(n),r.error)throw r.error}),()=>!0,()=>{const t=Ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ru(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UN(n,e){const t=Ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function oE(n){return n.expireTimeMillis-Date.now()>0}function vO(n){return{token:_O(mO),error:n}}class bO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ii(this.app);for(const t of e)dT(this.app,t.next);return Promise.resolve()}}const ZN="app-check-internal";!function kO(){(0,dc._registerComponent)(new Mf.wA("app-check",n=>function DO(n,e){return new bO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZN).initialize()})),(0,dc._registerComponent)(new Mf.wA(ZN,n=>function wO(n){return{getToken:e=>sE(n,e),addTokenListener:e=>function cT(n,e,t,r){const{app:i}=n,u=Ii(i),d={next:t,error:r,type:e};if(ru(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&oE(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),BN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>BN(n))}(n,"INTERNAL",e),removeTokenListener:e=>dT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,dc.registerVersion)("@firebase/app-check","0.5.5")}();class gT{constructor(){return(0,Rr.vb)("app-check")}}"undefined"!=typeof window&&window;var YN=O(127);const JN=new c.OlP("angularfire2.auth.use-emulator"),QN=new c.OlP("angularfire2.auth.settings"),XN=new c.OlP("angularfire2.auth.tenant-id"),eS=new c.OlP("angularfire2.auth.langugage-code"),tS=new c.OlP("angularfire2.auth.use-device-language"),nS=new c.OlP("angularfire.auth.persistence"),rS=(n,e,t,r,i,u,d,m)=>(0,ws.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,u&&v.useDeviceLanguage(),d)for(const[w,A]of Object.entries(d))v.settings[w]=A;return m&&v.setPersistence(m),v},[t,r,i,u,d,m]);let _T=(()=>{class n{constructor(t,r,i,u,d,m,v,w,A,M,F,B){const J=new nn.x,ue=gt(void 0).pipe((0,X1.Q)(d.outsideAngular),wn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4087)))),(0,wt.U)(()=>(0,ws.on)(t,u,r)),(0,wt.U)(Re=>rS(Re,u,m,w,A,M,v,F)),IN({bufferSize:1,refCount:!1}));if(hr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{ue.pipe(to()).subscribe();const et=ue.pipe(wn($e=>$e.getRedirectResult().then(Je=>Je,()=>null)),Rr.iC,IN({bufferSize:1,refCount:!1})),Fe=ue.pipe(wn($e=>new Gn.y(Je=>({unsubscribe:u.runOutsideAngular(()=>$e.onAuthStateChanged(Qe=>Je.next(Qe),Qe=>Je.error(Qe),()=>Je.complete()))})))),mt=ue.pipe(wn($e=>new Gn.y(Je=>({unsubscribe:u.runOutsideAngular(()=>$e.onIdTokenChanged(Qe=>Je.next(Qe),Qe=>Je.error(Qe),()=>Je.complete()))}))));this.authState=et.pipe(TN(Fe),(0,QI.R)(d.outsideAngular),(0,X1.Q)(d.insideAngular)),this.user=et.pipe(TN(mt),(0,QI.R)(d.outsideAngular),(0,X1.Q)(d.insideAngular)),this.idToken=this.user.pipe(wn($e=>$e?(0,Fn.D)($e.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(wn($e=>$e?(0,Fn.D)($e.getIdTokenResult()):gt(null))),this.credential=(0,UR.T)(et,J,this.authState.pipe(pr($e=>!$e))).pipe((0,wt.U)($e=>(null==$e?void 0:$e.user)?$e:null),(0,QI.R)(d.outsideAngular),(0,X1.Q)(d.insideAngular))}return(0,ws.pX)(this,ue,u,{spy:{apply:(Re,et,Fe)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&Fe.then(mt=>J.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ws.Dh),c.LFG(ws.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Rr.HU),c.LFG(JN,8),c.LFG(QN,8),c.LFG(XN,8),c.LFG(eS,8),c.LFG(tS,8),c.LFG(nS,8),c.LFG(gT,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UO=(()=>{class n{constructor(){YN.Z.registerVersion("angularfire",Rr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_T]}),n})();function iS(n,e){return function jO(n,e=my.z){return new Gn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yT(n,e){return iS(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function uE(n,e){return yT(n,e).pipe(Br(void 0),_y(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const v=i.find(A=>A.doc.ref.isEqual(d.ref)),w=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function sS(n,e,t){return uE(n,t).pipe(Ar((r,i)=>function HO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $O(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Bg(n,e=ni.y){return n=null!=n?n:Qb,(0,ir.e)((t,r)=>{let i,u=!0;t.subscribe((0,_n.x)(r,d=>{const m=e(d);(u||!n(i,m))&&(u=!1,i=m,r.next(d))}))})}(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function vT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function oS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class aS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Br(void 0),_y(),pr(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ar((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=oS(e);return sS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return yT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rr.iC)}get(e){return(0,Fn.D)(this.query.get(e)).pipe(Rr.iC)}add(e){return this.ref.add(e)}doc(e){return new uS(this.ref.doc(e),this.afs)}}class uS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=dS(r,t);return new aS(i,u,this.afs)}snapshotChanges(){return function GO(n,e){return iS(n,e).pipe(Br(void 0),_y(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Fn.D)(this.ref.get(e)).pipe(Rr.iC)}}class WO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uE(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),pr(t=>t.length>0),Rr.iC):uE(this.query,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ar((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=oS(e);return sS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return yT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Rr.iC)}get(e){return(0,Fn.D)(this.query.get(e)).pipe(Rr.iC)}}const lS=new c.OlP("angularfire2.enableFirestorePersistence"),cS=new c.OlP("angularfire2.firestore.persistenceSettings"),zO=new c.OlP("angularfire2.firestore.settings"),qO=new c.OlP("angularfire2.firestore.use-emulator");function dS(n,e=(t=>t)){return{query:e(n),ref:n}}let hS=(()=>{class n{constructor(t,r,i,u,d,m,v,w,A,M,F,B,J,ue,Re,et,Fe){this.schedulers=v;const mt=(0,ws.on)(t,m,r),$e=A;M&&rS(mt,m,F,J,ue,Re,B,et),[this.firestore,this.persistenceEnabled$]=(0,ws.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const Je=m.runOutsideAngular(()=>mt.firestore());if(u&&Je.settings(u),$e&&Je.useEmulator(...$e),i&&!hr(d)){const Qe=()=>{try{return(0,Fn.D)(Je.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Kt){return"undefined"!=typeof console&&console.warn(Kt),gt(!1)}};return[Je,m.runOutsideAngular(Qe)]}return[Je,gt(!1)]},[u,$e,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=dS(i,r),m=this.schedulers.ngZone.run(()=>u);return new aS(m,d,this)}collectionGroup(t,r){const i=r||(d=>d),u=this.firestore.collectionGroup(t);return new WO(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new uS(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ws.Dh),c.LFG(ws.xv,8),c.LFG(lS,8),c.LFG(zO,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Rr.HU),c.LFG(cS,8),c.LFG(qO,8),c.LFG(_T,8),c.LFG(JN,8),c.LFG(QN,8),c.LFG(XN,8),c.LFG(eS,8),c.LFG(tS,8),c.LFG(nS,8),c.LFG(gT,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZO=(()=>{class n{constructor(){YN.Z.registerVersion("angularfire",Rr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lS,useValue:!0},{provide:cS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[hS]}),n})(),bT=(()=>{class n{constructor(t){this.angularFirestore=t}getPosts(){return this.angularFirestore.collection("posts").snapshotChanges()}getPostById(t){return this.angularFirestore.collection("posts").doc(t).valueChanges()}createPost(t){return new Promise((r,i)=>{this.angularFirestore.collection("posts").add(t).then(u=>{console.log(u)},u=>{i(u)})})}updatePost(t,r){return this.angularFirestore.collection("posts").doc(r).update({title:t.title,content:t.content,author:t.author})}deletePost(t){return this.angularFirestore.collection("posts").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hS))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Yp=(()=>{class n extends fS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const ba=new c.OlP("NgValueAccessor"),JO={provide:ba,useExisting:(0,c.Gpc)(()=>yb),multi:!0},XO=new c.OlP("CompositionEventMode");let yb=(()=>{class n extends fS{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function QO(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(XO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([JO]),c.qOj]}),n})();const ss=new c.OlP("NgValidators"),jh=new c.OlP("NgAsyncValidators");function yS(n){return function Uh(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function lE(n){return null}function CS(n){return null!=n}function IS(n){const e=(0,c.QGY)(n)?(0,Fn.D)(n):n;return(0,c.CqO)(e),e}function TS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function AS(n,e){return e.map(t=>t(n))}function NS(n){return n.map(e=>function tk(n){return!n.validate}(e)?e:t=>e.validate(t))}function DT(n){return null!=n?function SS(n){if(!n)return null;const e=n.filter(CS);return 0==e.length?null:function(t){return TS(AS(t,e))}}(NS(n)):null}function wT(n){return null!=n?function MS(n){if(!n)return null;const e=n.filter(CS);return 0==e.length?null:function(t){return function KO(...n){const e=(0,Dn.jO)(n),{args:t,keys:r}=xi(n),i=new Gn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let v=d,w=d;for(let A=0;A<d;A++){let M=!1;(0,yi.Xf)(t[A]).subscribe((0,_n.x)(u,F=>{M||(M=!0,w--),m[A]=F},()=>v--,void 0,()=>{(!v||!M)&&(w||u.next(r?Io(r,m):m),u.complete())}))}});return e?i.pipe(Ul(e)):i}(AS(t,e).map(IS)).pipe((0,wt.U)(TS))}}(NS(n)):null}function xS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RS(n){return n._rawValidators}function OS(n){return n._rawAsyncValidators}function ET(n){return n?Array.isArray(n)?n:[n]:[]}function cE(n,e){return Array.isArray(n)?n.includes(e):n===e}function kS(n,e){const t=ET(e);return ET(n).forEach(i=>{cE(t,i)||t.push(i)}),t}function PS(n,e){return ET(e).filter(t=>!cE(n,t))}class FS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Gh extends FS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ms extends FS{get formDirective(){return null}get path(){return null}}class LS{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let CT=(()=>{class n extends LS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Gh,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),IT=(()=>{class n extends LS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ms,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function vb(n,e){NT(n,e),e.valueAccessor.writeValue(n.value),function lk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BS(n,e)})}(n,e),function dk(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ck(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fE(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function pE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function NT(n,e){const t=RS(n);null!==e.validator?n.setValidators(xS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=OS(n);null!==e.asyncValidator?n.setAsyncValidators(xS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();pE(e._rawValidators,i),pE(e._rawAsyncValidators,i)}function gE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=RS(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(d=>d!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=OS(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(d=>d!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return pE(e._rawValidators,r),pE(e._rawAsyncValidators,r),t}function BS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const bb="VALID",mE="INVALID",w_="PENDING",Db="DISABLED";function OT(n){return(_E(n)?n.validators:n)||null}function HS(n){return Array.isArray(n)?DT(n):n||null}function kT(n,e){return(_E(e)?e.asyncValidators:n)||null}function $S(n){return Array.isArray(n)?wT(n):n||null}function _E(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const PT=n=>n instanceof LT,yE=n=>n instanceof vE,WS=n=>n instanceof KS;function zS(n){return PT(n)?n.value:n.getRawValue()}function qS(n,e){const t=yE(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function ZS(n,e){yE(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new c.vHH(1002,"")})}class FT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=HS(this._rawValidators),this._composedAsyncValidatorFn=$S(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bb}get invalid(){return this.status===mE}get pending(){return this.status==w_}get disabled(){return this.status===Db}get enabled(){return this.status!==Db}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=HS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=$S(e)}addValidators(e){this.setValidators(kS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PS(e,this._rawAsyncValidators))}hasValidator(e){return cE(this._rawValidators,e)}hasAsyncValidator(e){return cE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=w_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Db,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bb,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bb||this.status===w_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Db:bb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=w_,this._hasOwnPendingAsyncValidator=!0;const t=IS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function gk(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=yE(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:WS(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Db:this.errors?mE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(w_)?w_:this._anyControlsHaveStatus(mE)?mE:bb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_E(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class LT extends FT{constructor(e=null,t,r){super(OT(t),kT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_E(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class vE extends FT{constructor(e,t,r){super(OT(t),kT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ZS(this,e),Object.keys(e).forEach(r=>{qS(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=zS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class KS extends FT{constructor(e,t,r){super(OT(t),kT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ZS(this,e),e.forEach((r,i)=>{qS(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>zS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let BT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const UT=new c.OlP("NgModelWithFormControlWarning"),Ck={provide:Ms,useExisting:(0,c.Gpc)(()=>Eb)};let Eb=(()=>{class n extends Ms{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return vb(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fE(t.control||null,t,!1),xT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function GS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(fE(r||null,t),PT(i)&&(vb(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function US(n,e){NT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function hk(n,e){return gE(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){NT(this.form,this),this._oldForm&&gE(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ss,10),c.Y36(jh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Ck]),c.qOj,c.TTD]}),n})();const Ak={provide:Gh,useExisting:(0,c.Gpc)(()=>bE)};let bE=(()=>{class n extends Gh{constructor(t,r,i,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function MT(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===yb?t=u:function pk(n){return Object.getPrototypeOf(n.constructor)===Yp}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function ST(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function hE(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Ms,13),c.Y36(ss,10),c.Y36(jh,10),c.Y36(ba,10),c.Y36(UT,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([Ak]),c.qOj,c.TTD]}),n})(),Jp=(()=>{class n{constructor(){this._validator=lE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):lE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const Lk={provide:ss,useExisting:(0,c.Gpc)(()=>Cb),multi:!0};let Cb=(()=>{class n extends Jp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function kk(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>yS}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([Lk]),c.qOj]}),n})(),_M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[tM]]}),n})(),yM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[_M]}),n})(),vM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[_M]}),n})(),bM=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function Hk(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new vE(i,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,i){return new LT(t,r,i)}array(t,r,i){const u=t.map(d=>this._createControl(d));return new KS(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return PT(t)||yE(t)||WS(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:vM}),n})(),$k=(()=>{class n{constructor(t,r,i){this.postService=t,this.formBuilder=r,this.router=i,this.postForm=this.formBuilder.group({title:[""],content:[""],author:[""]})}ngOnInit(){}onSubmit(){this.postService.createPost(this.postForm.value),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bT),c.Y36(bM),c.Y36(ri))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-create"]],decls:17,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","title","type","text","required","",1,"form-control"],["formControlName","content","type","text","required","",1,"form-control"],["formControlName","author","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(c.TgZ(0,"h2"),c._uU(1,"componente CREATE"),c.qZA(),c.TgZ(2,"form",0),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",1)(4,"label",2),c._uU(5,"Title"),c.qZA(),c._UZ(6,"input",3),c.qZA(),c.TgZ(7,"div",1)(8,"label",2),c._uU(9,"Content"),c.qZA(),c._UZ(10,"input",4),c.qZA(),c.TgZ(11,"div",1)(12,"label",2),c._uU(13,"Author"),c.qZA(),c._UZ(14,"input",5),c.qZA(),c.TgZ(15,"button",6),c._uU(16,"Store"),c.qZA()()),2&t&&(c.xp6(2),c.Q6J("formGroup",r.postForm),c.xp6(13),c.Q6J("disabled",!r.postForm.valid))},directives:[BT,IT,Eb,yb,CT,bE,Cb],styles:[""]}),n})(),Wk=(()=>{class n{constructor(t,r,i,u){this.postService=t,this.formBuilder=r,this.activeRoute=i,this.router=u,this.editForm=this.formBuilder.group({title:[""],content:[""],author:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.postService.getPostById(t).subscribe(r=>{this.postRef=r,this.editForm=this.formBuilder.group({title:[this.postRef.title],content:[this.postRef.content],author:[this.postRef.author]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.postService.updatePost(this.editForm.value,t),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bT),c.Y36(bM),c.Y36(Ro),c.Y36(ri))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit"]],decls:17,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","title","type","text","required","",1,"form-control"],["formControlName","content","type","text","required","",1,"form-control"],["formControlName","author","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){1&t&&(c.TgZ(0,"h2"),c._uU(1,"Componente EDIT"),c.qZA(),c.TgZ(2,"form",0),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",1)(4,"label",2),c._uU(5,"Title"),c.qZA(),c._UZ(6,"input",3),c.qZA(),c.TgZ(7,"div",1)(8,"label",2),c._uU(9,"Content"),c.qZA(),c._UZ(10,"input",4),c.qZA(),c.TgZ(11,"div",1)(12,"label",2),c._uU(13,"Author"),c.qZA(),c._UZ(14,"input",5),c.qZA(),c.TgZ(15,"button",6),c._uU(16,"Update"),c.qZA()()),2&t&&(c.xp6(2),c.Q6J("formGroup",r.editForm))},directives:[BT,IT,Eb,yb,CT,bE,Cb],styles:[""]}),n})();function zk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._UZ(8,"i",5),c.TgZ(9,"i",6),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().deleteRow(u)}),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.title),c.xp6(2),c.Oqu(t.content),c.xp6(2),c.Oqu(t.author),c.xp6(2),c.MGl("routerLink","/edit/",t.id,"")}}const qk=[{path:"",component:(()=>{class n{constructor(t){this.postService=t,this.deleteRow=r=>this.postService.deletePost(r)}ngOnInit(){this.postService.getPosts().subscribe(t=>{this.Posts=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-show"]],decls:18,vars:1,consts:[[1,"d-grip","gap-2","mt-4"],["routerLink","/create","type","button",1,"btn","btn-primary"],[1,"table","table-hover","table-striped"],[1,"thead-dak"],[4,"ngFor","ngForOf"],[1,"fa-regular","fa-pen-to-square","text-info",3,"routerLink"],[1,"fa-regular","fa-trash-can","text-danger",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"h2"),c._uU(1,"Componente SHOW"),c.qZA(),c.TgZ(2,"div",0)(3,"a",1),c._uU(4,"Create"),c.qZA()(),c.TgZ(5,"table",2)(6,"thead",3)(7,"tr")(8,"th"),c._uU(9,"Title"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"Content"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Author"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Actions"),c.qZA()()(),c.TgZ(16,"tbody"),c.YNc(17,zk,10,4,"tr",4),c.qZA()()),2&t&&(c.xp6(17),c.Q6J("ngForOf",r.Posts))},directives:[Pg,kn,kg],styles:["i[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.gradient[_ngcontent-%COMP%]{background:linear-gradient(to rigth,#606c88,#3f4c6b)!important}"]}),n})()},{path:"create",component:$k},{path:"edit/:id",component:Wk},{path:"**",redirectTo:"show",pathMatch:"full"}];let Zk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Sf.forRoot(qk)],Sf]}),n})(),Kk=(()=>{class n{constructor(){this.title="app-crud-ang-fire"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"container"],[1,"row","align-items-md-stretch"],[1,"col-md-12"],[1,"h-100","p-4","text-white","bg-dark","rounded-3","text-center"],["src","assets/img/angular.png","width","100","height","100"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),c._uU(5,"CRUD Angular + Firebase"),c.qZA(),c._UZ(6,"img",4),c.qZA()()(),c._UZ(7,"router-outlet"),c.qZA())},directives:[ic],styles:[""]}),n})();var Yk=O(1144);const Jk=["addListener","removeListener"],Qk=["addEventListener","removeEventListener"],Xk=["on","off"];function xs(n,e,t,r){if((0,_i.m)(t)&&(r=t,t=void 0),r)return xs(n,e,t).pipe(Ul(r));const[i,u]=function nP(n){return(0,_i.m)(n.addEventListener)&&(0,_i.m)(n.removeEventListener)}(n)?Qk.map(d=>m=>n[d](e,m,t)):function eP(n){return(0,_i.m)(n.addListener)&&(0,_i.m)(n.removeListener)}(n)?Jk.map(DM(n,e)):function tP(n){return(0,_i.m)(n.on)&&(0,_i.m)(n.off)}(n)?Xk.map(DM(n,e)):[];if(!i&&(0,Yk.z)(n))return(0,bn.z)(d=>xs(d,e,t))((0,yi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Gn.y(d=>{const m=(...v)=>d.next(1<v.length?v:v[0]);return i(m),()=>u(m)})}function DM(n,e){return t=>r=>n[t](e,r)}var rP=O(3532);const{isArray:sP}=Array;function wM(n){return 1===n.length&&sP(n[0])?n[0]:n}var DE=O(5032);function wE(...n){const e=(0,Dn.jO)(n),t=wM(n);return t.length?new Gn.y(r=>{let i=t.map(()=>[]),u=t.map(()=>!1);r.add(()=>{i=u=null});for(let d=0;!r.closed&&d<t.length;d++)(0,yi.Xf)(t[d]).subscribe((0,_n.x)(r,m=>{if(i[d].push(m),i.every(v=>v.length)){const v=i.map(w=>w.shift());r.next(e?e(...v):v),i.some((w,A)=>!w.length&&u[A])&&r.complete()}},()=>{u[d]=!0,!i[d].length&&r.complete()}));return()=>{i=u=null}}):Xs.E}function ui(n){return(0,ir.e)((e,t)=>{(0,yi.Xf)(n).subscribe((0,_n.x)(t,()=>t.complete(),DE.Z)),!t.closed&&e.subscribe(t)})}function zT(...n){const e=(0,Dn.jO)(n);return(0,ir.e)((t,r)=>{const i=n.length,u=new Array(i);let d=n.map(()=>!1),m=!1;for(let v=0;v<i;v++)(0,yi.Xf)(n[v]).subscribe((0,_n.x)(r,w=>{u[v]=w,!m&&!d[v]&&(d[v]=!0,(m=d.every(ni.y))&&(d=null))},DE.Z));t.subscribe((0,_n.x)(r,v=>{if(m){const w=[v,...u];r.next(e?e(...w):w)}}))})}new Gn.y(DE.Z),Math,Math,Math;const wF=["*"],UF=["dialog"];function Xp(n){return null!=n}function N_(n){return(n||document.body).getBoundingClientRect()}const GM={animation:!0,transitionTimerDelayMs:5},PL=()=>{},{transitionTimerDelayMs:FL}=GM,xb=new Map,Rs=(n,e,t,r)=>{let i=r.context||{};const u=xb.get(e);if(u)switch(r.runningTransition){case"continue":return Xs.E;case"stop":n.run(()=>u.transition$.complete()),i=Object.assign(u.context,i),xb.delete(e)}const d=t(e,r.animation,i)||PL;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>d()),gt(void 0).pipe(function OL(n){return e=>new Gn.y(t=>e.subscribe({next:d=>n.run(()=>t.next(d)),error:d=>n.run(()=>t.error(d)),complete:()=>n.run(()=>t.complete())}))}(n));const m=new nn.x,v=new nn.x,w=m.pipe(function aP(...n){return e=>xu(e,gt(...n))}(!0));xb.set(e,{transition$:m,complete:()=>{v.next(),v.complete()},context:i});const A=function kL(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const M=xs(e,"transitionend").pipe(ui(w),pr(({target:B})=>B===e));(function EM(...n){return 1===(n=wM(n)).length?(0,yi.Xf)(n[0]):new Gn.y(function oP(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,yi.Xf)(n[r]).subscribe((0,_n.x)(e,i=>{if(t){for(let u=0;u<t.length;u++)u!==r&&t[u].unsubscribe();t=null}e.next(i)})))}}(n))})(function WT(n=0,e,t=my.P){let r=-1;return null!=e&&((0,rP.K)(e)?t=e:r=e),new Gn.y(i=>{let u=function iP(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},u)})}(A+FL).pipe(ui(w)),M,v).pipe(ui(w)).subscribe(()=>{xb.delete(e),n.run(()=>{d(),m.next(),m.complete()})})}),m.asObservable()};let NE=(()=>{class n{constructor(){this.animation=GM.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),KM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),JM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),tx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var li=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(li||(li={})),li))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const rx=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ix(n){const e=Array.from(n.querySelectorAll(rx)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let hx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn,yM]]}),n})(),mx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();class rg{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let M2=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Hn.q)(1)).subscribe(()=>{Rs(this._zone,this._el.nativeElement,(t,r)=>{r&&N_(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Rs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(c.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),c.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class _x{close(e){}dismiss(e){}}class x2{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new nn.x,this._dismissed=new nn.x,this._hidden=new nn.x,e.instance.dismissEvent.subscribe(u=>{this.dismiss(u)}),this.result=new Promise((u,d)=>{this._resolve=u,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ui(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ui(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function xL(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():gt(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),wE(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Pb=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(Pb||(Pb={})),Pb))();let R2=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new nn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new c.vpe,this.shown=new nn.x,this.hidden=new nn.x}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Hn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=wE(Rs(this._zone,t,()=>t.classList.remove("show"),r),Rs(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const t={animation:this.animation,runningTransition:"continue"};wE(Rs(this._zone,this._elRef.nativeElement,(u,d)=>{d&&N_(u),u.classList.add("show")},t),Rs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{xs(t,"keydown").pipe(ui(this._closed$),pr(i=>i.which===li.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Pb.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;xs(this._dialogEl.nativeElement,"mousedown").pipe(ui(this._closed$),(0,Nr.b)(()=>r=!1),wn(()=>xs(t,"mouseup").pipe(ui(this._closed$),(0,Hn.q)(1))),pr(({target:i})=>t===i)).subscribe(()=>{r=!0}),xs(t,"click").pipe(ui(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(Pb.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=ix(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Rs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(re),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&c.Gf(UF,7),2&t){let i;c.iGM(i=c.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),c.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),c.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:wF,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0,1)(2,"div",2),c.Hsn(3),c.qZA()()),2&t&&c.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),O2=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:u,paddingRight:d}=i;if(t>0){const m=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${m+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=d),i.overflow=u}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(re))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k2=(()=>{class n{constructor(t,r,i,u,d,m){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=u,this._rendererFactory=d,this._ngZone=m,this._activeWindowCmptHasChanged=new nn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new c.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const v=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=xs(e,"focusin").pipe(ui(t),(0,wt.U)(u=>u.target));xs(e,"keydown").pipe(ui(t),pr(u=>u.which===li.Tab),zT(i)).subscribe(([u,d])=>{const[m,v]=ix(e);(d===m||d===e)&&u.shiftKey&&(v.focus(),u.preventDefault()),d===v&&!u.shiftKey&&(m.focus(),u.preventDefault())}),r&&xs(e,"click").pipe(ui(t),zT(i),(0,wt.U)(u=>u[1])).subscribe(u=>u.focus())})})(0,v.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(v.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i,u){const d=u.container instanceof HTMLElement?u.container:Xp(u.container)?this._document.querySelector(u.container):this._document.body,m=this._rendererFactory.createRenderer(null,null);if(!d)throw new Error(`The specified modal container "${u.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const v=new _x,w=this._getContentRef(t,u.injector||r,i,v,u);let A=!1!==u.backdrop?this._attachBackdrop(t,d):void 0,M=this._attachWindowComponent(t,d,w),F=new x2(M,w,A,u.beforeDismiss);return this._registerModalRef(F),this._registerWindowCmpt(M),F.hidden.pipe((0,Hn.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(m.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),v.close=B=>{F.close(B)},v.dismiss=B=>{F.dismiss(B)},this._applyWindowOptions(M.instance,u),1===this._modalRefs.length&&m.addClass(this._document.body,"modal-open"),A&&A.instance&&(this._applyBackdropOptions(A.instance,u),A.changeDetectorRef.detectChanges()),M.changeDetectorRef.detectChanges(),F}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let u=t.resolveComponentFactory(M2).create(this._injector);return this._applicationRef.attachView(u.hostView),r.appendChild(u.location.nativeElement),u}_attachWindowComponent(t,r,i){let d=t.resolveComponentFactory(R2).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{Xp(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{Xp(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,u,d){return i?i instanceof c.Rgc?this._createFromTemplateRef(i,u):function jM(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(t,r,i,u,d):new rg([])}_createFromTemplateRef(t,r){const u=t.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(u),new rg([u.rootNodes],u)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new rg([[r]])}_createFromComponent(t,r,i,u,d){const m=t.resolveComponentFactory(i),v=c.zs3.create({providers:[{provide:_x,useValue:u}],parent:r}),w=m.create(v),A=w.location.nativeElement;return d.scrollable&&A.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new rg([[A]],w.hostView,w)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.z2F),c.LFG(c.zs3),c.LFG(re),c.LFG(O2),c.LFG(c.FYo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P2=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(NE))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F2=(()=>{class n{constructor(t,r,i,u){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=u}open(t,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(k2),c.LFG(P2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[F2]}),n})(),wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),Mx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),Rx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),Ox=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),Px=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),Fx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})(),Lx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();new c.OlP("live announcer delay",{providedIn:"root",factory:function K2(){return 100}});let Vx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kn]]}),n})();const Y2=[ZM,KM,JM,ex,tx,hx,mx,yx,wx,Mx,Rx,Ox,kx,Px,Fx,Lx,Vx];let J2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Y2,ZM,KM,JM,ex,tx,hx,mx,yx,wx,Mx,Rx,Ox,kx,Px,Fx,Lx,Vx]}),n})();const Bx_firebaseConfig={apiKey:"AIzaSyBrXH1vqTPveYXR2kKLEh2e35qXkdFCccM",authDomain:"crud-angular-firebase-fdfd2.firebaseapp.com",projectId:"crud-angular-firebase-fdfd2",storageBucket:"crud-angular-firebase-fdfd2.appspot.com",messagingSenderId:"424355055979",appId:"1:424355055979:web:4c80772c08ee5656dbe42e"};let Q2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[Kk]}),n.\u0275inj=c.cJS({providers:[],imports:[[xa,Zk,J2,ws.hO.initializeApp(Bx_firebaseConfig),UO,ZO,yM,vM]]}),n})();(0,c.G48)(),xl().bootstrapModule(Q2).catch(n=>console.error(n))},5867:(ut,Ee,O)=>{O.d(Ee,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=O(9681);(0,c.registerVersion)("firebase","9.6.10","app")},127:(ut,Ee,O)=>{O.d(Ee,{Z:()=>c.Z});var c=O(3942);c.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ut,Ee,O)=>{O.r(Ee);var c=O(5861),K=O(3942),k=O(2090),oe=O(9681),X=O(655),ge=O(1877),re=O(4859);const ke=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new ge.Yd("@firebase/auth");function Ke(_,...f){rt.logLevel<=ge.in.ERROR&&rt.error(`Auth (${oe.SDK_VERSION}): ${_}`,...f)}function Ce(_,...f){throw He(_,...f)}function ye(_,...f){return He(_,...f)}function be(_,f,g){const b=Object.assign(Object.assign({},Be()),{[f]:g});return new k.LL("auth","Firebase",b).create(f,{appName:_.name})}function We(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ce(_,"argument-error"),be(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(_,...f){if("string"!=typeof _){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=_.name),_._errorFactory.create(g,...b)}return fe.create(_,...f)}function te(_,f,...g){if(!_)throw He(f,...g)}function z(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ke(f),new Error(f)}function ne(_,f){_||z(f)}const me=new Map;function ie(_){ne(_ instanceof Function,"Expected a class definition");let f=me.get(_);return f?(ne(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,me.set(_,f),f)}function It(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Xt(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(f,g){this.shortDelay=f,this.longDelay=g,ne(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function ct(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(_,f){ne(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ai{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},os=new cn(3e4,6e4);function en(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Ht(_,f,g,b){return ur.apply(this,arguments)}function ur(){return(ur=(0,c.Z)(function*(_,f,g,b,N={}){return ci(_,N,(0,c.Z)(function*(){let R={},W={};b&&("GET"===f?W=b:R={body:JSON.stringify(b)});const se=(0,k.xO)(Object.assign({key:_.config.apiKey},W)).slice(1),je=yield _._getAdditionalHeaders();return je["Content-Type"]="application/json",_.languageCode&&(je["X-Firebase-Locale"]=_.languageCode),Ai.fetch()(Lr(_,_.config.apiHost,g,se),Object.assign({method:f,headers:je,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ci(_,f,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,c.Z)(function*(_,f,g){_._canInitEmulator=!1;const b=Object.assign(Object.assign({},on),f);try{const N=new as(_),R=yield Promise.race([g(),N.promise]);N.clearNetworkTimeout();const W=yield R.json();if("needConfirmation"in W)throw us(_,"account-exists-with-different-credential",W);if(R.ok&&!("errorMessage"in W))return W;{const se=R.ok?W.errorMessage:W.error.message,[je,nt]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw us(_,"credential-already-in-use",W);if("EMAIL_EXISTS"===je)throw us(_,"email-already-in-use",W);const vt=b[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw be(_,vt,nt);Ce(_,vt)}}catch(N){if(N instanceof k.ZR)throw N;Ce(_,"network-request-failed")}})).apply(this,arguments)}function Fr(_,f,g,b){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(_,f,g,b,N={}){const R=yield Ht(_,f,g,b,N);return"mfaPendingCredential"in R&&Ce(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Lr(_,f,g,b){const N=`${f}${g}?${b}`;return _.config.emulator?dn(_.config,N):`${_.config.apiScheme}://${N}`}class as{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(ye(this.auth,"network-request-failed")),os.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function us(_,f,g){const b={appName:_.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const N=ye(_,f,b);return N.customData._tokenResponse=g,N}function Jr(){return(Jr=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function tr(_,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function di(_,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function yn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function wa(){return(wa=(0,c.Z)(function*(_,f=!1){const g=(0,k.m9)(_),b=yield g.getIdToken(f),N=at(b);te(N&&N.exp&&N.auth_time&&N.iat,g.auth,"internal-error");const R="object"==typeof N.firebase?N.firebase:void 0,W=null==R?void 0:R.sign_in_provider;return{claims:N,token:b,authTime:yn($t(N.auth_time)),issuedAtTime:yn($t(N.iat)),expirationTime:yn($t(N.exp)),signInProvider:W||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(_){return 1e3*Number(_)}function at(_){const[f,g,b]=_.split(".");if(void 0===f||void 0===g||void 0===b)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(g);return N?JSON.parse(N):(Ke("Failed to decode base64 JWT payload"),null)}catch(N){return Ke("Caught error parsing JWT payload as JSON",N),null}}function lr(_,f){return $i.apply(this,arguments)}function $i(){return($i=(0,c.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof k.ZR&&Gt(b)&&_.auth.currentUser===_&&(yield _.auth.signOut()),b}})).apply(this,arguments)}function Gt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class po{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const N=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(_){return ht.apply(this,arguments)}function ht(){return(ht=(0,c.Z)(function*(_){var f;const g=_.auth,b=yield _.getIdToken(),N=yield lr(_,di(g,{idToken:b}));te(null==N?void 0:N.users.length,g,"internal-error");const R=N.users[0];_._notifyReloadListener(R);const W=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?Ie(R.providerUserInfo):[],se=Ye(_.providerData,W),vt=!!_.isAnonymous&&!(_.email&&R.passwordHash||(null==se?void 0:se.length)),lt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:se,metadata:new br(R.createdAt,R.lastLoginAt),isAnonymous:vt};Object.assign(_,lt)})).apply(this,arguments)}function Bt(){return(Bt=(0,c.Z)(function*(_){const f=(0,k.m9)(_);yield cr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ye(_,f){return[..._.filter(b=>!f.some(N=>N.providerId===b.providerId)),...f]}function Ie(_){return _.map(f=>{var{providerId:g}=f,b=(0,X._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function ft(){return(ft=(0,c.Z)(function*(_,f){const g=yield ci(_,{},(0,c.Z)(function*(){const b=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:N,apiKey:R}=_.config,W=Lr(_,N,"/v1/token",`key=${R}`),se=yield _._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",Ai.fetch()(W,{method:"POST",headers:se,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Dt(_){const f=at(_);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,c.Z)(function*(){return te(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,c.Z)(function*(){const{accessToken:N,refreshToken:R,expiresIn:W}=yield function tt(_,f){return ft.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(N,R,Number(W))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:N,expirationTime:R}=g,W=new Ut;return b&&(te("string"==typeof b,"internal-error",{appName:f}),W.refreshToken=b),N&&(te("string"==typeof N,"internal-error",{appName:f}),W.accessToken=N),R&&(te("number"==typeof R,"internal-error",{appName:f}),W.expirationTime=R),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ut,this.toJSON())}_performRefresh(){return z("not implemented")}}function Ft(_,f){te("string"==typeof _||void 0===_,"internal-error",{appName:f})}class j{constructor(f){var{uid:g,auth:b,stsTokenManager:N}=f,R=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new po(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new br(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const b=yield lr(g,g.stsTokenManager.getToken(g.auth,f));return te(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function ks(_){return wa.apply(this,arguments)}(this,f)}reload(){return function Dr(_){return Bt.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new j(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,c.Z)(function*(){let N=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),N=!0),g&&(yield cr(b)),yield b.auth._persistUserIfCurrent(b),N&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield lr(f,function dt(_,f){return Jr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,N,R,W,se,je,nt,vt;const lt=null!==(b=g.displayName)&&void 0!==b?b:void 0,Sn=null!==(N=g.email)&&void 0!==N?N:void 0,Xi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,cc=null!==(W=g.photoURL)&&void 0!==W?W:void 0,ju=null!==(se=g.tenantId)&&void 0!==se?se:void 0,Gu=null!==(je=g._redirectEventId)&&void 0!==je?je:void 0,Tf=null!==(nt=g.createdAt)&&void 0!==nt?nt:void 0,oy=null!==(vt=g.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:la,emailVerified:Pd,isAnonymous:Fd,providerData:Af,stsTokenManager:Ld}=g;te(la&&Ld,f,"internal-error");const ri=Ut.fromJSON(this.name,Ld);te("string"==typeof la,f,"internal-error"),Ft(lt,f.name),Ft(Sn,f.name),te("boolean"==typeof Pd,f,"internal-error"),te("boolean"==typeof Fd,f,"internal-error"),Ft(Xi,f.name),Ft(cc,f.name),Ft(ju,f.name),Ft(Gu,f.name),Ft(Tf,f.name),Ft(oy,f.name);const Nf=new j({uid:la,auth:f,email:Sn,emailVerified:Pd,displayName:lt,isAnonymous:Fd,photoURL:cc,phoneNumber:Xi,tenantId:ju,stsTokenManager:ri,createdAt:Tf,lastLoginAt:oy});return Af&&Array.isArray(Af)&&(Nf.providerData=Af.map(Og=>Object.assign({},Og))),Gu&&(Nf._redirectEventId=Gu),Nf}static _fromIdTokenResponse(f,g,b=!1){return(0,c.Z)(function*(){const N=new Ut;N.updateFromServerResponse(g);const R=new j({uid:g.localId,auth:f,stsTokenManager:N,isAnonymous:b});return yield cr(R),R})()}}const $=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,b){var N=this;return(0,c.Z)(function*(){N.storage[g]=b})()}_get(g){var b=this;return(0,c.Z)(function*(){const N=b.storage[g];return void 0===N?null:N})()}_remove(g){var b=this;return(0,c.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return _.type="NONE",_})();function de(_,f,g){return`firebase:${_}:${f}:${g}`}class Y{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:N,name:R}=this.auth;this.fullUserKey=de(this.userKey,N.apiKey,R),this.fullPersistenceKey=de("persistence",N.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?j._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Y(ie($),f,b);const N=(yield Promise.all(g.map(function(){var nt=(0,c.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let R=N[0]||ie($);const W=de(b,f.config.apiKey,f.name);let se=null;for(const nt of g)try{const vt=yield nt._get(W);if(vt){const lt=j._fromJSON(f,vt);nt!==R&&(se=lt),R=nt;break}}catch(vt){}const je=N.filter(nt=>nt._shouldAllowMigration);return R._shouldAllowMigration&&je.length?(R=je[0],se&&(yield R._set(W,se.toJSON())),yield Promise.all(g.map(function(){var nt=(0,c.Z)(function*(vt){if(vt!==R)try{yield vt._remove(W)}catch(lt){}});return function(vt){return nt.apply(this,arguments)}}())),new Y(R,f,b)):new Y(R,f,b)})()}}function Ue(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Wt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(yt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Mt(f))return"Blackberry";if(hn(f))return"Webos";if(Yt(f))return"Safari";if((f.includes("chrome/")||wr(f))&&!f.includes("edge/"))return"Chrome";if(In(f))return"Android";{const b=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function yt(_=(0,k.z$)()){return/firefox\//i.test(_)}function Yt(_=(0,k.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function wr(_=(0,k.z$)()){return/crios\//i.test(_)}function Wt(_=(0,k.z$)()){return/iemobile/i.test(_)}function In(_=(0,k.z$)()){return/android/i.test(_)}function Mt(_=(0,k.z$)()){return/blackberry/i.test(_)}function hn(_=(0,k.z$)()){return/webos/i.test(_)}function rr(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)}function ls(_=(0,k.z$)()){return rr(_)||In(_)||hn(_)||Mt(_)||/windows phone/i.test(_)||Wt(_)}function Ca(_,f=[]){let g;switch(_){case"Browser":g=Ue((0,k.z$)());break;case"Worker":g=`${Ue((0,k.z$)())}-${_}`;break;default:g=_}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${b}`}class hi{constructor(f,g,b){this.app=f,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kt(this),this.idTokenSubscription=new kt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var N,R;if(!b._deleted&&(b.persistenceManager=yield Y.create(b,f),!b._deleted)){if(null===(N=b._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(W){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(R=b.currentUser)||void 0===R?void 0:R.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var b;let N=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,W=null==N?void 0:N._redirectEventId,se=yield g.tryRedirectSignIn(f);(!R||R===W)&&(null==se?void 0:se.user)&&(N=se.user)}return N?N._redirectEventId?(te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)):g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(N){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield cr(f)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function _t(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const b=f?(0,k.m9)(f):null;return b&&te(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){if(!g._deleted)return f&&te(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,c.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,c.Z)(function*(){const N=yield b.getOrInitRedirectPersistenceManager(g);return null===f?N.removeCurrentUser():N.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&ie(f)||g._popupRedirectResolver;te(b,g,"argument-error"),g.redirectPersistenceManager=yield Y.create(g,[ie(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var b,N;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(N=g.redirectUser)||void 0===N?void 0:N._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,N){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),W=this._isInitialized?Promise.resolve():this._initializationPromise;return te(W,this,"internal-error"),W.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,b,N):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ca(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const N=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return N&&(b["X-Firebase-Client"]=N),b})()}}function Pe(_){return(0,k.m9)(_)}class kt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dr(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Bn(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class an{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return z("not implemented")}_getIdTokenResponse(f){return z("not implemented")}_linkToIdToken(f,g){return z("not implemented")}_getReauthenticationResolver(f){return z("not implemented")}}function On(_,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:resetPassword",en(_,f))})).apply(this,arguments)}function Nt(_,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function mo(_,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:update",en(_,f))})).apply(this,arguments)}function kn(){return(kn=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithPassword",en(_,f))})).apply(this,arguments)}function cs(_,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:sendOobCode",en(_,f))})).apply(this,arguments)}function Er(_,f){return un.apply(this,arguments)}function un(){return(un=(0,c.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function cu(_,f){return du.apply(this,arguments)}function du(){return(du=(0,c.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function Ni(_,f){return fi.apply(this,arguments)}function fi(){return(fi=(0,c.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function td(_,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(_,f){return cs(_,f)})).apply(this,arguments)}function Qr(){return(Qr=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,f))})).apply(this,arguments)}function Zo(){return(Zo=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,f))})).apply(this,arguments)}class fu extends an{constructor(f,g,b,N=null){super("password",b),this._email=f,this._password=g,this._tenantId=N}static _fromEmailAndPassword(f,g){return new fu(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new fu(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function Ls(_,f){return kn.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function hu(_,f){return Qr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ce(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return Nt(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function zh(_,f){return Zo.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:Ce(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Un(_,f){return nd.apply(this,arguments)}function nd(){return(nd=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithIdp",en(_,f))})).apply(this,arguments)}class hs extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new hs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:N}=g,R=(0,X._T)(g,["providerId","signInMethod"]);if(!b||!N)return null;const W=new hs(b,N);return W.idToken=R.idToken||void 0,W.accessToken=R.accessToken||void 0,W.secret=R.secret,W.nonce=R.nonce,W.pendingToken=R.pendingToken||null,W}_getIdTokenResponse(f){return Un(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Un(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Un(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,k.xO)(g)}return f}}function ug(_,f){return rd.apply(this,arguments)}function rd(){return(rd=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:sendVerificationCode",en(_,f))})).apply(this,arguments)}function Bs(){return(Bs=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,f))})).apply(this,arguments)}function id(){return(id=(0,c.Z)(function*(_,f){const g=yield Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,f));if(g.temporaryProof)throw us(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const cg={USER_NOT_FOUND:"user-not-found"};function sd(){return(sd=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),cg)})).apply(this,arguments)}class Ko extends an{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ko({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ko({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Dl(_,f){return Bs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function lg(_,f){return id.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function dg(_,f){return sd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:N}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:N}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:N,temporaryProof:R}=f;return b||g||N||R?new Ko({verificationId:g,verificationCode:b,phoneNumber:N,temporaryProof:R}):null}}class _o{constructor(f){var g,b,N,R,W,se;const je=(0,k.zd)((0,k.pd)(f)),nt=null!==(g=je.apiKey)&&void 0!==g?g:null,vt=null!==(b=je.oobCode)&&void 0!==b?b:null,lt=function x_(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=je.mode)&&void 0!==N?N:null);te(nt&&vt&&lt,"argument-error"),this.apiKey=nt,this.operation=lt,this.code=vt,this.continueUrl=null!==(R=je.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(W=je.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(se=je.tenantId)&&void 0!==se?se:null}static parseLink(f){const g=function pu(_){const f=(0,k.zd)((0,k.pd)(_)).link,g=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,b=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(b?(0,k.zd)((0,k.pd)(b)).link:null)||b||g||f||_}(f);try{return new _o(g)}catch(b){return null}}}let wl=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,b){return fu._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const N=_o.parseLink(b);return te(N,"argument-error"),fu._fromEmailAndCode(g,N.code,N.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Us{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Xr extends Us{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Yo extends Xr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return te("providerId"in g&&"signInMethod"in g,"argument-error"),hs._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Yo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Yo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:N,pendingToken:R,nonce:W,providerId:se}=f;if(!b&&!N&&!g&&!R||!se)return null;try{return new Yo(se)._credential({idToken:g,accessToken:b,nonce:W,pendingToken:R})}catch(je){return null}}}let yo=(()=>{class _ extends Xr{constructor(){super("facebook.com")}static credential(g){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(b){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ta=(()=>{class _ extends Xr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:N}=g;if(!b&&!N)return null;try{return _.credential(b,N)}catch(R){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),od=(()=>{class _ extends Xr{constructor(){super("github.com")}static credential(g){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(b){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Kn extends an{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Un(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Un(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Un(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:N,pendingToken:R}=g;return b&&N&&R&&b===N?new Kn(b,R):null}static _create(f,g){return new Kn(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pi extends Us{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return pi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return pi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Kn.fromJSON(f);return te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return Kn._create(b,g)}catch(N){return null}}}let gu=(()=>{class _ extends Xr{constructor(){super("twitter.com")}static credential(g,b){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:N}=g;if(!b||!N)return null;try{return _.credential(b,N)}catch(R){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function mu(_,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signUp",en(_,f))})).apply(this,arguments)}class hr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,N=!1){return(0,c.Z)(function*(){const R=yield j._fromIdTokenResponse(f,b,N),W=Zh(b);return new hr({user:R,providerId:W,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const N=Zh(b);return new hr({user:f,providerId:N,_tokenResponse:b,operationType:g})})()}}function Zh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ad(){return(ad=(0,c.Z)(function*(_){var f;const g=Pe(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new hr({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield mu(g,{returnSecureToken:!0}),N=yield hr._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(N.user),N})).apply(this,arguments)}class yu extends k.ZR{constructor(f,g,b,N){var R;super(g.code,g.message),this.operationType=b,this.user=N,Object.setPrototypeOf(this,yu.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,N){return new yu(f,g,b,N)}}function vu(_,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?yu._fromErrorAndOperation(_,R,f,b):R})}function fs(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function El(){return(El=(0,c.Z)(function*(_,f){const g=(0,k.m9)(_);yield Gs(!0,g,f);const{providerUserInfo:b}=yield tr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),N=fs(b||[]);return g.providerData=g.providerData.filter(R=>N.has(R.providerId)),N.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function mn(_,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,c.Z)(function*(_,f,g=!1){const b=yield lr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return hr._forOperation(_,"link",b)})).apply(this,arguments)}function Gs(_,f,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,c.Z)(function*(_,f,g){yield cr(f);const N=!1===_?"provider-already-linked":"no-such-provider";te(fs(f.providerData).has(g)===_,f.auth,N)})).apply(this,arguments)}function ud(_,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,c.Z)(function*(_,f,g=!1){const{auth:b}=_,N="reauthenticate";try{const R=yield lr(_,vu(b,N,f,_),g);te(R.idToken,b,"internal-error");const W=at(R.idToken);te(W,b,"internal-error");const{sub:se}=W;return te(_.uid===se,b,"user-mismatch"),hr._forOperation(_,N,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ce(b,"user-mismatch"),R}})).apply(this,arguments)}function bo(_,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,c.Z)(function*(_,f,g=!1){const b="signIn",N=yield vu(_,b,f),R=yield hr._fromIdTokenResponse(_,b,N);return g||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Pn(_,f){return Na.apply(this,arguments)}function Na(){return(Na=(0,c.Z)(function*(_,f){return bo(Pe(_),f)})).apply(this,arguments)}function Si(_,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,c.Z)(function*(_,f){const g=(0,k.m9)(_);return yield Gs(!1,g,f.providerId),mn(g,f)})).apply(this,arguments)}function Hs(_,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,c.Z)(function*(_,f){return ud((0,k.m9)(_),f)})).apply(this,arguments)}function bu(_,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,c.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithCustomToken",en(_,f))})).apply(this,arguments)}function Ws(){return(Ws=(0,c.Z)(function*(_,f){const g=Pe(_),b=yield bu(g,{token:f,returnSecureToken:!0}),N=yield hr._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(N.user),N})).apply(this,arguments)}class pt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Du._fromServerResponse(f,g):Ce(f,"internal-error")}}class Du extends pt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Du(g)}}function Sa(_,f,g){var b;te((null===(b=g.url)||void 0===b?void 0:b.length)>0,_,"invalid-continue-uri"),te(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(te(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(te(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Eu(){return(Eu=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_),N={requestType:"PASSWORD_RESET",email:f};g&&Sa(b,N,g),yield cu(b,N)})).apply(this,arguments)}function Cl(){return(Cl=(0,c.Z)(function*(_,f,g){yield On((0,k.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function we(){return(we=(0,c.Z)(function*(_,f){yield mo((0,k.m9)(_),{oobCode:f})})).apply(this,arguments)}function Lt(_,f){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,c.Z)(function*(_,f){const g=(0,k.m9)(_),b=yield On(g,{oobCode:f}),N=b.requestType;switch(te(N,g,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(b.mfaInfo,g,"internal-error");default:te(b.email,g,"internal-error")}let R=null;return b.mfaInfo&&(R=pt._fromServerResponse(Pe(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:R},operation:N}})).apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(_,f){const{data:g}=yield Lt((0,k.m9)(_),f);return g.email})).apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(_,f,g){const b=Pe(_),N=yield mu(b,{returnSecureToken:!0,email:f,password:g}),R=yield hr._fromIdTokenResponse(b,"signIn",N);return yield b._updateCurrentUser(R.user),R})).apply(this,arguments)}function ld(){return(ld=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_),N={requestType:"EMAIL_SIGNIN",email:f};te(g.handleCodeInApp,b,"argument-error"),g&&Sa(b,N,g),yield Ni(b,N)})).apply(this,arguments)}function zs(){return(zs=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_),N=wl.credentialWithLink(f,g||It());return te(N._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Pn(b,N)})).apply(this,arguments)}function fr(_,f){return gi.apply(this,arguments)}function gi(){return(gi=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:createAuthUri",en(_,f))})).apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(_,f){const b={identifier:f,continueUri:Xt()?It():"http://localhost"},{signinMethods:N}=yield fr((0,k.m9)(_),b);return N||[]})).apply(this,arguments)}function Ml(){return(Ml=(0,c.Z)(function*(_,f){const g=(0,k.m9)(_),N={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Sa(g.auth,N,f);const{email:R}=yield Er(g.auth,N);R!==_.email&&(yield _.reload())})).apply(this,arguments)}function Nu(){return(Nu=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&Sa(b.auth,R,g);const{email:W}=yield td(b.auth,R);W!==_.email&&(yield _.reload())})).apply(this,arguments)}function xl(_,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,c.Z)(function*(_,f){return Ht(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rl(){return(Rl=(0,c.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,k.m9)(_),R={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},W=yield lr(b,xl(b.auth,R));b.displayName=W.displayName||null,b.photoURL=W.photoUrl||null;const se=b.providerData.find(({providerId:je})=>"password"===je);se&&(se.displayName=b.displayName,se.photoURL=b.photoURL),yield b._updateTokensIfNecessary(W)})).apply(this,arguments)}function kl(_,f,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(_,f,g){const{auth:b}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const W=yield lr(_,Nt(b,R));yield _._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class wo{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class hd extends wo{constructor(f,g,b,N){super(f,g,b),this.username=N}}class fd extends wo{constructor(f,g){super(f,"facebook.com",g)}}class Eo extends hd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Zs extends wo{constructor(f,g){super(f,"google.com",g)}}class Pl extends hd{constructor(f,g,b){super(f,"twitter.com",g,b)}}function Tr(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function dd(_){var f,g;if(!_)return null;const{providerId:b}=_,N=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!b&&(null==_?void 0:_.idToken)){const W=null===(g=null===(f=at(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(W)return new wo(R,"anonymous"!==W&&"custom"!==W?W:null)}if(!b)return null;switch(b){case"facebook.com":return new fd(R,N);case"github.com":return new Eo(R,N);case"google.com":return new Zs(R,N);case"twitter.com":return new Pl(R,N,_.screenName||null);case"custom":case"anonymous":return new wo(R,null);default:return new wo(R,b,N)}}(g)}class gs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new gs("enroll",f)}static _fromMfaPendingCredential(f){return new gs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return gs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return gs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ra{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=Pe(f),N=g.customData._serverResponse,R=(N.mfaInfo||[]).map(se=>pt._fromServerResponse(b,se));te(N.mfaPendingCredential,b,"internal-error");const W=gs._fromMfaPendingCredential(N.mfaPendingCredential);return new Ra(W,R,function(){var se=(0,c.Z)(function*(je){const nt=yield je._process(b,W);delete N.mfaInfo,delete N.mfaPendingCredential;const vt=Object.assign(Object.assign({},N),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(g.operationType){case"signIn":const lt=yield hr._fromIdTokenResponse(b,g.operationType,vt);return yield b._updateCurrentUser(lt.user),lt;case"reauthenticate":return te(g.user,b,"internal-error"),hr._forOperation(g.user,g.operationType,vt);default:Ce(b,"internal-error")}});return function(je){return se.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function jn(_,f){return Ht(_,"POST","/v2/accounts/mfaEnrollment:start",en(_,f))}class ms{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>pt._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new ms(f)}getSession(){var f=this;return(0,c.Z)(function*(){return gs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,c.Z)(function*(){const N=f,R=yield b.getSession(),W=yield lr(b.user,N._process(b.user.auth,R,g));return yield b.user._updateTokensIfNecessary(W),b.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const b="string"==typeof f?f:f.uid,N=yield g.user.getIdToken(),R=yield lr(g.user,function fg(_,f){return Ht(_,"POST","/v2/accounts/mfaEnrollment:withdraw",en(_,f))}(g.user.auth,{idToken:N,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:W})=>W!==b),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const ea=new WeakMap,Vl="__sak";class Co{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Vl,"1"),this.storage.removeItem(Vl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dn=(()=>{class _ extends Co{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function md(){const _=(0,k.z$)();return Yt(_)||rr(_)}()&&function Zn(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ls(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const N=this.storage.getItem(b),R=this.localCache[b];N!==R&&g(b,R,N)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((se,je,nt)=>{this.notifyListeners(se,nt)});const N=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(N);if(g.newValue!==se)null!==g.newValue?this.storage.setItem(N,g.newValue):this.storage.removeItem(N);else if(this.localCache[N]===g.newValue&&!b)return}const R=()=>{const se=this.storage.getItem(N);!b&&this.localCache[N]===se||this.notifyListeners(N,se)},W=this.storage.getItem(N);!function Ea(){return(0,k.w1)()&&10===document.documentMode}()||W===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,b){this.localCache[g]=b;const N=this.listeners[g];if(N)for(const R of Array.from(N))R(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var N=()=>super._set,R=this;return(0,c.Z)(function*(){yield N().call(R,g,b),R.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,N=this;return(0,c.Z)(function*(){const R=yield b().call(N,g);return N.localCache[g]=JSON.stringify(R),R})()}_remove(g){var b=()=>super._remove,N=this;return(0,c.Z)(function*(){yield b().call(N,g),delete N.localCache[g]})()}}return _.type="LOCAL",_})(),nn=(()=>{class _ extends Co{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return _.type="SESSION",_})();let Gn=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(R=>R.isListeningto(g));if(b)return b;const N=new _(g);return this.receivers.push(N),N}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,c.Z)(function*(){const N=g,{eventId:R,eventType:W,data:se}=N.data,je=b.handlersMap[W];if(!(null==je?void 0:je.size))return;N.ports[0].postMessage({status:"ack",eventId:R,eventType:W});const nt=Array.from(je).map(function(){var lt=(0,c.Z)(function*(Sn){return Sn(N.origin,se)});return function(Sn){return lt.apply(this,arguments)}}()),vt=yield function Ln(_){return Promise.all(_.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(nt);N.ports[0].postMessage({status:"done",eventId:R,eventType:W,response:vt})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function ta(_="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return _+g}class _d{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var N=this;return(0,c.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let W,se;return new Promise((je,nt)=>{const vt=ta("",20);R.port1.start();const lt=setTimeout(()=>{nt(new Error("unsupported_event"))},b);se={messageChannel:R,onMessage(Sn){const Xi=Sn;if(Xi.data.eventId===vt)switch(Xi.data.status){case"ack":clearTimeout(lt),W=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),je(Xi.data.response);break;default:clearTimeout(lt),clearTimeout(W),nt(new Error("invalid_response"))}}},N.handlers.add(se),R.port1.addEventListener("message",se.onMessage),N.target.postMessage({eventType:f,eventId:vt,data:g},[R.port2])}).finally(()=>{se&&N.removeMessageHandler(se)})})()}}function pn(){return window}function xi(){return void 0!==pn().WorkerGlobalScope&&"function"==typeof pn().importScripts}function ni(){return(ni=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Bl="firebaseLocalStorageDb",Io="firebaseLocalStorage",_n="fbase_key";class _s{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ys(_,f){return _.transaction([Io],f?"readwrite":"readonly").objectStore(Io)}function Js(){const _=indexedDB.open(Bl,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const b=_.result;try{b.createObjectStore(Io,{keyPath:_n})}catch(N){g(N)}}),_.addEventListener("success",(0,c.Z)(function*(){const b=_.result;b.objectStoreNames.contains(Io)?f(b):(b.close(),yield function mi(){const _=indexedDB.deleteDatabase(Bl);return new _s(_).toPromise()}(),f(yield Js()))}))})}function _i(_,f,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,c.Z)(function*(_,f,g){const b=Ys(_,!0).put({[_n]:f,value:g});return new _s(b).toPromise()})).apply(this,arguments)}function Qs(){return(Qs=(0,c.Z)(function*(_,f){const g=Ys(_,!1).get(f),b=yield new _s(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function qi(_,f){const g=Ys(_,!0).delete(f);return new _s(g).toPromise()}const Ri=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield Js()),g.db})()}_withRetries(g){var b=this;return(0,c.Z)(function*(){let N=0;for(;;)try{const R=yield b._openDb();return yield g(R)}catch(R){if(N++>3)throw R;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return xi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=Gn._getInstance(function yd(){return xi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(N,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(N,R){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(N,R){return["keyChanged"]});return function(N,R){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var b,N;if(g.activeServiceWorker=yield function Mu(){return ni.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new _d(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(b=R[0])||void 0===b?void 0:b.fulfilled)&&(null===(N=R[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function wt(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Js();return yield _i(g,Vl,"1"),yield qi(g,Vl),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var N=this;return(0,c.Z)(function*(){return N._withPendingWrite((0,c.Z)(function*(){return yield N._withRetries(R=>_i(R,g,b)),N.localCache[g]=b,N.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,c.Z)(function*(){const N=yield b._withRetries(R=>function jl(_,f){return Qs.apply(this,arguments)}(R,g));return b.localCache[g]=N,N})()}_remove(g){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(N=>qi(N,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const b=yield g._withRetries(W=>{const se=Ys(W,!1).getAll();return new _s(se).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const N=[],R=new Set;for(const{fbase_key:W,value:se}of b)R.add(W),JSON.stringify(g.localCache[W])!==JSON.stringify(se)&&(g.notifyListeners(W,se),N.push(W));for(const W of Object.keys(g.localCache))g.localCache[W]&&!R.has(W)&&(g.notifyListeners(W,null),N.push(W));return N})()}notifyListeners(g,b){this.localCache[g]=b;const N=this.listeners[g];if(N)for(const R of Array.from(N))R(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Xs(_,f){return Ht(_,"POST","/v2/accounts/mfaSignIn:start",en(_,f))}function Oi(){return(Oi=(0,c.Z)(function*(_){return(yield Ht(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wn(_){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",_),b.onload=f,b.onerror=N=>{const R=ye("internal-error");R.customData=N,g(R)},b.type="text/javascript",b.charset="UTF-8",function vd(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(b)})}function Hn(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ar=1e12;class pr{constructor(f){this.auth=f,this.counter=Ar,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Zi(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||Ar;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ar))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var b;return null===(b=g._widgets.get(f||Ar))||void 0===b||b.execute(),""})()}}class Zi{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof f?document.getElementById(f):f;te(N,"argument-error",{appName:g}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bn(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<_;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const eo=Hn("rcb"),bd=new cn(3e4,6e4);class gg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!pn().grecaptcha}load(f,g=""){return te(function mg(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(pn().grecaptcha):new Promise((b,N)=>{const R=pn().setTimeout(()=>{N(ye(f,"network-request-failed"))},bd.get());pn()[eo]=()=>{pn().clearTimeout(R),delete pn()[eo];const se=pn().grecaptcha;if(!se)return void N(ye(f,"internal-error"));const je=se.render;se.render=(nt,vt)=>{const lt=je(nt,vt);return this.counter++,lt},this.hostLanguage=g,b(se)},wn(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:eo,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),N(ye(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!pn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _g{load(f){return(0,c.Z)(function*(){return new pr(f)})()}clearedOneInstance(){}}const to="recaptcha",Nr={theme:"light",type:"image"};class yg{constructor(f,g=Object.assign({},Nr),b){this.parameters=g,this.type=to,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pe(b),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof f?document.getElementById(f):f;te(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _g:new gg,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(R=>{const W=se=>{!se||(f.tokenChangeListeners.delete(W),R(se))};f.tokenChangeListeners.add(W),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=pn()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){te(Xt()&&!xi(),f.auth,"internal-error"),yield function no(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ir(_){return Oi.apply(this,arguments)}(f.auth);te(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ys{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ko._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function En(){return(En=(0,c.Z)(function*(_,f,g){const b=Pe(_),N=yield Sr(b,f,(0,k.m9)(g));return new ys(N,R=>Pn(b,R))})).apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_);yield Gs(!1,b,"phone");const N=yield Sr(b.auth,f,(0,k.m9)(g));return new ys(N,R=>Si(b,R))})).apply(this,arguments)}function $l(){return($l=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_),N=yield Sr(b.auth,f,(0,k.m9)(g));return new ys(N,R=>Hs(b,R))})).apply(this,arguments)}function Sr(_,f,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,c.Z)(function*(_,f,g){var b;const N=yield g.verify();try{let R;if(te("string"==typeof N,_,"argument-error"),te(g.type===to,_,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const W=R.session;if("phoneNumber"in R)return te("enroll"===W.type,_,"internal-error"),(yield jn(_,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{te("signin"===W.type,_,"internal-error");const se=(null===(b=R.multiFactorHint)||void 0===b?void 0:b.uid)||R.multiFactorUid;return te(se,_,"missing-multi-factor-info"),(yield Xs(_,{mfaPendingCredential:W.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield ug(_,{phoneNumber:R.phoneNumber,recaptchaToken:N});return W}}finally{g._reset()}})).apply(this,arguments)}function vs(){return(vs=(0,c.Z)(function*(_,f){yield mn((0,k.m9)(_),f)})).apply(this,arguments)}let ki=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Pe(g)}verifyPhoneNumber(g,b){return Sr(this.auth,g,(0,k.m9)(b))}static credential(g,b){return Ko._fromVerification(g,b)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:N}=g;return b&&N?Ko._fromTokenResponse(b,N):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Ki(_,f){return f?ie(f):(te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ka extends an{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Un(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Un(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Un(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function zl(_){return bo(_.auth,new ka(_),_.bypassAuthState)}function ql(_){const{auth:f,user:g}=_;return te(g,f,"internal-error"),ud(g,new ka(_),_.bypassAuthState)}function Pt(_){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,c.Z)(function*(_){const{auth:f,user:g}=_;return te(g,f,"internal-error"),mn(g,new ka(_),_.bypassAuthState)})).apply(this,arguments)}class Yn{constructor(f,g,b,N,R=!1){this.auth=f,this.resolver=b,this.user=N,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(b,N){f.pendingPromise={resolve:b,reject:N};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(b,N){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:N,postBody:R,tenantId:W,error:se,type:je}=f;if(se)return void g.reject(se);const nt={auth:g.auth,requestUri:b,sessionId:N,tenantId:W||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(je)(nt))}catch(vt){g.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zl;case"linkViaPopup":case"linkViaRedirect":return Pt;case"reauthViaPopup":case"reauthViaRedirect":return ql;default:Ce(this.auth,"internal-error")}}resolve(f){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kl=new cn(2e3,1e4);function Dd(){return(Dd=(0,c.Z)(function*(_,f,g){const b=Pe(_);We(_,f,Us);const N=Ki(b,g);return new Ji(b,"signInViaPopup",f,N).executeNotNull()})).apply(this,arguments)}function Ou(){return(Ou=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_);We(b.auth,f,Us);const N=Ki(b.auth,g);return new Ji(b.auth,"reauthViaPopup",f,N,b).executeNotNull()})).apply(this,arguments)}function ku(){return(ku=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_);We(b.auth,f,Us);const N=Ki(b.auth,g);return new Ji(b.auth,"linkViaPopup",f,N,b).executeNotNull()})).apply(this,arguments)}let Ji=(()=>{class _ extends Yn{constructor(g,b,N,R,W){super(g,b,R,W),this.provider=N,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const b=yield g.execute();return te(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,c.Z)(function*(){ne(1===g.filter.length,"Popup operations only handle one event");const b=ta();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(N=>{g.reject(N)}),g.resolver._isIframeWebStorageSupported(g.auth,N=>{N||g.reject(ye(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,N;this.pollId=(null===(N=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Kl.get())};g()}}return _.currentPopupAction=null,_})();const Qi=new Map;class Jn extends Yn{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let b=Qi.get(g.auth._key());if(!b){try{const R=(yield function bi(_,f){return Yl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(R)}catch(N){b=()=>Promise.reject(N)}Qi.set(g.auth._key(),b)}return g.bypassAuthState||Qi.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const N=yield b.auth._redirectUserForId(f.eventId);if(N)return b.user=N,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Yl(){return(Yl=(0,c.Z)(function*(_,f){const g=I(f),b=C(_);if(!(yield b._isAvailable()))return!1;const N="true"===(yield b._get(g));return yield b._remove(g),N})).apply(this,arguments)}function Ao(_,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(_,f){return C(_)._set(I(f),"true")})).apply(this,arguments)}function C(_){return ie(_._redirectPersistence)}function I(_){return de("pendingRedirect",_.config.apiKey,_.name)}function q(){return(q=(0,c.Z)(function*(_,f,g){const b=Pe(_);We(_,f,Us);const N=Ki(b,g);return yield Ao(N,b),N._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Se(){return(Se=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_);We(b.auth,f,Us);const N=Ki(b.auth,g);yield Ao(N,b.auth);const R=yield No(b);return N._openRedirect(b.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function xt(){return(xt=(0,c.Z)(function*(_,f,g){const b=(0,k.m9)(_);We(b.auth,f,Us);const N=Ki(b.auth,g);yield Gs(!1,b,f.providerId),yield Ao(N,b.auth);const R=yield No(b);return N._openRedirect(b.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function $n(){return($n=(0,c.Z)(function*(_,f){return yield Pe(_)._initializationPromise,Nn(_,f,!1)})).apply(this,arguments)}function Nn(_,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,c.Z)(function*(_,f,g=!1){const b=Pe(_),N=Ki(b,f),W=yield new Jn(b,N,g).execute();return W&&!g&&(delete W.user._redirectEventId,yield b._persistUserIfCurrent(W.user),yield b._setRedirectUser(null,f)),W})).apply(this,arguments)}function No(_){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(_){const f=ta(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Pi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Jl(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ed(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!Ed(f)){const N=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(ye(this.auth,N))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(So(f))}saveEventToCache(f){this.cachedEventUids.add(So(f)),this.lastProcessedEventTime=Date.now()}}function So(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Ed({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ql(_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,c.Z)(function*(_,f={}){return Ht(_,"GET","/v1/projects",f)})).apply(this,arguments)}const bg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O_=/^https?/;function bs(){return(bs=(0,c.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Ql(_);for(const g of f)try{if(Xl(g))return}catch(b){}Ce(_,"unauthorized-domain")})).apply(this,arguments)}function Xl(_){const f=It(),{protocol:g,hostname:b}=new URL(f);if(_.startsWith("chrome-extension://")){const W=new URL(_);return""===W.hostname&&""===b?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&W.hostname===b}if(!O_.test(g))return!1;if(bg.test(_))return b===_;const N=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(b)}const P_=new cn(3e4,6e4);function F_(){const _=pn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Cd=null;function L_(_){return Cd=Cd||function Dg(_){return new Promise((f,g)=>{var b,N,R;function W(){F_(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{F_(),g(ye(_,"network-request-failed"))},timeout:P_.get()})}if(null===(N=null===(b=pn().gapi)||void 0===b?void 0:b.iframes)||void 0===N?void 0:N.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=pn().gapi)||void 0===R?void 0:R.load)){const se=Hn("iframefcb");return pn()[se]=()=>{gapi.load?W():g(ye(_,"network-request-failed"))},wn(`https://apis.google.com/js/api.js?onload=${se}`).catch(je=>g(je))}W()}}).catch(f=>{throw Cd=null,f})}(_),Cd}const Qh=new cn(5e3,15e3),xo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Id=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fa(_){const f=_.config;te(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?dn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:_.name,v:oe.SDK_VERSION},N=Id.get(_.config.apiHost);N&&(b.eid=N);const R=_._getFrameworks();return R.length&&(b.fw=R.join(",")),`${g}?${(0,k.xO)(b).slice(1)}`}function Ro(){return Ro=(0,c.Z)(function*(_){const f=yield L_(_),g=pn().gapi;return te(g,_,"internal-error"),f.open({where:document.body,url:Fa(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xo,dontclear:!0},b=>new Promise(function(){var N=(0,c.Z)(function*(R,W){yield b.restyle({setHideOnLeave:!1});const se=ye(_,"network-request-failed"),je=pn().setTimeout(()=>{W(se)},Qh.get());function nt(){pn().clearTimeout(je),R(b)}b.ping(nt).then(nt,()=>{W(se)})});return function(R,W){return N.apply(this,arguments)}}()))}),Ro.apply(this,arguments)}const B_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function nf(_,f,g,b,N,R){te(_.config.authDomain,_,"auth-domain-config-required"),te(_.config.apiKey,_,"invalid-api-key");const W={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:b,v:oe.SDK_VERSION,eventId:N};if(f instanceof Us){f.setDefaultLanguage(_.languageCode),W.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(W.customParameters=JSON.stringify(f.getCustomParameters()));for(const[je,nt]of Object.entries(R||{}))W[je]=nt}if(f instanceof Xr){const je=f.getScopes().filter(nt=>""!==nt);je.length>0&&(W.scopes=je.join(","))}_.tenantId&&(W.tid=_.tenantId);const se=W;for(const je of Object.keys(se))void 0===se[je]&&delete se[je];return`${function j_({config:_}){return _.emulator?dn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,k.xO)(se).slice(1)}`}const io="webStorageSupport";class rf extends class wg{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return z("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new rf(f)}_finalizeEnroll(f,g,b){return function pd(_,f){return Ht(_,"POST","/v2/accounts/mfaEnrollment:finalize",en(_,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Oa(_,f){return Ht(_,"POST","/v2/accounts/mfaSignIn:finalize",en(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let G_=(()=>{class _{constructor(){}static assertion(g){return rf._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var H_="@firebase/auth",sf="0.19.11";class Eg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var N;f((null===(N=b)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function so(){return window}function Vu(){return(Vu=(0,c.Z)(function*(_,f,g){var b;const{BuildInfo:N}=so();ne(f.sessionId,"AuthEvent did not contain a session ID");const R=yield La(f.sessionId),W={};return rr()?W.ibi=N.packageName:In()?W.apn=N.packageName:Ce(_,"operation-not-supported-in-this-environment"),N.displayName&&(W.appDisplayName=N.displayName),W.sessionId=R,nf(_,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,W)})).apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(_){const{BuildInfo:f}=so(),g={};rr()?g.iosBundleId=f.packageName:In()?g.androidPackageName=f.packageName:Ce(_,"operation-not-supported-in-this-environment"),yield Ql(_,g)})).apply(this,arguments)}function Md(){return(Md=(0,c.Z)(function*(_,f,g){const{cordova:b}=so();let N=()=>{};try{yield new Promise((R,W)=>{let se=null;function je(){var lt;R();const Sn=null===(lt=b.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof Sn&&Sn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function nt(){se||(se=window.setTimeout(()=>{W(ye(_,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===(null==document?void 0:document.visibilityState)&&nt()}f.addPassiveListener(je),document.addEventListener("resume",nt,!1),In()&&document.addEventListener("visibilitychange",vt,!1),N=()=>{f.removePassiveListener(je),document.removeEventListener("resume",nt,!1),document.removeEventListener("visibilitychange",vt,!1),se&&window.clearTimeout(se)}})}finally{N()}})).apply(this,arguments)}function La(_){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,c.Z)(function*(_){const f=Bu(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Bu(_){if(ne(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let b=0;b<_.length;b++)g[b]=_.charCodeAt(b);return g}!function W_(_){(0,oe._registerComponent)(new re.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),N=f.getProvider("heartbeat"),{apiKey:R,authDomain:W}=b.options;return((se,je)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:se.name}),te(!(null==W?void 0:W.includes(":")),"argument-error",{appName:se.name});const nt={apiKey:R,authDomain:W,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ca(_)},vt=new hi(se,je,nt);return function ae(_,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(ie);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(vt,g),vt})(b,N)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new re.wA("auth-internal",f=>{const g=Pe(f.getProvider("auth").getImmediate());return new Eg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(H_,sf,function $_(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,oe.registerVersion)(H_,sf,"esm2017")}("Browser");class cf extends Pi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function nc(_){return aa.apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(_){const f=yield ic()._get(hf(_));return f&&(yield ic()._remove(hf(_))),f})).apply(this,arguments)}function rc(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);_.push(f.charAt(b))}return _.join("")}function ic(){return ie(Dn)}function hf(_){return de("authEvent",_.config.apiKey,_.name)}function Rd(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,k.zd)(g.join("?"))}function mf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Od(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function Ag(_=(0,k.z$)()){return!("file:"!==Od()&&"ionic:"!==Od()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mr(){try{const _=self.localStorage,f=ta();if(_)return _.setItem(f,"1"),_.removeItem(f),!function ua(_=(0,k.z$)()){return function Y_(){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)}()||function J_(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch(_){return Oo()&&(0,k.hl)()}return!1}function Oo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ac(){return(function K_(){return"http:"===Od()||"https:"===Od()}()||(0,k.ru)()||Ag())&&!function kd(){return(0,k.b$)()||(0,k.UG)()}()&&Mr()&&!Oo()}function _f(){return Ag()&&"undefined"!=typeof document}function Va(){return(Va=(0,c.Z)(function*(){return!!_f()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Li={LOCAL:"local",NONE:"none",SESSION:"session"},Ba=te,vf="persistence";function Ua(_){return bf.apply(this,arguments)}function bf(){return(bf=(0,c.Z)(function*(_){yield _._initializationPromise;const f=uc(),g=de(vf,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function uc(){var _;try{return(null===(_=function yf(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const Q_=te;class wi{constructor(){this.browserResolver=ie(class oa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nn,this._completeRedirectFn=Nn}_openPopup(f,g,b,N){var R=this;return(0,c.Z)(function*(){var W;ne(null===(W=R.eventManagers[f._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const se=nf(f,g,b,It(),N);return function Sd(_,f,g,b=500,N=600){const R=Math.max((window.screen.availHeight-N)/2,0).toString(),W=Math.max((window.screen.availWidth-b)/2,0).toString();let se="";const je=Object.assign(Object.assign({},B_),{width:b.toString(),height:N.toString(),top:R,left:W}),nt=(0,k.z$)().toLowerCase();g&&(se=wr(nt)?"_blank":g),yt(nt)&&(f=f||"http://localhost",je.scrollbars="yes");const vt=Object.entries(je).reduce((Sn,[Xi,cc])=>`${Sn}${Xi}=${cc},`,"");if(function lu(_=(0,k.z$)()){var f;return rr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(nt)&&"_self"!==se)return function tf(_,f){const g=document.createElement("a");g.href=_,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",se),new Nd(null);const lt=window.open(f||"",se,vt);te(lt,_,"popup-blocked");try{lt.focus()}catch(Sn){}return new Nd(lt)}(f,se,ta())})()}_openRedirect(f,g,b,N){var R=this;return(0,c.Z)(function*(){return yield R._originValidation(f),function Jh(_){pn().location.href=_}(nf(f,g,b,It(),N)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:N,promise:R}=this.eventManagers[g];return N?Promise.resolve(N):(ne(R,"If manager is not set, promise should be"),R)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const b=yield function V_(_){return Ro.apply(this,arguments)}(f),N=new Pi(f);return b.register("authEvent",R=>(te(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:N.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:N},g.iframes[f._key()]=b,N})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(io,{type:io},N=>{var R;const W=null===(R=null==N?void 0:N[0])||void 0===R?void 0:R[io];void 0!==W&&g(!!W),Ce(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function k_(_){return bs.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ls()||Yt()||rr()}}),this.cordovaResolver=ie(class gf{constructor(){this._redirectPersistence=nn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nn}_initialize(f){var g=this;return(0,c.Z)(function*(){const b=f._key();let N=g.eventManagers.get(b);return N||(N=new cf(f),g.eventManagers.set(b,N),g.attachCallbackListeners(f,N)),N})()}_openPopup(f){Ce(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,N){var R=this;return(0,c.Z)(function*(){!function xd(_){var f,g,b,N,R,W,se,je,nt,vt;const lt=so();te("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(N=null===(b=null==lt?void 0:lt.cordova)||void 0===b?void 0:b.plugins)||void 0===N?void 0:N.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(je=null===(se=null===(W=null==lt?void 0:lt.cordova)||void 0===W?void 0:W.plugins)||void 0===se?void 0:se.browsertab)||void 0===je?void 0:je.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(vt=null===(nt=null==lt?void 0:lt.cordova)||void 0===nt?void 0:nt.InAppBrowser)||void 0===vt?void 0:vt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const W=yield R._initialize(f);yield W.initialized(),W.resetRedirect(),function Pu(){Qi.clear()}(),yield R._originValidation(f);const se=function df(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:rc(),postBody:null,tenantId:_.tenantId,error:ye(_,"no-auth-event")}}(f,b,N);yield function Hb(_,f){return ic()._set(hf(_),f)}(f,se);const je=yield function af(_,f,g){return Vu.apply(this,arguments)}(f,se,g),nt=yield function tc(_){const{cordova:f}=so();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let N=null;b?f.plugins.browsertab.openUrl(_):N=f.InAppBrowser.open(_,function go(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(N)})})}(je);return function Cg(_,f,g){return Md.apply(this,arguments)}(f,W,nt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function uf(_){return Fi.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:N,BuildInfo:R}=so(),W=setTimeout((0,c.Z)(function*(){yield nc(f),g.onEvent(mf())}),500),se=function(){var vt=(0,c.Z)(function*(lt){clearTimeout(W);const Sn=yield nc(f);let Xi=null;Sn&&(null==lt?void 0:lt.url)&&(Xi=function q_(_,f){var g,b;const N=function sc(_){const f=Rd(_),g=f.link?decodeURIComponent(f.link):void 0,b=Rd(g).link,N=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Rd(N).link||N||b||g||_}(f);if(N.includes("/__/auth/callback")){const R=Rd(N),W=R.firebaseError?function ff(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,se=null===(b=null===(g=null==W?void 0:W.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],je=se?ye(se):null;return je?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:N,postBody:null}}return null}(Sn,lt.url)),g.onEvent(Xi||mf())});return function(Sn){return vt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,se);const je=N,nt=`${R.packageName.toLowerCase()}://`;so().handleOpenURL=function(){var vt=(0,c.Z)(function*(lt){if(lt.toLowerCase().startsWith(nt)&&se({url:lt}),"function"==typeof je)try{je(lt)}catch(Sn){console.error(Sn)}});return function(lt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=nn,this._completeRedirectFn=Nn}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,N){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,b,N)})()}_openRedirect(f,g,b,N){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,b,N)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return _f()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Q_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function jr(){return Va.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Mg(_){return _.unwrap()}function ja(_){return xg(_)}function xg(_){const{_tokenResponse:f}=_ instanceof k.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ki.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=Ta;break;case"facebook.com":b=yo;break;case"github.com":b=od;break;case"twitter.com":b=gu;break;default:const{oauthIdToken:N,oauthAccessToken:R,oauthTokenSecret:W,pendingToken:se,nonce:je}=f;return R||W||N||se?se?g.startsWith("saml.")?Kn._create(g,se):hs._fromParams({providerId:g,signInMethod:g,pendingToken:se,idToken:N,accessToken:R}):new Yo(g).credential({idToken:N,accessToken:R,rawNonce:je}):null}return _ instanceof k.ZR?b.credentialFromError(_):b.credentialFromResult(_)}function xr(_,f){return f.catch(g=>{throw g instanceof k.ZR&&function ey(_,f){var g;const b=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new ty(_,function Su(_,f){var g;const b=(0,k.m9)(_),N=f;return te(f.customData.operationType,b,"argument-error"),te(null===(g=N.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),Ra._fromError(b,N)}(_,f));else if(b){const N=xg(f),R=f;N&&(R.credential=N,R.tenantId=b.tenantId||void 0,R.email=b.email||void 0,R.phoneNumber=b.phoneNumber||void 0)}}(_,g),g}).then(g=>{const N=g.user;return{operationType:g.operationType,credential:ja(g),additionalUserInfo:Tr(g),user:ko.getOrCreate(N)}})}function Df(_,f){return wf.apply(this,arguments)}function wf(){return(wf=(0,c.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>xr(_,g.confirm(b))}})).apply(this,arguments)}class ty{constructor(f,g){this.resolver=g,this.auth=function X_(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return xr(Mg(this.auth),this.resolver.resolveSignIn(f))}}class ko{constructor(f){this._delegate=f,this.multiFactor=function gd(_){const f=(0,k.m9)(_);return ea.has(f)||ea.set(f,ms._fromUser(f)),ea.get(f)}(f)}static getOrCreate(f){return ko.USER_MAP.has(f)||ko.USER_MAP.set(f,new ko(f)),ko.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return xr(g.auth,Si(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,c.Z)(function*(){return Df(b.auth,function Hl(_,f,g){return ra.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return xr(g.auth,function Yi(_,f,g){return ku.apply(this,arguments)}(g._delegate,f,wi))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ua(Pe(g.auth)),function Xe(_,f,g){return function Et(_,f,g){return xt.apply(this,arguments)}(_,f,g)}(g._delegate,f,wi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return xr(g.auth,Hs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Df(this.auth,function vg(_,f,g){return $l.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return xr(this.auth,function To(_,f,g){return Ou.apply(this,arguments)}(this._delegate,f,wi))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ua(Pe(g.auth)),function ee(_,f,g){return function Ne(_,f,g){return Se.apply(this,arguments)}(_,f,g)}(g._delegate,f,wi)})()}sendEmailVerification(f){return function Mi(_,f){return Ml.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function Aa(_,f){return El.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Ol(_,f){return kl((0,k.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function cd(_,f){return kl((0,k.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Wl(_,f){return vs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function xa(_,f){return Rl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Au(_,f,g){return Nu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ko.USER_MAP=new WeakMap;const lc=te;let Ef=(()=>{class _{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=g.options;lc(N,"invalid-api-key",{appName:g.name}),lc(N,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?wi:void 0;this._delegate=b.initialize({options:{persistence:ny(N,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function fn(_,f,g){const b=Pe(_);te(b._canInitEmulator,b,"emulator-config-failed"),te(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const N=!!(null==g?void 0:g.disableWarnings),R=dr(f),{host:W,port:se}=function Ps(_){const f=dr(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(b);if(N){const R=N[1];return{host:R,port:Bn(b.substr(R.length+1))}}{const[R,W]=b.split(":");return{host:R,port:Bn(W)}}}(f);b.config.emulator={url:`${R}//${W}${null===se?"":`:${se}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:W,port:se,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function Wi(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,b)}applyActionCode(g){return function Il(_,f){return we.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Lt(this._delegate,g)}confirmPasswordReset(g,b){return function Cu(_,f,g){return Cl.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var N=this;return(0,c.Z)(function*(){return xr(N._delegate,function Xo(_,f,g){return ti.apply(this,arguments)}(N._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Tu(_,f){return qs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Sl(_,f){const g=_o.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){lc(ac(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function Tt(_,f){return $n.apply(this,arguments)}(g._delegate,wi);return b?xr(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Tg(_,f){Pe(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,N){const{next:R,error:W,complete:se}=Cf(g,b,N);return this._delegate.onAuthStateChanged(R,W,se)}onIdTokenChanged(g,b,N){const{next:R,error:W,complete:se}=Cf(g,b,N);return this._delegate.onIdTokenChanged(R,W,se)}sendSignInLinkToEmail(g,b){return function Nl(_,f,g){return ld.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function wu(_,f,g){return Eu.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,c.Z)(function*(){let N;switch(function Ng(_,f){Ba(Object.values(Li).includes(f),_,"invalid-persistence-type"),(0,k.b$)()?Ba(f!==Li.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?Ba(f===Li.NONE,_,"unsupported-persistence-type"):Oo()?Ba(f===Li.NONE||f===Li.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):Ba(f===Li.NONE||Mr(),_,"unsupported-persistence-type")}(b._delegate,g),g){case Li.SESSION:N=nn;break;case Li.LOCAL:N=(yield ie(Ri)._isAvailable())?Ri:Dn;break;case Li.NONE:N=$;break;default:return Ce("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return xr(this._delegate,function _u(_){return ad.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return xr(this._delegate,Pn(this._delegate,g))}signInWithCustomToken(g){return xr(this._delegate,function $s(_,f){return Ws.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return xr(this._delegate,function Al(_,f,g){return Pn((0,k.m9)(_),wl.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return xr(this._delegate,function Iu(_,f,g){return zs.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return Df(this._delegate,function Ru(_,f,g){return En.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,c.Z)(function*(){return lc(ac(),b._delegate,"operation-not-supported-in-this-environment"),xr(b._delegate,function ro(_,f,g){return Dd.apply(this,arguments)}(b._delegate,g,wi))})()}signInWithRedirect(g){var b=this;return(0,c.Z)(function*(){return lc(ac(),b._delegate,"operation-not-supported-in-this-environment"),yield Ua(b._delegate),function x(_,f,g){return function L(_,f,g){return q.apply(this,arguments)}(_,f,g)}(b._delegate,g,wi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function vn(_,f){return Qo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Li,_})();function Cf(_,f,g){let b=_;"function"!=typeof _&&({next:b,error:f,complete:g}=_);const N=b;return{next:W=>N(W&&ko.getOrCreate(W)),error:f,complete:g}}function ny(_,f){const g=function Sg(_,f){const g=uc();if(!g)return[];const b=de(vf,_,f);switch(g.getItem(b)){case Li.NONE:return[$];case Li.LOCAL:return[Ri,nn];case Li.SESSION:return[nn];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(Ri)&&g.push(Ri),"undefined"!=typeof window)for(const b of[Dn,nn])g.includes(b)||g.push(b);return g.includes($)||g.push($),g}class If{constructor(){this.providerId="phone",this._delegate=new ki(Mg(K.Z.auth()))}static credential(f,g){return ki.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}If.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,If.PROVIDER_ID=ki.PROVIDER_ID;const ry=te;class iy{constructor(f,g,b=K.Z.app()){var N;ry(null===(N=b.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new yg(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Rg(_){_.INTERNAL.registerComponent(new re.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new Ef(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wl,FacebookAuthProvider:yo,GithubAuthProvider:od,GoogleAuthProvider:Ta,OAuthProvider:Yo,SAMLAuthProvider:pi,PhoneAuthProvider:If,PhoneMultiFactorGenerator:G_,RecaptchaVerifier:iy,TwitterAuthProvider:gu,Auth:Ef,AuthCredential:an,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.11")}(K.Z)},8306:(ut,Ee,O)=>{O.d(Ee,{y:()=>G});var c=O(930),K=O(727),k=O(8822),oe=O(4671);var re=O(2416),he=O(576),le=O(2806);let G=(()=>{class Ae{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const fe=new Ae;return fe.source=this,fe.operator=Be,fe}subscribe(Be,fe,De){const rt=function ze(Ae){return Ae&&Ae instanceof c.Lv||function Q(Ae){return Ae&&(0,he.m)(Ae.next)&&(0,he.m)(Ae.error)&&(0,he.m)(Ae.complete)}(Ae)&&(0,K.Nn)(Ae)}(Be)?Be:new c.Hp(Be,fe,De);return(0,le.x)(()=>{const{operator:Ke,source:Ce}=this;rt.add(Ke?Ke.call(rt,Ce):Ce?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(Be){try{return this._subscribe(Be)}catch(fe){Be.error(fe)}}forEach(Be,fe){return new(fe=H(fe))((De,rt)=>{const Ke=new c.Hp({next:Ce=>{try{Be(Ce)}catch(ye){rt(ye),Ke.unsubscribe()}},error:rt,complete:De});this.subscribe(Ke)})}_subscribe(Be){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Be)}[k.L](){return this}pipe(...Be){return function ge(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function(Be){return Ae.reduce((fe,De)=>De(fe),Be)}}(Be)(this)}toPromise(Be){return new(Be=H(Be))((fe,De)=>{let rt;this.subscribe(Ke=>rt=Ke,Ke=>De(Ke),()=>fe(rt))})}}return Ae.create=ke=>new Ae(ke),Ae})();function H(Ae){var ke;return null!==(ke=null!=Ae?Ae:re.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ut,Ee,O)=>{O.d(Ee,{x:()=>re});var c=O(8306),K=O(727);const oe=(0,O(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=O(8737),ge=O(2806);let re=(()=>{class le extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Q=new he(this,this);return Q.operator=H,Q}_throwIfClosed(){if(this.closed)throw new oe}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Q}=this;for(;Q.length;)Q.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Q,isStopped:ze,observers:Ae}=this;return Q||ze?K.Lc:(this.currentObservers=null,Ae.push(H),new K.w0(()=>{this.currentObservers=null,(0,X.P)(Ae,H)}))}_checkFinalizedStatuses(H){const{hasError:Q,thrownError:ze,isStopped:Ae}=this;Q?H.error(ze):Ae&&H.complete()}asObservable(){const H=new c.y;return H.source=this,H}}return le.create=(G,H)=>new he(G,H),le})();class he extends re{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Q||Q.call(H,G)}error(G){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Q||Q.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,Q;return null!==(Q=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==Q?Q:K.Lc}}},930:(ut,Ee,O)=>{O.d(Ee,{Hp:()=>Be,Lv:()=>Q});var c=O(576),K=O(727),k=O(2416),oe=O(7849),X=O(5032);const ge=le("C",void 0,void 0);function le(Ce,ye,be){return{kind:Ce,value:ye,error:be}}var G=O(3410),H=O(2806);class Q extends K.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,K.Nn)(ye)&&ye.add(this)):this.destination=Ke}static create(ye,be,We){return new Be(ye,be,We)}next(ye){this.isStopped?rt(function he(Ce){return le("N",Ce,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?rt(function re(Ce){return le("E",void 0,Ce)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?rt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ae(Ce,ye){return ze.call(Ce,ye)}class ke{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:be}=this;if(be.next)try{be.next(ye)}catch(We){fe(We)}}error(ye){const{partialObserver:be}=this;if(be.error)try{be.error(ye)}catch(We){fe(We)}else fe(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(be){fe(be)}}}class Be extends Q{constructor(ye,be,We){let He;if(super(),(0,c.m)(ye)||!ye)He={next:null!=ye?ye:void 0,error:null!=be?be:void 0,complete:null!=We?We:void 0};else{let te;this&&k.v.useDeprecatedNextContext?(te=Object.create(ye),te.unsubscribe=()=>this.unsubscribe(),He={next:ye.next&&Ae(ye.next,te),error:ye.error&&Ae(ye.error,te),complete:ye.complete&&Ae(ye.complete,te)}):He=ye}this.destination=new ke(He)}}function fe(Ce){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ce):(0,oe.h)(Ce)}function rt(Ce,ye){const{onStoppedNotification:be}=k.v;be&&G.z.setTimeout(()=>be(Ce,ye))}const Ke={closed:!0,next:X.Z,error:function De(Ce){throw Ce},complete:X.Z}},727:(ut,Ee,O)=>{O.d(Ee,{Lc:()=>ge,w0:()=>X,Nn:()=>re});var c=O(576);const k=(0,O(3888).d)(le=>function(H){le(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Q,ze)=>`${ze+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var oe=O(8737);class X{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ae of H)Ae.remove(this);else H.remove(this);const{initialTeardown:Q}=this;if((0,c.m)(Q))try{Q()}catch(Ae){G=Ae instanceof k?Ae.errors:[Ae]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ae of ze)try{he(Ae)}catch(ke){G=null!=G?G:[],ke instanceof k?G=[...G,...ke.errors]:G.push(ke)}}if(G)throw new k(G)}}add(G){var H;if(G&&G!==this)if(this.closed)he(G);else{if(G instanceof X){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,oe.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,oe.P)(H,G),G instanceof X&&G._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const ge=X.EMPTY;function re(le){return le instanceof X||le&&"closed"in le&&(0,c.m)(le.remove)&&(0,c.m)(le.add)&&(0,c.m)(le.unsubscribe)}function he(le){(0,c.m)(le)?le():le.unsubscribe()}},2416:(ut,Ee,O)=>{O.d(Ee,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ee,O)=>{O.d(Ee,{E:()=>K});const K=new(O(8306).y)(X=>X.complete())},8996:(ut,Ee,O)=>{O.d(Ee,{D:()=>ye});var c=O(8421),K=O(5363),k=O(9468),ge=O(8306),he=O(2202),le=O(576),G=O(9672);function Q(be,We){if(!be)throw new Error("Iterable cannot be null");return new ge.y(He=>{(0,G.f)(He,We,()=>{const te=be[Symbol.asyncIterator]();(0,G.f)(He,We,()=>{te.next().then(z=>{z.done?He.complete():He.next(z.value)})},0,!0)})})}var ze=O(3670),Ae=O(8239),ke=O(1144),Be=O(6495),fe=O(2206),De=O(4532),rt=O(3260);function ye(be,We){return We?function Ce(be,We){if(null!=be){if((0,ze.c)(be))return function oe(be,We){return(0,c.Xf)(be).pipe((0,k.R)(We),(0,K.Q)(We))}(be,We);if((0,ke.z)(be))return function re(be,We){return new ge.y(He=>{let te=0;return We.schedule(function(){te===be.length?He.complete():(He.next(be[te++]),He.closed||this.schedule())})})}(be,We);if((0,Ae.t)(be))return function X(be,We){return(0,c.Xf)(be).pipe((0,k.R)(We),(0,K.Q)(We))}(be,We);if((0,fe.D)(be))return Q(be,We);if((0,Be.T)(be))return function H(be,We){return new ge.y(He=>{let te;return(0,G.f)(He,We,()=>{te=be[he.h](),(0,G.f)(He,We,()=>{let z,ne;try{({value:z,done:ne}=te.next())}catch(me){return void He.error(me)}ne?He.complete():He.next(z)},0,!0)}),()=>(0,le.m)(null==te?void 0:te.return)&&te.return()})}(be,We);if((0,rt.L)(be))return function Ke(be,We){return Q((0,rt.Q)(be),We)}(be,We)}throw(0,De.z)(be)}(be,We):(0,c.Xf)(be)}},8421:(ut,Ee,O)=>{O.d(Ee,{Xf:()=>ze});var c=O(655),K=O(1144),k=O(8239),oe=O(8306),X=O(3670),ge=O(2206),re=O(4532),he=O(6495),le=O(3260),G=O(576),H=O(7849),Q=O(8822);function ze(Ce){if(Ce instanceof oe.y)return Ce;if(null!=Ce){if((0,X.c)(Ce))return function Ae(Ce){return new oe.y(ye=>{const be=Ce[Q.L]();if((0,G.m)(be.subscribe))return be.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,K.z)(Ce))return function ke(Ce){return new oe.y(ye=>{for(let be=0;be<Ce.length&&!ye.closed;be++)ye.next(Ce[be]);ye.complete()})}(Ce);if((0,k.t)(Ce))return function Be(Ce){return new oe.y(ye=>{Ce.then(be=>{ye.closed||(ye.next(be),ye.complete())},be=>ye.error(be)).then(null,H.h)})}(Ce);if((0,ge.D)(Ce))return De(Ce);if((0,he.T)(Ce))return function fe(Ce){return new oe.y(ye=>{for(const be of Ce)if(ye.next(be),ye.closed)return;ye.complete()})}(Ce);if((0,le.L)(Ce))return function rt(Ce){return De((0,le.Q)(Ce))}(Ce)}throw(0,re.z)(Ce)}function De(Ce){return new oe.y(ye=>{(function Ke(Ce,ye){var be,We,He,te;return(0,c.mG)(this,void 0,void 0,function*(){try{for(be=(0,c.KL)(Ce);!(We=yield be.next()).done;)if(ye.next(We.value),ye.closed)return}catch(z){He={error:z}}finally{try{We&&!We.done&&(te=be.return)&&(yield te.call(be))}finally{if(He)throw He.error}}ye.complete()})})(Ce,ye).catch(be=>ye.error(be))})}},6451:(ut,Ee,O)=>{O.d(Ee,{T:()=>ge});var c=O(8189),K=O(8421),k=O(515),oe=O(3269),X=O(8996);function ge(...re){const he=(0,oe.yG)(re),le=(0,oe._6)(re,1/0),G=re;return G.length?1===G.length?(0,K.Xf)(G[0]):(0,c.J)(le)((0,X.D)(G,he)):k.E}},5403:(ut,Ee,O)=>{O.d(Ee,{x:()=>K});var c=O(930);function K(oe,X,ge,re,he){return new k(oe,X,ge,re,he)}class k extends c.Lv{constructor(X,ge,re,he,le,G){super(X),this.onFinalize=le,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(Q){X.error(Q)}}:super._next,this._error=he?function(H){try{he(H)}catch(Q){X.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(H){X.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ut,Ee,O)=>{O.d(Ee,{U:()=>k});var c=O(4482),K=O(5403);function k(oe,X){return(0,c.e)((ge,re)=>{let he=0;ge.subscribe((0,K.x)(re,le=>{re.next(oe.call(X,le,he++))}))})}},8189:(ut,Ee,O)=>{O.d(Ee,{J:()=>k});var c=O(5577),K=O(4671);function k(oe=1/0){return(0,c.z)(K.y,oe)}},5577:(ut,Ee,O)=>{O.d(Ee,{z:()=>he});var c=O(4004),K=O(8421),k=O(4482),oe=O(9672),X=O(5403),re=O(576);function he(le,G,H=1/0){return(0,re.m)(G)?he((Q,ze)=>(0,c.U)((Ae,ke)=>G(Q,Ae,ze,ke))((0,K.Xf)(le(Q,ze))),H):("number"==typeof G&&(H=G),(0,k.e)((Q,ze)=>function ge(le,G,H,Q,ze,Ae,ke,Be){const fe=[];let De=0,rt=0,Ke=!1;const Ce=()=>{Ke&&!fe.length&&!De&&G.complete()},ye=We=>De<Q?be(We):fe.push(We),be=We=>{Ae&&G.next(We),De++;let He=!1;(0,K.Xf)(H(We,rt++)).subscribe((0,X.x)(G,te=>{null==ze||ze(te),Ae?ye(te):G.next(te)},()=>{He=!0},void 0,()=>{if(He)try{for(De--;fe.length&&De<Q;){const te=fe.shift();ke?(0,oe.f)(G,ke,()=>be(te)):be(te)}Ce()}catch(te){G.error(te)}}))};return le.subscribe((0,X.x)(G,ye,()=>{Ke=!0,Ce()})),()=>{null==Be||Be()}}(Q,ze,le,H)))}},5363:(ut,Ee,O)=>{O.d(Ee,{Q:()=>oe});var c=O(9672),K=O(4482),k=O(5403);function oe(X,ge=0){return(0,K.e)((re,he)=>{re.subscribe((0,k.x)(he,le=>(0,c.f)(he,X,()=>he.next(le),ge),()=>(0,c.f)(he,X,()=>he.complete(),ge),le=>(0,c.f)(he,X,()=>he.error(le),ge)))})}},3099:(ut,Ee,O)=>{O.d(Ee,{B:()=>ge});var c=O(8996),K=O(5698),k=O(7579),oe=O(930),X=O(4482);function ge(he={}){const{connector:le=(()=>new k.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:Q=!0}=he;return ze=>{let Ae=null,ke=null,Be=null,fe=0,De=!1,rt=!1;const Ke=()=>{null==ke||ke.unsubscribe(),ke=null},Ce=()=>{Ke(),Ae=Be=null,De=rt=!1},ye=()=>{const be=Ae;Ce(),null==be||be.unsubscribe()};return(0,X.e)((be,We)=>{fe++,!rt&&!De&&Ke();const He=Be=null!=Be?Be:le();We.add(()=>{fe--,0===fe&&!rt&&!De&&(ke=re(ye,Q))}),He.subscribe(We),Ae||(Ae=new oe.Hp({next:te=>He.next(te),error:te=>{rt=!0,Ke(),ke=re(Ce,G,te),He.error(te)},complete:()=>{De=!0,Ke(),ke=re(Ce,H),He.complete()}}),(0,c.D)(be).subscribe(Ae))})(ze)}}function re(he,le,...G){return!0===le?(he(),null):!1===le?null:le(...G).pipe((0,K.q)(1)).subscribe(()=>he())}},9468:(ut,Ee,O)=>{O.d(Ee,{R:()=>K});var c=O(4482);function K(k,oe=0){return(0,c.e)((X,ge)=>{ge.add(k.schedule(()=>X.subscribe(ge),oe))})}},5698:(ut,Ee,O)=>{O.d(Ee,{q:()=>oe});var c=O(515),K=O(4482),k=O(5403);function oe(X){return X<=0?()=>c.E:(0,K.e)((ge,re)=>{let he=0;ge.subscribe((0,k.x)(re,le=>{++he<=X&&(re.next(le),X<=he&&re.complete())}))})}},8505:(ut,Ee,O)=>{O.d(Ee,{b:()=>X});var c=O(576),K=O(4482),k=O(5403),oe=O(4671);function X(ge,re,he){const le=(0,c.m)(ge)||re||he?{next:ge,error:re,complete:he}:ge;return le?(0,K.e)((G,H)=>{var Q;null===(Q=le.subscribe)||void 0===Q||Q.call(le);let ze=!0;G.subscribe((0,k.x)(H,Ae=>{var ke;null===(ke=le.next)||void 0===ke||ke.call(le,Ae),H.next(Ae)},()=>{var Ae;ze=!1,null===(Ae=le.complete)||void 0===Ae||Ae.call(le),H.complete()},Ae=>{var ke;ze=!1,null===(ke=le.error)||void 0===ke||ke.call(le,Ae),H.error(Ae)},()=>{var Ae,ke;ze&&(null===(Ae=le.unsubscribe)||void 0===Ae||Ae.call(le)),null===(ke=le.finalize)||void 0===ke||ke.call(le)}))}):oe.y}},4408:(ut,Ee,O)=>{O.d(Ee,{o:()=>X});var c=O(727);class K extends c.w0{constructor(re,he){super()}schedule(re,he=0){return this}}const k={setInterval(ge,re,...he){const{delegate:le}=k;return(null==le?void 0:le.setInterval)?le.setInterval(ge,re,...he):setInterval(ge,re,...he)},clearInterval(ge){const{delegate:re}=k;return((null==re?void 0:re.clearInterval)||clearInterval)(ge)},delegate:void 0};var oe=O(8737);class X extends K{constructor(re,he){super(re,he),this.scheduler=re,this.work=he,this.pending=!1}schedule(re,he=0){if(this.closed)return this;this.state=re;const le=this.id,G=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(G,le,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(G,this.id,he),this}requestAsyncId(re,he,le=0){return k.setInterval(re.flush.bind(re,this),le)}recycleAsyncId(re,he,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return he;k.clearInterval(he)}execute(re,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(re,he);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,he){let G,le=!1;try{this.work(re)}catch(H){le=!0,G=H||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:re,scheduler:he}=this,{actions:le}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(le,this),null!=re&&(this.id=this.recycleAsyncId(he,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ee,O)=>{O.d(Ee,{v:()=>k});var c=O(6063);class K{constructor(X,ge=K.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,re){return new this.schedulerActionCtor(this,X).schedule(re,ge)}}K.now=c.l.now;class k extends K{constructor(X,ge=K.now){super(X,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,re){for(;X=ge.shift();)X.unsubscribe();throw re}}}},4986:(ut,Ee,O)=>{O.d(Ee,{P:()=>oe,z:()=>k});var c=O(4408);const k=new(O(7565).v)(c.o),oe=k},6063:(ut,Ee,O)=>{O.d(Ee,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ut,Ee,O)=>{O.d(Ee,{z:()=>c});const c={setTimeout(K,k,...oe){const{delegate:X}=c;return(null==X?void 0:X.setTimeout)?X.setTimeout(K,k,...oe):setTimeout(K,k,...oe)},clearTimeout(K){const{delegate:k}=c;return((null==k?void 0:k.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(ut,Ee,O)=>{O.d(Ee,{h:()=>K});const K=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ee,O)=>{O.d(Ee,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,Ee,O)=>{O.d(Ee,{_6:()=>ge,jO:()=>oe,yG:()=>X});var c=O(576),K=O(3532);function k(re){return re[re.length-1]}function oe(re){return(0,c.m)(k(re))?re.pop():void 0}function X(re){return(0,K.K)(k(re))?re.pop():void 0}function ge(re,he){return"number"==typeof k(re)?re.pop():he}},8737:(ut,Ee,O)=>{function c(K,k){if(K){const oe=K.indexOf(k);0<=oe&&K.splice(oe,1)}}O.d(Ee,{P:()=>c})},3888:(ut,Ee,O)=>{function c(K){const oe=K(X=>{Error.call(X),X.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Ee,{d:()=>c})},2806:(ut,Ee,O)=>{O.d(Ee,{O:()=>oe,x:()=>k});var c=O(2416);let K=null;function k(X){if(c.v.useDeprecatedSynchronousErrorHandling){const ge=!K;if(ge&&(K={errorThrown:!1,error:null}),X(),ge){const{errorThrown:re,error:he}=K;if(K=null,re)throw he}}else X()}function oe(X){c.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=X)}},9672:(ut,Ee,O)=>{function c(K,k,oe,X=0,ge=!1){const re=k.schedule(function(){oe(),ge?K.add(this.schedule(null,X)):this.unsubscribe()},X);if(K.add(re),!ge)return re}O.d(Ee,{f:()=>c})},4671:(ut,Ee,O)=>{function c(K){return K}O.d(Ee,{y:()=>c})},1144:(ut,Ee,O)=>{O.d(Ee,{z:()=>c});const c=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(ut,Ee,O)=>{O.d(Ee,{D:()=>K});var c=O(576);function K(k){return Symbol.asyncIterator&&(0,c.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(ut,Ee,O)=>{function c(K){return"function"==typeof K}O.d(Ee,{m:()=>c})},3670:(ut,Ee,O)=>{O.d(Ee,{c:()=>k});var c=O(8822),K=O(576);function k(oe){return(0,K.m)(oe[c.L])}},6495:(ut,Ee,O)=>{O.d(Ee,{T:()=>k});var c=O(2202),K=O(576);function k(oe){return(0,K.m)(null==oe?void 0:oe[c.h])}},8239:(ut,Ee,O)=>{O.d(Ee,{t:()=>K});var c=O(576);function K(k){return(0,c.m)(null==k?void 0:k.then)}},3260:(ut,Ee,O)=>{O.d(Ee,{L:()=>oe,Q:()=>k});var c=O(655),K=O(576);function k(X){return(0,c.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:he,done:le}=yield(0,c.qq)(re.read());if(le)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(he)}}finally{re.releaseLock()}})}function oe(X){return(0,K.m)(null==X?void 0:X.getReader)}},3532:(ut,Ee,O)=>{O.d(Ee,{K:()=>K});var c=O(576);function K(k){return k&&(0,c.m)(k.schedule)}},4482:(ut,Ee,O)=>{O.d(Ee,{A:()=>K,e:()=>k});var c=O(576);function K(oe){return(0,c.m)(null==oe?void 0:oe.lift)}function k(oe){return X=>{if(K(X))return X.lift(function(ge){try{return oe(ge,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Ee,O)=>{function c(){}O.d(Ee,{Z:()=>c})},7849:(ut,Ee,O)=>{O.d(Ee,{h:()=>k});var c=O(2416),K=O(3410);function k(oe){K.z.setTimeout(()=>{const{onUnhandledError:X}=c.v;if(!X)throw oe;X(oe)})}},4532:(ut,Ee,O)=>{function c(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>c})},655:(ut,Ee,O)=>{function oe(z,ne){var me={};for(var ie in z)Object.prototype.hasOwnProperty.call(z,ie)&&ne.indexOf(ie)<0&&(me[ie]=z[ie]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ie=Object.getOwnPropertySymbols(z);Oe<ie.length;Oe++)ne.indexOf(ie[Oe])<0&&Object.prototype.propertyIsEnumerable.call(z,ie[Oe])&&(me[ie[Oe]]=z[ie[Oe]])}return me}function he(z,ne,me,ie){return new(me||(me=Promise))(function(ae,It){function Xt(_t){try{ct(ie.next(_t))}catch(cn){It(cn)}}function Rn(_t){try{ct(ie.throw(_t))}catch(cn){It(cn)}}function ct(_t){_t.done?ae(_t.value):function Oe(ae){return ae instanceof me?ae:new me(function(It){It(ae)})}(_t.value).then(Xt,Rn)}ct((ie=ie.apply(z,ne||[])).next())})}function fe(z){return this instanceof fe?(this.v=z,this):new fe(z)}function De(z,ne,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ie=me.apply(z,ne||[]),ae=[];return Oe={},It("next"),It("throw"),It("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function It(dn){ie[dn]&&(Oe[dn]=function(Ai){return new Promise(function(on,os){ae.push([dn,Ai,on,os])>1||Xt(dn,Ai)})})}function Xt(dn,Ai){try{!function Rn(dn){dn.value instanceof fe?Promise.resolve(dn.value.v).then(ct,_t):cn(ae[0][2],dn)}(ie[dn](Ai))}catch(on){cn(ae[0][3],on)}}function ct(dn){Xt("next",dn)}function _t(dn){Xt("throw",dn)}function cn(dn,Ai){dn(Ai),ae.shift(),ae.length&&Xt(ae[0][0],ae[0][1])}}function Ke(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=z[Symbol.asyncIterator];return ne?ne.call(z):(z=function Q(z){var ne="function"==typeof Symbol&&Symbol.iterator,me=ne&&z[ne],ie=0;if(me)return me.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ie>=z.length&&(z=void 0),{value:z&&z[ie++],done:!z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),me={},ie("next"),ie("throw"),ie("return"),me[Symbol.asyncIterator]=function(){return this},me);function ie(ae){me[ae]=z[ae]&&function(It){return new Promise(function(Xt,Rn){!function Oe(ae,It,Xt,Rn){Promise.resolve(Rn).then(function(ct){ae({value:ct,done:Xt})},It)}(Xt,Rn,(It=z[ae](It)).done,It.value)})}}}O.d(Ee,{FC:()=>De,KL:()=>Ke,_T:()=>oe,mG:()=>he,qq:()=>fe})},5e3:(ut,Ee,O)=>{O.d(Ee,{$8M:()=>Hn,$Z:()=>JD,AFp:()=>n_,AaK:()=>he,CHM:()=>Tl,CRH:()=>u1,CZH:()=>Rp,CqO:()=>uv,EJc:()=>O0,EpF:()=>ah,F$t:()=>Sc,F4k:()=>Ge,FYo:()=>Ah,FiY:()=>Di,G48:()=>NI,Gf:()=>o1,GfV:()=>Uw,Gpc:()=>H,Hsn:()=>bm,Ikx:()=>Ov,JOm:()=>se,LFG:()=>Xe,LSH:()=>Uu,Lbi:()=>Yc,MAs:()=>Xf,MGl:()=>ip,NdJ:()=>ym,OlP:()=>An,Oqu:()=>cp,PXZ:()=>AI,Q6J:()=>or,QGY:()=>_m,Qsj:()=>Nh,QtT:()=>Kv,R0b:()=>co,RDi:()=>fs,Rgc:()=>Tp,SBq:()=>Th,SDv:()=>al,Sil:()=>k0,Suo:()=>a1,TTD:()=>yo,TgZ:()=>xn,Tol:()=>ew,Udp:()=>yv,VKq:()=>r0,VLi:()=>CI,W1O:()=>xh,WLB:()=>Qa,X6Q:()=>z0,XFs:()=>dt,Xpm:()=>Ft,Y36:()=>fa,YKP:()=>Gi,YNc:()=>rv,Yjl:()=>wr,Yz7:()=>on,ZZ4:()=>y_,_Bn:()=>Ep,_UZ:()=>np,_Vd:()=>Ch,_c5:()=>j1,_uU:()=>Tm,aQg:()=>jp,c2e:()=>D1,cJS:()=>en,cg1:()=>_h,dDg:()=>s_,deG:()=>gg,dqk:()=>Gt,eFA:()=>S1,ekj:()=>Cm,g9A:()=>Kc,h0i:()=>Vc,hGG:()=>LI,hij:()=>dp,iGM:()=>s1,ifc:()=>$t,ip1:()=>t_,kEZ:()=>dl,kL8:()=>Cn,lG2:()=>Yt,n5z:()=>vd,oAB:()=>Y,oxw:()=>Nc,pQV:()=>Ja,q4F:()=>jw,qLn:()=>xr,qOj:()=>lm,qZA:()=>pa,s9C:()=>Mc,sBO:()=>q0,sIi:()=>Yu,s_b:()=>Ap,soG:()=>Pp,tBr:()=>Ur,tb:()=>R0,tp0:()=>So,uIk:()=>Jf,vHH:()=>ke,vpe:()=>ya,wAp:()=>bt,xp6:()=>Xb,z2F:()=>Lp,zSh:()=>$a,zs3:()=>ao});var c=O(7579),K=O(727),k=O(8306),oe=O(6451),X=O(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function re(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return he(this())},s}function Q(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class ke extends Error{constructor(o,a){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function ye(s,o){const a=o?` in ${o}`:"";throw new ke(-201,`No provider for ${De(s)} found${a}`)}function _t(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ht(s){return ur(s,Hi)||ur(s,as)}function ur(s,o){return s.hasOwnProperty(o)?s[o]:null}function Fr(s){return s&&(s.hasOwnProperty(Lr)||s.hasOwnProperty(us))?s[Lr]:null}const Hi=ge({\u0275prov:ge}),Lr=ge({\u0275inj:ge}),as=ge({ngInjectableDef:ge}),us=ge({ngInjectorDef:ge});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Jr;function qn(s){const o=Jr;return Jr=s,o}function di(s,o,a){const l=Ht(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==o?o:void ye(he(s),"Injector")}function yn(s){return{toString:s}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),$t=(()=>{return(s=$t||($t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",$t;var s})();const at="undefined"!=typeof globalThis&&globalThis,Dt="undefined"!=typeof window&&window,lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=at||"undefined"!=typeof global&&global||Dt||lr,cr={},ht=[],Dr=ge({\u0275cmp:ge}),Bt=ge({\u0275dir:ge}),Ye=ge({\u0275pipe:ge}),Ie=ge({\u0275mod:ge}),tt=ge({\u0275fac:ge}),ft=ge({__NG_ELEMENT_ID__:ge});let Ut=0;function Ft(s){return yn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ht,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$t.Emulated,id:"c",styles:s.styles||ht,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,y=s.pipes;return l.id+=Ut++,l.inputs=yt(s.inputs,a),l.outputs=yt(s.outputs),p&&p.forEach(D=>D(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(V):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map($):null,l})}function V(s){return Wt(s)||function In(s){return s[Bt]||null}(s)}function $(s){return function Mt(s){return s[Ye]||null}(s)}const de={};function Y(s){return yn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ht,declarations:s.declarations||ht,imports:s.imports||ht,exports:s.exports||ht,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function yt(s,o){if(null==s)return cr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=l,o&&(o[h]=p)}return a}const Yt=Ft;function wr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Wt(s){return s[Dr]||null}function hn(s,o){const a=s[Ie]||null;if(!a&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return a}function Ni(s){return Array.isArray(s)&&"object"==typeof s[1]}function fi(s){return Array.isArray(s)&&!0===s[1]}function td(s){return 0!=(8&s.flags)}function Vs(s){return 2==(2&s.flags)}function hu(s){return 1==(1&s.flags)}function Qr(s){return null!==s.template}function zh(s){return 0!=(512&s[2])}function Xr(s,o){return s.hasOwnProperty(tt)?s[tt]:null}class Yo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function yo(){return Ta}function Ta(s){return s.type.prototype.ngOnChanges&&(s.setInput=hg),od}function od(){const s=js(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===cr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function hg(s,o,a,l){const h=js(s)||function pi(s,o){return s[Kn]=o}(s,{previous:cr,current:null}),p=h.current||(h.current={}),y=h.previous,D=this.declaredInputs[a],E=y[D];p[D]=new Yo(E&&E.currentValue,o,y===cr),s[l]=o}yo.ngInherit=!0;const Kn="__ngSimpleChanges__";function js(s){return s[Kn]||null}let vu;function fs(s){vu=s}function Aa(){return void 0!==vu?vu:"undefined"!=typeof document?document:void 0}function mn(s){return!!s.listen}const Jo={createRenderer:(s,o)=>Aa()};function ln(s){for(;Array.isArray(s);)s=s[0];return s}function bo(s,o){return ln(o[s])}function Cr(s,o){return ln(o[s.index])}function Na(s,o){return s.data[o]}function Ir(s,o){const a=o[s];return Ni(a)?a:a[0]}function Hs(s){return 4==(4&s[2])}function ps(s){return 128==(128&s[2])}function ei(s,o){return null==o?null:s[o]}function $s(s){s[18]=0}function Ws(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const pt={lFrame:wo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Cu(){return pt.bindingsEnabled}function we(){return pt.lFrame.lView}function Lt(){return pt.lFrame.tView}function Tl(s){return pt.lFrame.contextLView=s,s[8]}function vn(){let s=Qo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Qo(){return pt.lFrame.currentTNode}function Xo(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ti(s,o){const a=pt.lFrame;a.currentTNode=s,a.isParent=o}function Al(){return pt.lFrame.isParent}function Nl(){pt.lFrame.isParent=!1}function Iu(){return pt.isInCheckNoChangesMode}function zs(s){pt.isInCheckNoChangesMode=s}function fr(){const s=pt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function qs(){return pt.lFrame.bindingIndex++}function Mi(s){const o=pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Au(s){pt.lFrame.inI18n=s}function Nu(s,o){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Ma(o)}function Ma(s){pt.lFrame.currentDirectiveIndex=s}function Rl(){return pt.lFrame.currentQueryIndex}function Ol(s){pt.lFrame.currentQueryIndex=s}function cd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function kl(s,o,a){if(a&dt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||a&dt.Host||(h=cd(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const l=pt.lFrame=dd();return l.currentTNode=o,l.lView=s,!0}function Do(s){const o=dd(),a=s[1];pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function dd(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?wo(s):o}function wo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function hd(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fd=hd;function Eo(){const s=hd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Tr(){return pt.lFrame.selectedIndex}function Ks(s){pt.lFrame.selectedIndex=s}function Tn(){const s=pt.lFrame;return Na(s.tView,s.selectedIndex)}function gs(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:S}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),D&&((s.contentHooks||(s.contentHooks=[])).push(a,D),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,D)),E&&(s.viewHooks||(s.viewHooks=[])).push(-a,E),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=S&&(s.destroyHooks||(s.destroyHooks=[])).push(a,S)}}function Ra(s,o,a){pd(s,o,3,a)}function Su(s,o,a,l){(3&s[2])===a&&pd(s,o,a,l)}function jn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function pd(s,o,a,l){const p=null!=l?l:-1,y=o.length-1;let D=0;for(let E=void 0!==l?65535&s[18]:0;E<y;E++)if("number"==typeof o[E+1]){if(D=o[E],null!=l&&D>=l)break}else o[E]<0&&(s[18]+=65536),(D<p||-1==p)&&(fg(s,a,o,E),s[18]=(4294901760&s[18])+E+2),E++}function fg(s,o,a,l){const h=a[l]<0,p=a[l+1],D=s[h?-a[l]:a[l]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(D)}finally{}}}else try{p.call(D)}finally{}}class ea{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function gt(s,o,a){const l=mn(s);let h=0;for(;h<a.length;){const p=a[h];if("number"==typeof p){if(0!==p)break;h++;const y=a[h++],D=a[h++],E=a[h++];l?s.setAttribute(o,D,E,y):o.setAttributeNS(y,D,E)}else{const y=p,D=a[++h];Ln(y)?l&&s.setProperty(o,y,D):l?s.setAttribute(o,y,D):o.setAttribute(y,D),h++}}return h}function nn(s){return 3===s||4===s||6===s}function Ln(s){return 64===s.charCodeAt(0)}function Gn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||ta(s,a,h,null,-1===a||2===a?o[++l]:null)}}return s}function ta(s,o,a,l,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const D=s[p++];if("number"==typeof D){if(D===o){y=-1;break}if(D>o){y=p-1;break}}}for(;p<s.length;){const D=s[p];if("number"==typeof D)break;if(D===a){if(null===l)return void(null!==h&&(s[p+1]=h));if(l===s[p+1])return void(s[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==h&&s.splice(p++,0,h)}function _d(s){return-1!==s}function pn(s){return 32767&s}function xi(s,o){let a=function Jh(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Mu=!0;function ni(s){const o=Mu;return Mu=s,o}let Ul=0;function _n(s,o){const a=Ys(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,_s(l.data,s),_s(o,null),_s(l.blueprint,null));const h=mi(s,o),p=s.injectorIndex;if(_d(h)){const y=pn(h),D=xi(h,o),E=D[1].data;for(let T=0;T<8;T++)o[p+T]=D[y+T]|E[y+T]}return o[p+8]=h,p}function _s(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ys(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function mi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){const p=h[1],y=p.type;if(l=2===y?p.declTNode:1===y?h[6]:null,null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Js(s,o,a){!function Io(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ft)&&(l=a[ft]),null==l&&(l=a[ft]=Ul++);const h=255&l;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function zi(s,o,a){if(a&dt.Optional)return s;ye(o,"NodeInjector")}function jl(s,o,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const h=s[9],p=qn(void 0);try{return h?h.get(o,l,a&dt.Optional):di(o,l,a&dt.Optional)}finally{qn(p)}}return zi(l,o,a)}function Qs(s,o,a,l=dt.Default,h){if(null!==s){const p=function Xs(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ft)?s[ft]:void 0;return"number"==typeof o?o>=0?255&o:Gl:o}(a);if("function"==typeof p){if(!kl(o,s,l))return l&dt.Host?zi(h,a,l):jl(o,a,l,h);try{const y=p(l);if(null!=y||l&dt.Optional)return y;ye(a)}finally{fd()}}else if("number"==typeof p){let y=null,D=Ys(s,o),E=-1,T=l&dt.Host?o[16][6]:null;for((-1===D||l&dt.SkipSelf)&&(E=-1===D?mi(s,o):o[D+8],-1!==E&&ir(l,!1)?(y=o[1],D=pn(E),o=xi(E,o)):D=-1);-1!==D;){const S=o[1];if(Oa(p,D,S.data)){const P=xu(D,o,a,y,l,T);if(P!==qi)return P}E=o[D+8],-1!==E&&ir(l,o[1].data[D+8]===T)&&Oa(p,D,o)?(y=S,D=pn(E),o=xi(E,o)):D=-1}}}return jl(o,a,l,h)}const qi={};function Gl(){return new Oi(vn(),we())}function xu(s,o,a,l,h,p){const y=o[1],D=y.data[s+8],S=yi(D,y,a,null==l?Vs(D)&&Mu:l!=y&&0!=(3&D.type),h&dt.Host&&p===D);return null!==S?Ri(o,y,S,D):qi}function yi(s,o,a,l,h){const p=s.providerIndexes,y=o.data,D=1048575&p,E=s.directiveStart,S=p>>20,U=h?D+S:s.directiveEnd;for(let Z=l?D:D+S;Z<U;Z++){const _e=y[Z];if(Z<E&&a===_e||Z>=E&&_e.type===a)return Z}if(h){const Z=y[E];if(Z&&Qr(Z)&&Z.type===a)return E}return null}function Ri(s,o,a,l){let h=s[a];const p=o.data;if(function gd(s){return s instanceof ea}(h)){const y=h;y.resolving&&function rt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ke(-200,`Circular dependency in DI detected for ${s}${a}`)}(De(p[a]));const D=ni(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?qn(y.injectImpl):null;kl(s,l,dt.Default);try{h=s[a]=y.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Ll(s,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const y=Ta(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==E&&qn(E),ni(D),y.resolving=!1,fd()}}return h}function Oa(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function ir(s,o){return!(s&dt.Self||s&dt.Host&&o)}class Oi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Qs(this._tNode,this._lView,o,l,a)}}function vd(s){return yn(()=>{const o=s.prototype.constructor,a=o[tt]||wn(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const p=h[tt]||wn(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function wn(s){return ze(s)?()=>{const o=wn(Q(s));return o&&o()}:Xr(s)}function Hn(s){return function _i(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const p=a[h];if(nn(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(vn(),s)}const na="__parameters__";function bn(s,o,a){return yn(()=>{const l=function Zi(s){return function(...a){if(s){const l=s(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const y=new h(...p);return D.annotation=y,D;function D(E,T,S){const P=E.hasOwnProperty(na)?E[na]:Object.defineProperty(E,na,{value:[]})[na];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(y),E}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class An{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=on({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gg=new An("AnalyzeForEntryComponents");function Sr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Sr(l,o)):o!==s&&o.push(l)}return o}function vi(s,o){s.forEach(a=>Array.isArray(a)?vi(a,o):o(a))}function Wl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function vs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ki(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function Yn(s,o,a){let l=ro(s,o);return l>=0?s[1|l]=a:(l=~l,function zl(s,o,a,l){let h=s.length;if(h==o)s.push(a,l);else if(1===h)s.push(l,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Kl(s,o){const a=ro(s,o);if(a>=0)return s[1|a]}function ro(s,o){return function To(s,o,a){let l=0,h=s.length>>a;for(;h!==l;){const p=l+(h-l>>1),y=s[p<<a];if(o===y)return p<<a;y>o?h=p:l=p+1}return~(h<<a)}(s,o,1)}const Ao={},ia="__NG_DI_FLAG__",Pu="ngTempTokenPath",I=/\n/gm,L="__source",q=ge({provide:String,useValue:ge});let ee;function Ne(s){const o=ee;return ee=s,o}function Se(s,o=dt.Default){if(void 0===ee)throw new ke(203,"");return null===ee?di(s,void 0,o):ee.get(s,o&dt.Optional?null:void 0,o)}function Xe(s,o=dt.Default){return(function tr(){return Jr}()||Se)(Q(s),o)}const xt=Xe;function Tt(s){const o=[];for(let a=0;a<s.length;a++){const l=Q(s[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let h,p=dt.Default;for(let y=0;y<l.length;y++){const D=l[y],E=Nn(D);"number"==typeof E?-1===E?h=D.token:p|=E:h=D}o.push(Xe(h,p))}else o.push(Xe(l))}return o}function $n(s,o){return s[ia]=o,s.prototype[ia]=o,s}function Nn(s){return s[ia]}const Ur=$n(bn("Inject",s=>({token:s})),-1),Di=$n(bn("Optional"),8),So=$n(bn("SkipSelf"),4);let xo;function Fa(s){var o;return(null===(o=function Id(){if(void 0===xo&&(xo=null,Gt.trustedTypes))try{xo=Gt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return xo}())||void 0===o?void 0:o.createHTML(s))||s}class Sd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function io(s){return s instanceof Sd?s.changingThisBreaksApplicationSecurity:s}class $_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Fa(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class W_{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Fa(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Fa(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const y=a.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const so=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,af=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vu(s){return(s=String(s)).match(so)||s.match(af)?s:"unsafe:"+s}function uf(s){return(s=String(s)).split(",").map(o=>Vu(o.trim())).join(", ")}function Fi(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function tc(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const Cg=Fi("area,br,col,hr,img,wbr"),Md=Fi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xd=Fi("rp,rt"),lf=tc(Cg,tc(Md,Fi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tc(xd,Fi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tc(xd,Md)),cf=Fi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),df=Fi("srcset"),aa=tc(cf,df,Fi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function Uu(s){const o=function ua(){const s=we();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function oa(s,o){const a=function Lu(s){return s instanceof Sd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?io(s):Vu(fe(s))}const _f="__ngContext__";function jr(s,o){s[_f]=o}function yf(s){const o=function Va(s){return s[_f]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ja(s){return s.ngOriginalError}function xg(s,...o){s.error(...o)}class xr{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function ey(s){return s&&s.ngErrorLogger||xg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ja(o);for(;a&&ja(a);)a=ja(a);return a||null}}const ty=/^>|^->|<!--|-->|--!>|<!-$/g,ko=/(<|>)/;const iy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function g(s){return s instanceof Function?s():s}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();let je;function nt(s,o){return je(s,o)}function Sn(s){const o=s[3];return fi(o)?o[3]:o}function ju(s){return Tf(s[13])}function Gu(s){return Tf(s[4])}function Tf(s){for(;null!==s&&!fi(s);)s=s[4];return s}function la(s,o,a,l,h){if(null!=l){let p,y=!1;fi(l)?p=l:Ni(l)&&(y=!0,l=l[0]);const D=ln(l);0===s&&null!==a?null==h?cy(o,a,D):Ds(o,a,D,h||null,!0):1===s&&null!==a?Ds(o,a,D,h||null,!0):2===s?py(o,D,y):3===s&&o.destroyNode(D),null!=p&&function _y(s,o,a,l,h){const p=a[7];p!==ln(a)&&la(o,s,l,p,h);for(let D=10;D<a.length;D++){const E=a[D];Vg(E[1],E,s,o,l,p)}}(o,s,p,a,h)}}function Pd(s,o){return mn(s)?s.createText(o):s.createTextNode(o)}function Fd(s,o,a){mn(s)?s.setValue(o,a):o.textContent=a}function Af(s,o){return s.createComment(function Ef(s){return s.replace(ty,o=>o.replace(ko,"\u200b$1\u200b"))}(o))}function Ld(s,o,a){if(mn(s))return s.createElement(o,a);{const l=null!==a?function yu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function $b(s,o){const a=s[9],l=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ws(h,-1)),a.splice(l,1)}function ay(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const h=l[17];null!==h&&h!==s&&$b(h,l),o>0&&(s[a-1][4]=l[4]);const p=vs(s,10+o);!function ri(s,o){Vg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=p[19];null!==y&&y.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function uy(s,o){if(!(256&o[2])){const a=o[11];mn(a)&&a.destroyNode&&Vg(s,o,a,3,null,null),function kg(s){let o=s[13];if(!o)return ly(s[1],s);for(;o;){let a=null;if(Ni(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ni(o)&&ly(o[1],o),o=o[3];null===o&&(o=s),Ni(o)&&ly(o[1],o),a=o&&o[4]}o=a}}(o)}}function ly(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function zb(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof ea)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const D=h[p[y]],E=p[y+1];try{E.call(D)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Wb(s,o){const a=s.cleanup,l=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],D="function"==typeof y?y(o):ln(o[y]),E=l[h=a[p+2]],T=a[p+3];"boolean"==typeof T?D.removeEventListener(a[p],E,T):T>=0?l[h=T]():l[h=-T].unsubscribe(),p+=2}else{const y=l[h=a[p+1]];a[p].call(y)}if(null!==l){for(let p=h+1;p<l.length;p++)l[p]();o[7]=null}}(s,o),1===o[1].type&&mn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&fi(o[3])){a!==o[3]&&$b(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Fg(s,o,a){return jE(s,o.parent,a)}function jE(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=s.data[l.directiveStart].encapsulation;if(h===$t.None||h===$t.Emulated)return null}return Cr(l,a)}function Ds(s,o,a,l,h){mn(s)?s.insertBefore(o,a,l,h):o.insertBefore(a,l,h)}function cy(s,o,a){mn(s)?s.appendChild(o,a):o.appendChild(a)}function qb(s,o,a,l,h){null!==l?Ds(s,o,a,l,h):cy(s,o,a)}function Sf(s,o){return mn(s)?s.parentNode(o):o.parentNode}function Zb(s,o,a){return dy(s,o,a)}function Kb(s,o,a){return 40&s.type?Cr(s,a):null}let hy,dy=Kb;function Yb(s,o){dy=s,hy=o}function Lg(s,o,a,l){const h=Fg(s,l,o),p=o[11],D=Zb(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let E=0;E<a.length;E++)qb(p,h,a[E],D,!1);else qb(p,h,a,D,!1);void 0!==hy&&hy(p,l,o,a,h)}function Bd(s,o){if(null!==o){const a=o.type;if(3&a)return Cr(o,s);if(4&a)return fy(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Bd(s,l);{const h=s[o.index];return fi(h)?fy(-1,h):ln(h)}}if(32&a)return nt(o,s)()||ln(s[o.index]);{const l=Jb(s,o);return null!==l?Array.isArray(l)?l[0]:Bd(Sn(s[16]),l):Bd(s,o.next)}}return null}function Jb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function fy(s,o){const a=10+s+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Bd(l,h)}return o[7]}function py(s,o,a){const l=Sf(s,o);l&&function GE(s,o,a,l){mn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}function gy(s,o,a,l,h,p,y){for(;null!=a;){const D=l[a.index],E=a.type;if(y&&0===o&&(D&&jr(ln(D),l),a.flags|=4),64!=(64&a.flags))if(8&E)gy(s,o,a.child,l,h,p,!1),la(o,s,h,D,p);else if(32&E){const T=nt(a,l);let S;for(;S=T();)la(o,s,h,S,p);la(o,s,h,D,p)}else 16&E?Rr(s,o,l,a,h,p):la(o,s,h,D,p);a=y?a.projectionNext:a.next}}function Vg(s,o,a,l,h,p){gy(a,l,s.firstChild,o,h,p,!1)}function Rr(s,o,a,l,h,p){const y=a[16],E=y[6].projection[l.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)la(o,s,h,E[T],p);else gy(s,o,E,y[3],h,p,!0)}function Qb(s,o,a){mn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function ws(s,o,a){mn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function $E(s,o,a){let l=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||s.charCodeAt(h+p)<=32)return h}a=h+1}}const ve="ng-template";function dc(s,o,a){let l=0;for(;l<s.length;){let h=s[l++];if(a&&"class"===h){if(h=s[l],-1!==$E(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<s.length&&"string"==typeof(h=s[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Mf(s){return 4===s.type&&s.value!==ve}function Hu(s,o,a){return o===(4!==s.type||a?s.value:ve)}function zt(s,o,a){let l=4;const h=s.attrs||[],p=function St(s){for(let o=0;o<s.length;o++)if(nn(s[o]))return o;return s.length}(h);let y=!1;for(let D=0;D<o.length;D++){const E=o[D];if("number"!=typeof E){if(!y)if(4&l){if(l=2|1&l,""!==E&&!Hu(s,E,a)||""===E&&1===o.length){if(Po(l))return!1;y=!0}}else{const T=8&l?E:o[++D];if(8&l&&null!==s.attrs){if(!dc(s.attrs,T,a)){if(Po(l))return!1;y=!0}continue}const P=Ga(8&l?"class":E,h,Mf(s),a);if(-1===P){if(Po(l))return!1;y=!0;continue}if(""!==T){let U;U=P>p?"":h[P+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==$E(Z,T,0)||2&l&&T!==U){if(Po(l))return!1;y=!0}}}}else{if(!y&&!Po(l)&&!Po(E))return!1;if(y&&Po(E))continue;y=!1,l=E|1&l}}return Po(l)||y}function Po(s){return 0==(1&s)}function Ga(s,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let D=o[++h];for(;"string"==typeof D;)D=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function Ug(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function it(s,o,a=!1){for(let l=0;l<o.length;l++)if(zt(s,o[l],a))return!0;return!1}function vy(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let h=0;h<s.length;h++)if(s[h]!==l[h])continue e;return!0}}return!1}function Ud(s,o){return s?":not("+o.trim()+")":o}function WE(s){let o=s[0],a=1,l=2,h="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const D=s[++a];h+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!Po(y)&&(o+=Ud(p,h),h=""),l=y,p=p||!Po(l);a++}return""!==h&&(o+=Ud(p,h)),o}const Rt={};function Xb(s){Gr(Lt(),we(),Tr()+s,Iu())}function Gr(s,o,a,l){if(!l)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ra(o,p,a)}else{const p=s.preOrderHooks;null!==p&&Su(o,p,0,a)}Ks(a)}function gr(s,o){return s<<17|o<<2}function Hr(s){return s>>17&32767}function jg(s){return 2|s}function ca(s){return(131068&s)>>2}function Dy(s,o){return-131069&s|o<<2}function Rf(s){return 1|s}function pD(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],p=a[l+1];if(-1!==p){const y=s.data[p];Ol(h),y.contentQueries(2,o[p],p)}}}function hc(s,o,a,l,h,p,y,D,E,T){const S=o.blueprint.slice();return S[0]=h,S[2]=140|l,$s(S),S[3]=S[15]=s,S[8]=a,S[10]=y||s&&s[10],S[11]=D||s&&s[11],S[12]=E||s&&s[12]||null,S[9]=T||s&&s[9]||null,S[6]=p,S[16]=2==o.type?s[16]:S,S}function fc(s,o,a,l,h){let p=s.data[o];if(null===p)p=xy(s,o,a,l,h),function Ml(){return pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=h;const y=Xo();p.injectorIndex=null===y?-1:y.injectorIndex}return ti(p,!0),p}function xy(s,o,a,l,h){const p=Qo(),y=Al(),E=s.data[o]=function Oy(s,o,a,l,h,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,l,h);return null===s.firstChild&&(s.firstChild=E),null!==p&&(y?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}function $u(s,o,a,l){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function pc(s,o,a){Do(o);try{const l=s.viewQuery;null!==l&&em(1,l,a);const h=s.template;null!==h&&zr(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&pD(s,o),s.staticViewQueries&&em(2,s.viewQuery,a);const p=s.components;null!==p&&function mD(s,o){for(let a=0;a<o.length;a++)jy(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Eo()}}function Wu(s,o,a,l){const h=o[2];if(256==(256&h))return;Do(o);const p=Iu();try{$s(o),function Tu(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&zr(s,o,a,2,l);const y=3==(3&h);if(!p)if(y){const T=s.preOrderCheckHooks;null!==T&&Ra(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Su(o,T,0,null),jn(o,0)}if(function Uf(s){for(let o=ju(s);null!==o;o=Gu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],p=h[3];0==(1024&h[2])&&Ws(p,1),h[2]|=1024}}}(o),function ND(s){for(let o=ju(s);null!==o;o=Gu(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];ps(l)&&Wu(h,l,h.template,l[8])}}(o),null!==s.contentQueries&&pD(s,o),!p)if(y){const T=s.contentCheckHooks;null!==T&&Ra(o,T)}else{const T=s.contentHooks;null!==T&&Su(o,T,1),jn(o,1)}!function fD(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Ks(~h);else{const p=h,y=a[++l],D=a[++l];Nu(y,p),D(2,o[p])}}}finally{Ks(-1)}}(s,o);const D=s.components;null!==D&&function gD(s,o){for(let a=0;a<o.length;a++)Uy(s,o[a])}(o,D);const E=s.viewQuery;if(null!==E&&em(2,E,l),!p)if(y){const T=s.viewCheckHooks;null!==T&&Ra(o,T)}else{const T=s.viewHooks;null!==T&&Su(o,T,2),jn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ws(o[3],-1))}finally{Eo()}}function Wr(s,o,a,l){const h=o[10],p=!Iu(),y=Hs(o);try{p&&!y&&h.begin&&h.begin(),y&&pc(s,o,l),Wu(s,o,a,l)}finally{p&&!y&&h.end&&h.end()}}function zr(s,o,a,l,h){const p=Tr(),y=2&l;try{Ks(-1),y&&o.length>20&&Gr(s,o,20,Iu()),a(l,h)}finally{Ks(p)}}function Vf(s,o,a){!Cu()||(function Wd(s,o,a,l){const h=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||_n(a,o),jr(l,o);const y=a.initialInputs;for(let D=h;D<p;D++){const E=s.data[D],T=Qr(E);T&&Ui(o,a,E);const S=Ri(o,s,D,a);jr(S,o),null!==y&&Yg(0,D-h,S,E,0,y),T&&(Ir(a.index,o)[8]=S)}}(s,o,a,Cr(a,o)),128==(128&a.flags)&&function tC(s,o,a){const l=a.directiveStart,h=a.directiveEnd,y=a.index,D=function xl(){return pt.lFrame.currentDirectiveIndex}();try{Ks(y);for(let E=l;E<h;E++){const T=s.data[E],S=o[E];Ma(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&CD(T,S)}}finally{Ks(-1),Ma(D)}}(s,o,a))}function Ry(s,o,a=Cr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],D=-1===y?a(o,s):s[y];s[h++]=D}}}function _D(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Bf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Bf(s,o,a,l,h,p,y,D,E,T){const S=20+l,P=S+h,U=function JE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Rt);return a}(S,P),Z="function"==typeof T?T():T;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:D,declTNode:o,data:U.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:Z,incompleteFirstPass:!1}}function bD(s,o,a,l){const h=Gy(o);null===a?h.push(l):(h.push(a),s.firstCreatePass&&$f(s).push(l,h.length-1))}function ky(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const h=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function Bi(s,o,a,l,h,p,y,D){const E=Cr(o,a);let S,T=o.inputs;!D&&null!=T&&(S=T[l])?(tm(s,a,S,l,h),Vs(o)&&function Py(s,o){const a=Ir(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function qg(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=y?y(h,o.value||"",l):h,mn(p)?p.setProperty(E,l,h):Ln(l)||(E.setProperty?E.setProperty(l,h):E[l]=h))}function $d(s,o,a,l){let h=!1;if(Cu()){const p=function gc(s,o,a){const l=s.directiveRegistry;let h=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];it(a,y.selectors,!1)&&(h||(h=[]),Js(_n(a,o),s,y.type),Qr(y)?(Ly(s,a),h.unshift(y)):h.push(y))}return h}(s,o,a),y=null===l?null:{"":-1};if(null!==p){h=!0,zd(a,s.data.length,p.length);for(let S=0;S<p.length;S++){const P=p[S];P.providersResolver&&P.providersResolver(P)}let D=!1,E=!1,T=$u(s,o,p.length,null);for(let S=0;S<p.length;S++){const P=p[S];a.mergedAttrs=Gn(a.mergedAttrs,P.hostAttrs),Vy(s,a,o,T,P),ID(T,P,y),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!D&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),D=!0),!E&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),E=!0),T++}!function QE(s,o){const l=o.directiveEnd,h=s.data,p=o.attrs,y=[];let D=null,E=null;for(let T=o.directiveStart;T<l;T++){const S=h[T],P=S.inputs,U=null===p||Mf(o)?null:TD(P,p);y.push(U),D=ky(P,T,D),E=ky(S.outputs,T,E)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=16),D.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=D,o.outputs=E}(s,a)}y&&function Kg(s,o,a){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new ke(-301,!1);l.push(o[h],p)}}}(a,l,y)}return a.mergedAttrs=Gn(a.mergedAttrs,a.attrs),h}function ED(s,o,a,l,h,p){const y=p.hostBindings;if(y){let D=s.hostBindingOpCodes;null===D&&(D=s.hostBindingOpCodes=[]);const E=~o.index;(function eC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(D)!=E&&D.push(E),D.push(l,h,y)}}function CD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ly(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function ID(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Qr(o)&&(a[""]=s)}}function zd(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Vy(s,o,a,l,h){s.data[l]=h;const p=h.factory||(h.factory=Xr(h.type)),y=new ea(p,Qr(h),null);s.blueprint[l]=y,a[l]=y,ED(s,o,0,l,$u(s,a,h.hostVars,Rt),h)}function Ui(s,o,a){const l=Cr(o,s),h=_D(a),p=s[10],y=zu(s,hc(s,h,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));s[o.index]=y}function mc(s,o,a,l,h,p,y){if(null==p)mn(s)?s.removeAttribute(o,h,a):o.removeAttribute(h);else{const D=null==y?fe(p):y(p,l||"",h);mn(s)?s.setAttribute(o,h,D,a):a?o.setAttributeNS(a,h,D):o.setAttribute(h,D)}}function Yg(s,o,a,l,h,p){const y=p[o];if(null!==y){const D=l.setInput;for(let E=0;E<y.length;){const T=y[E++],S=y[E++],P=y[E++];null!==D?l.setInput(a,P,T,S):a[S]=P}}}function TD(s,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function By(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function Uy(s,o){const a=Ir(o,s);if(ps(a)){const l=a[1];80&a[2]?Wu(l,a,l.template,a[8]):a[5]>0&&jf(a)}}function jf(s){for(let l=ju(s);null!==l;l=Gu(l))for(let h=10;h<l.length;h++){const p=l[h];if(1024&p[2]){const y=p[1];Wu(y,p,y.template,p[8])}else p[5]>0&&jf(p)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=Ir(a[l],s);ps(h)&&h[5]>0&&jf(h)}}function jy(s,o){const a=Ir(o,s),l=a[1];(function Jg(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),pc(l,a,a[8])}function zu(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Qg(s){for(;s;){s[2]|=64;const o=Sn(s);if(zh(s)&&!o)return s;s=o}return null}function qd(s,o,a){const l=o[10];l.begin&&l.begin();try{Wu(s,o,s.template,a)}catch(h){throw qu(o,h),h}finally{l.end&&l.end()}}function Xg(s){!function Gf(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=yf(a),h=l[1];Wr(h,l,h.template,a)}}(s[8])}function em(s,o,a){Ol(0),o(s,a)}const Hf=(()=>Promise.resolve(null))();function Gy(s){return s[7]||(s[7]=[])}function $f(s){return s.cleanup||(s.cleanup=[])}function qu(s,o){const a=s[9],l=a?a.get(xr,null):null;l&&l.handleError(o)}function tm(s,o,a,l,h){for(let p=0;p<a.length;){const y=a[p++],D=a[p++],E=o[y],T=s.data[y];null!==T.setInput?T.setInput(E,h,l,D):E[D]=h}}function Kd(s,o,a){let l=a?s.styles:null,h=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const D=o[y];"number"==typeof D?p=D:1==p?h=le(h,D):2==p&&(l=le(l,D+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=h:s.classesWithoutHost=h}const nm=new An("INJECTOR",-1);class xD{get(o,a=Ao){if(a===Ao){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}const $a=new An("Set Injector scope."),Es={},rm={};let Qd;function Wf(){return void 0===Qd&&(Qd=new xD),Qd}function $y(s,o=null,a=null,l){const h=Mn(s,o,a,l);return h._resolveInjectorDefTypes(),h}function Mn(s,o=null,a=null,l){return new im(s,a,o||Wf(),l)}class im{constructor(o,a,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&vi(a,D=>this.processProvider(D,o,a)),vi([o],D=>this.processInjectorType(D,[],p)),this.records.set(nm,eh(void 0,this));const y=this.records.get($a);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof o?null:he(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Ao,l=dt.Default){this.assertNotDestroyed();const h=Ne(this),p=qn(void 0);try{if(!(l&dt.SkipSelf)){let D=this.records.get(o);if(void 0===D){const E=function RD(s){return"function"==typeof s||"object"==typeof s&&s instanceof An}(o)&&Ht(o);D=E&&this.injectableDefInScope(E)?eh(Wy(o),Es):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(l&dt.Self?Wf():this.parent).get(o,a=l&dt.Optional&&a===Ao?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Pu]=y[Pu]||[]).unshift(he(o)),h)throw y;return function sa(s,o,a,l){const h=s[Pu];throw o[L]&&h.unshift(o[L]),s.message=function No(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let D=o[y];p.push(y+":"+("string"==typeof D?JSON.stringify(D):he(D)))}h=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,h,a,l),s.ngTokenPath=h,s[Pu]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{qn(p),Ne(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(he(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,a,l){if(!(o=Q(o)))return!1;let h=Fr(o);const p=null==h&&o.ngModule||void 0,y=void 0===p?o:p,D=-1!==l.indexOf(y);if(void 0!==p&&(h=Fr(p)),null==h)return!1;if(null!=h.imports&&!D){let S;l.push(y);try{vi(h.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:U,providers:Z}=S[P];vi(Z,_e=>this.processProvider(_e,U,Z||ht))}}this.injectorDefTypes.add(y);const E=Xr(y)||(()=>new y);this.records.set(y,eh(E,Es));const T=h.providers;if(null!=T&&!D){const S=o;vi(T,P=>this.processProvider(P,S,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let h=th(o=Q(o))?o:Q(o&&o.provide);const p=function zf(s,o,a){return zy(s)?eh(void 0,s.useValue):eh(Xd(s),Es)}(o);if(th(o)||!0!==o.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=eh(void 0,Es,!0),y.factory=()=>Tt(y.multi),this.records.set(h,y)),h=o,y.multi.push(o)}this.records.set(h,p)}hydrate(o,a){return a.value===Es&&(a.value=rm,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Zu(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Wy(s){const o=Ht(s),a=null!==o?o.factory:Xr(s);if(null!==a)return a;if(s instanceof An)throw new ke(204,!1);if(s instanceof Function)return function rC(s){const o=s.length;if(o>0)throw ki(o,"?"),new ke(204,!1);const a=function ci(s){const o=s&&(s[Hi]||s[as]);if(o){const a=function Os(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new ke(204,!1)}function Xd(s,o,a){let l;if(th(s)){const h=Q(s);return Xr(h)||Wy(h)}if(zy(s))l=()=>Q(s.useValue);else if(function sC(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Tt(s.deps||[]));else if(function iC(s){return!(!s||!s.useExisting)}(s))l=()=>Xe(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function qf(s){return!!s.deps}(s))return Xr(h)||Wy(h);l=()=>new h(...Tt(s.deps))}return l}function eh(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function zy(s){return null!==s&&"object"==typeof s&&q in s}function th(s){return"function"==typeof s}let ao=(()=>{class s{static create(a,l){var h;if(Array.isArray(a))return $y({name:""},l,a,"");{const p=null!==(h=a.name)&&void 0!==h?h:"";return $y({name:p},a.parent,a.providers,p)}}}return s.THROW_IF_NOT_FOUND=Ao,s.NULL=new xD,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>Xe(nm)}),s.__NG_ELEMENT_ID__=-1,s})();function dC(s,o){gs(yf(s)[1],vn())}function lm(s){let o=function VD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let h;if(Qr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");h=o.\u0275dir}if(h){if(a){l.push(h);const y=s;y.inputs=cm(s.inputs),y.declaredInputs=cm(s.declaredInputs),y.outputs=cm(s.outputs);const D=h.hostBindings;D&&Wa(s,D);const E=h.viewQuery,T=h.contentQueries;if(E&&dm(s,E),T&&UD(s,T),re(s.inputs,h.inputs),re(s.declaredInputs,h.declaredInputs),re(s.outputs,h.outputs),Qr(h)&&h.data.animation){const S=s.data;S.animation=(S.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const D=p[y];D&&D.ngInherit&&D(s),D===lm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function BD(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Gn(h.hostAttrs,a=Gn(a,h.hostAttrs))}}(l)}function cm(s){return s===cr?{}:s===ht?[]:s}function dm(s,o){const a=s.viewQuery;s.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function UD(s,o){const a=s.contentQueries;s.contentQueries=a?(l,h,p)=>{o(l,h,p),a(l,h,p)}:o}function Wa(s,o){const a=s.hostBindings;s.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Ku=null;function yc(){if(!Ku){const s=Gt.Symbol;if(s&&s.iterator)Ku=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ku=l)}}}return Ku}function Yu(s){return!!rh(s)&&(Array.isArray(s)||!(s instanceof Map)&&yc()in s)}function rh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ha(s,o,a){return s[o]=a}function mr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Ju(s,o,a,l){const h=mr(s,o,a);return mr(s,o+1,l)||h}function Jf(s,o,a,l){const h=we();return mr(h,qs(),o)&&(Lt(),function Fo(s,o,a,l,h,p){const y=Cr(s,o);mc(o[11],y,p,s.value,a,l,h)}(Tn(),h,s,o,a,l)),Jf}function za(s,o,a,l){return mr(s,qs(),a)?o+fe(a)+l:Rt}function rv(s,o,a,l,h,p,y,D){const E=we(),T=Lt(),S=s+20,P=T.firstCreatePass?function fC(s,o,a,l,h,p,y,D,E){const T=o.consts,S=fc(o,s,4,y||null,ei(T,D));$d(o,a,S,ei(T,E)),gs(o,S);const P=S.tViews=Bf(2,S,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,S),P.queries=o.queries.embeddedTView(S)),S}(S,T,E,o,a,l,h,p,y):T.data[S];ti(P,!1);const U=E[11].createComment("");Lg(T,E,U,P),jr(U,E),zu(E,E[S]=By(U,E,U,P)),hu(P)&&Vf(T,E,P),null!=y&&Ry(E,P,D)}function Xf(s){return function Si(s,o){return s[o]}(function Sl(){return pt.lFrame.contextLView}(),20+s)}function fa(s,o=dt.Default){const a=we();return null===a?Xe(s,o):Qs(vn(),a,Q(s),o)}function JD(){throw new Error("invalid")}function or(s,o,a){const l=we();return mr(l,qs(),o)&&Bi(Lt(),Tn(),l,s,o,l[11],a,!1),or}function ov(s,o,a,l,h){const y=h?"class":"style";tm(s,a,o.inputs[y],y,l)}function xn(s,o,a,l){const h=we(),p=Lt(),y=20+s,D=h[11],E=h[y]=Ld(D,o,function R_(){return pt.lFrame.currentNamespace}()),T=p.firstCreatePass?function el(s,o,a,l,h,p,y){const D=o.consts,T=fc(o,s,2,h,ei(D,p));return $d(o,a,T,ei(D,y)),null!==T.attrs&&Kd(T,T.attrs,!1),null!==T.mergedAttrs&&Kd(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,p,h,0,o,a,l):p.data[y];ti(T,!0);const S=T.mergedAttrs;null!==S&&gt(D,E,S);const P=T.classes;null!==P&&ws(D,E,P);const U=T.styles;return null!==U&&Qb(D,E,U),64!=(64&T.flags)&&Lg(p,h,E,T),0===function Sa(){return pt.lFrame.elementDepthCount}()&&jr(E,h),function wu(){pt.lFrame.elementDepthCount++}(),hu(T)&&(Vf(p,h,T),function Lf(s,o,a){if(td(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}(p,T,h)),null!==l&&Ry(h,T),xn}function pa(){let s=vn();Al()?Nl():(s=s.parent,ti(s,!1));const o=s;!function Eu(){pt.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(gs(a,s),td(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Yh(s){return 0!=(16&s.flags)}(o)&&ov(a,o,we(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function pg(s){return 0!=(32&s.flags)}(o)&&ov(a,o,we(),o.stylesWithoutHost,!1),pa}function np(s,o,a,l){return xn(s,o,a,l),pa(),np}function ah(){return we()}function _m(s){return!!s&&"function"==typeof s.then}function Ge(s){return!!s&&"function"==typeof s.subscribe}const uv=Ge;function ym(s,o,a,l){const h=we(),p=Lt(),y=vn();return function uh(s,o,a,l,h,p,y,D){const E=hu(l),S=s.firstCreatePass&&$f(s),P=o[8],U=Gy(o);let Z=!0;if(3&l.type||D){const xe=Cr(l,o),ot=D?D(xe):xe,Te=U.length,Ze=D?Zt=>D(ln(Zt[l.index])):l.index;if(mn(a)){let Zt=null;if(!D&&E&&(Zt=function ga(s,o,a,l){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===a&&h[p+1]===l){const D=o[7],E=h[p+2];return D.length>E?D[E]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,l.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=p,Zt.__ngLastListenerFn__=p,Z=!1;else{p=vm(l,o,P,p,!1);const gn=a.listen(ot,h,p);U.push(p,gn),S&&S.push(h,Ze,Te,Te+1)}}else p=vm(l,o,P,p,!0),ot.addEventListener(h,p,y),U.push(p),S&&S.push(h,Ze,Te,y)}else p=vm(l,o,P,p,!1);const _e=l.outputs;let Ve;if(Z&&null!==_e&&(Ve=_e[h])){const xe=Ve.length;if(xe)for(let ot=0;ot<xe;ot+=2){const Ts=o[Ve[ot]][Ve[ot+1]].subscribe(p),ml=U.length;U.push(p,Ts),S&&S.push(h,l.index,ml,-(ml+1))}}}(p,h,h[11],y,s,o,!!a,l),ym}function qa(s,o,a,l){try{return!1!==a(l)}catch(h){return qu(s,h),!1}}function vm(s,o,a,l,h){return function p(y){if(y===Function)return l;const D=2&s.flags?Ir(s.index,o):o;0==(32&o[2])&&Qg(D);let E=qa(o,0,l,y),T=p.__ngNextListenerFn__;for(;T;)E=qa(o,0,T,y)&&E,T=T.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function Nc(s=1){return function Zs(s){return(pt.lFrame.contextLView=function Pl(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function lv(s,o){let a=null;const l=function yy(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===l?it(s,p,!0):vy(l,p))return h}else a=h}return a}function Sc(s){const o=we()[16][6];if(!o.projection){const l=o.projection=ki(s?s.length:1,null),h=l.slice();let p=o.child;for(;null!==p;){const y=s?lv(p,s):0;null!==y&&(h[y]?h[y].projectionNext=p:l[y]=p,h[y]=p),p=p.next}}}function bm(s,o=0,a){const l=we(),h=Lt(),p=fc(h,20+s,16,null,a||null);null===p.projection&&(p.projection=o),Nl(),64!=(64&p.flags)&&function my(s,o,a){Rr(o[11],0,o,a,Fg(s,a,o),Zb(a.parent||o[6],a,o))}(h,l,p)}function Mc(s,o,a){return ip(s,"",o,"",a),Mc}function ip(s,o,a,l,h){const p=we(),y=za(p,o,a,l);return y!==Rt&&Bi(Lt(),Tn(),p,s,y,p[11],h,!1),ip}function xc(s,o,a,l,h){const p=s[a+1],y=null===o;let D=l?Hr(p):ca(p),E=!1;for(;0!==D&&(!1===E||y);){const S=s[D+1];wm(s[D],o)&&(E=!0,s[D+1]=l?Rf(S):jg(S)),D=l?Hr(S):ca(S)}E&&(s[a+1]=l?jg(p):Rf(p))}function wm(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ro(s,o)>=0}const Wn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mv(s){return s.substring(Wn.key,Wn.keyEnd)}function QD(s,o){const a=Wn.textEnd;return a===o?-1:(o=Wn.keyEnd=function op(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Wn.key=o,a),ch(s,o,a))}function ch(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function yv(s,o,a){return qr(s,o,a,!1),yv}function Cm(s,o){return qr(s,o,null,!0),Cm}function ew(s){!function Ei(s,o,a,l){const h=Lt(),p=Mi(2);h.firstUpdatePass&&vv(h,null,p,l);const y=we();if(a!==Rt&&mr(y,p,a)){const D=h.data[Tr()];if(wv(D,l)&&!tw(h,p)){let E=l?D.classesWithoutHost:D.stylesWithoutHost;null!==E&&(a=le(E,a||"")),ov(h,D,y,a,l)}else!function Dv(s,o,a,l,h,p,y,D){h===Rt&&(h=ht);let E=0,T=0,S=0<h.length?h[0]:null,P=0<p.length?p[0]:null;for(;null!==S||null!==P;){const U=E<h.length?h[E+1]:void 0,Z=T<p.length?p[T+1]:void 0;let Ve,_e=null;S===P?(E+=2,T+=2,U!==Z&&(_e=P,Ve=Z)):null===P||null!==S&&S<P?(E+=2,_e=S):(T+=2,_e=P,Ve=Z),null!==_e&&Rc(s,o,a,l,_e,Ve,y,D),S=E<h.length?h[E]:null,P=T<p.length?p[T]:null}}(h,D,y,y[11],y[p+1],y[p+1]=function bv(s,o,a){if(null==a||""===a)return ht;const l=[],h=io(a);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(l,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(l,p,h[p]);else"string"==typeof h&&o(l,h);return l}(s,o,a),l,p)}}(Yn,_a,s,!0)}function _a(s,o){for(let a=function Za(s){return function rl(s){Wn.key=0,Wn.keyEnd=0,Wn.value=0,Wn.valueEnd=0,Wn.textEnd=s.length}(s),QD(s,ch(s,0,Wn.textEnd))}(o);a>=0;a=QD(o,a))Yn(s,mv(o),!0)}function qr(s,o,a,l){const h=we(),p=Lt(),y=Mi(2);p.firstUpdatePass&&vv(p,s,y,l),o!==Rt&&mr(h,y,o)&&Rc(p,p.data[Tr()],h,h[11],s,h[y+1]=function lp(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(io(s)))),s}(o,a),l,y)}function tw(s,o){return o>=s.expandoStartIndex}function vv(s,o,a,l){const h=s.data;if(null===h[a+1]){const p=h[Tr()],y=tw(s,a);wv(p,l)&&null===o&&!y&&(o=!1),o=function nw(s,o,a,l){const h=function xa(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=il(a=hh(null,s,o,a,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=hh(h,s,o,a,l),null===p){let E=function Ka(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==ca(l))return s[Hr(l)]}(s,o,l);void 0!==E&&Array.isArray(E)&&(E=hh(null,s,o,E[1],l),E=il(E,o.attrs,l),function rw(s,o,a,l){s[Hr(a?o.classBindings:o.styleBindings)]=l}(s,o,l,E))}else p=function dh(s,o,a){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=il(l,s[p].hostAttrs,a);return il(l,o.attrs,a)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,l),function Dm(s,o,a,l,h,p){let y=p?o.classBindings:o.styleBindings,D=Hr(y),E=ca(y);s[l]=a;let S,T=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||ro(P,S)>0)&&(T=!0)}else S=a;if(h)if(0!==E){const U=Hr(s[D+1]);s[l+1]=gr(U,D),0!==U&&(s[U+1]=Dy(s[U+1],l)),s[D+1]=function qE(s,o){return 131071&s|o<<17}(s[D+1],l)}else s[l+1]=gr(D,0),0!==D&&(s[D+1]=Dy(s[D+1],l)),D=l;else s[l+1]=gr(E,0),0===D?D=l:s[E+1]=Dy(s[E+1],l),E=l;T&&(s[l+1]=jg(s[l+1])),xc(s,S,l,!0),xc(s,S,l,!1),function gv(s,o,a,l,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&ro(p,o)>=0&&(a[l+1]=Rf(a[l+1]))}(o,S,s,l,p),y=gr(D,E),p?o.classBindings=y:o.styleBindings=y}(h,p,o,a,y,l)}}function hh(s,o,a,l,h){let p=null;const y=a.directiveEnd;let D=a.directiveStylingLast;for(-1===D?D=a.directiveStart:D++;D<y&&(p=o[D],l=il(l,p.hostAttrs,h),p!==s);)D++;return null!==s&&(a.directiveStylingLast=D),l}function il(s,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Yn(s,y,!!a||o[++p]))}return void 0===s?null:s}function Rc(s,o,a,l,h,p,y,D){if(!(3&o.type))return;const E=s.data,T=E[D+1];up(function wy(s){return 1==(1&s)}(T)?Cs(E,o,a,h,ca(T),y):void 0)||(up(p)||function eD(s){return 2==(2&s)}(T)&&(p=Cs(E,null,a,h,D,y)),function Bg(s,o,a,l,h){const p=mn(s);if(o)h?p?s.addClass(a,l):a.classList.add(l):p?s.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:se.DashCase;if(null==h)p?s.removeStyle(a,l,y):a.style.removeProperty(l);else{const D="string"==typeof h&&h.endsWith("!important");D&&(h=h.slice(0,-10),y|=se.Important),p?s.setStyle(a,l,h,y):a.style.setProperty(l,h,D?"important":"")}}}(l,y,bo(Tr(),a),h,p))}function Cs(s,o,a,l,h,p){const y=null===o;let D;for(;h>0;){const E=s[h],T=Array.isArray(E),S=T?E[1]:E,P=null===S;let U=a[h+1];U===Rt&&(U=P?ht:void 0);let Z=P?Kl(U,l):S===l?U:void 0;if(T&&!up(Z)&&(Z=Kl(E,l)),up(Z)&&(D=Z,y))return D;const _e=s[h+1];h=y?Hr(_e):ca(_e)}if(null!==o){let E=p?o.residualClasses:o.residualStyles;null!=E&&(D=Kl(E,l))}return D}function up(s){return void 0!==s}function wv(s,o){return 0!=(s.flags&(o?16:32))}function Tm(s,o=""){const a=we(),l=Lt(),h=s+20,p=l.firstCreatePass?fc(l,h,1,o,null):l.data[h],y=a[h]=Pd(a[11],o);Lg(l,a,y,p),ti(p,!1)}function cp(s){return dp("",s,""),cp}function dp(s,o,a){const l=we(),h=za(l,s,o,a);return h!==Rt&&function Ha(s,o,a){const l=bo(o,s);Fd(s[11],l,a)}(l,Tr(),h),dp}function Ov(s,o,a){const l=we();return mr(l,qs(),o)&&Bi(Lt(),Tn(),l,s,o,l[11],a,!0),Ov}const jt=void 0;var fw=["en",[["a","p"],["AM","PM"],jt],[["AM","PM"],jt,jt],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jt,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jt,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jt,"{1} 'at' {0}",jt],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hw(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Is={};function _h(s){const o=function lo(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=kv(o);if(a)return a;const l=o.split("-")[0];if(a=kv(l),a)return a;if("en"===l)return fw;throw new Error(`Missing locale data for the locale "${s}".`)}function Cn(s){return _h(s)[bt.PluralCase]}function kv(s){return s in Is||(Is[s]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[s]),Is[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const MC=["zero","one","two","few","many"],ol="en-US",Mm={marker:"element"},sn={marker:"ICU"};var Xn=(()=>((Xn=Xn||{})[Xn.SHIFT=2]="SHIFT",Xn[Xn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Xn[Xn.COMMENT=2]="COMMENT",Xn))();let yh=ol;function Lv(s,o,a){const l=o.insertBeforeIndex,h=Array.isArray(l)?l[0]:l;return null===h?Kb(s,0,a):ln(a[h])}function Vv(s,o,a,l,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let y=l,D=null;if(3&o.type||(D=y,y=h),null!==y&&0==(2&o.flags))for(let E=1;E<p.length;E++)Ds(s,y,a[p[E]],D,!1)}}function Bv(s,o){if(s.push(o),s.length>1)for(let a=s.length-2;a>=0;a--){const l=s[a];pw(l)||gw(l,o)&&null===mw(l)&&RC(l,o.index)}}function pw(s){return!(64&s.type)}function gw(s,o){return pw(o)||s.index>o.index}function mw(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function RC(s,o){const a=s.insertBeforeIndex;Array.isArray(a)?a[0]=o:(Yb(Lv,Vv),s.insertBeforeIndex=o)}function mp(s,o){const a=s.data[o];return null===a||"string"==typeof a?null:a.hasOwnProperty("currentCaseLViewIndex")?a:a.value}function _w(s,o,a){const l=xy(s,a,64,null,null);return Bv(o,l),l}function Rm(s,o){const a=o[s.currentCaseLViewIndex];return null===a?a:a<0?~a:a}function Pr(s){return s>>>17}function Om(s){return(131070&s)>>>1}let is=0,Pc=0;function jv(s,o,a,l){const h=a[11];let y,p=null;for(let D=0;D<o.length;D++){const E=o[D];if("string"==typeof E){const T=o[++D];null===a[T]&&(a[T]=Pd(h,E))}else if("number"==typeof E)switch(1&E){case 0:const T=Pr(E);let S,P;if(null===p&&(p=T,y=Sf(h,l)),T===p?(S=l,P=y):(S=null,P=ln(a[T])),null!==P){const Ve=Om(E);Ds(h,P,a[Ve],S,!1);const ot=mp(s,Ve);if(null!==ot&&"object"==typeof ot){const Te=Rm(ot,a);null!==Te&&jv(s,ot.create[Te],a,a[ot.anchorIdx])}}break;case 1:const Z=o[++D],_e=o[++D];mc(h,bo(E>>>1,a),null,null,Z,_e,null)}else switch(E){case sn:const T=o[++D],S=o[++D];null===a[S]&&jr(a[S]=Af(h,T),a);break;case Mm:const P=o[++D],U=o[++D];null===a[U]&&jr(a[U]=Ld(h,P,null),a)}}}function Gv(s,o,a,l,h){for(let p=0;p<a.length;p++){const y=a[p],D=a[++p];if(y&h){let E="";for(let T=p+1;T<=p+D;T++){const S=a[T];if("string"==typeof S)E+=S;else if("number"==typeof S)if(S<0)E+=fe(o[l-S]);else{const P=S>>>2;switch(3&S){case 1:const U=a[++T],Z=a[++T],_e=s.data[P];"string"==typeof _e?mc(o[11],o[P],null,_e,U,E,Z):Bi(s,_e,o,U,E,o[11],Z,!1);break;case 0:const Ve=o[P];null!==Ve&&Fd(o[11],Ve,E);break;case 2:kC(s,mp(s,P),o,E);break;case 3:bw(s,mp(s,P),l,o)}}}}else{const E=a[p+1];if(E>0&&3==(3&E)){const S=mp(s,E>>>2);o[S.currentCaseLViewIndex]<0&&bw(s,S,l,o)}}p+=D}}function bw(s,o,a,l){let h=l[o.currentCaseLViewIndex];if(null!==h){let p=is;h<0&&(h=l[o.currentCaseLViewIndex]=~h,p=-1),Gv(s,l,o.update[h],a,p)}}function kC(s,o,a,l){const h=function Hv(s,o){let a=s.cases.indexOf(o);if(-1===a)switch(s.type){case 1:{const l=function Pv(s,o){const a=Cn(o)(parseInt(s,10)),l=MC[a];return void 0!==l?l:"other"}(o,function xm(){return yh}());a=s.cases.indexOf(l),-1===a&&"other"!==l&&(a=s.cases.indexOf("other"));break}case 0:a=s.cases.indexOf("other")}return-1===a?null:a}(o,l);if(Rm(o,a)!==h&&(vh(s,o,a),a[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const y=a[o.anchorIdx];y&&jv(s,o.create[h],a,y)}}function vh(s,o,a){let l=Rm(o,a);if(null!==l){const h=o.remove[l];for(let p=0;p<h.length;p++){const y=h[p];if(y>0){const D=bo(y,a);null!==D&&py(a[11],D)}else vh(s,mp(s,~y),a)}}}function PC(){const s=[];let a,l,o=-1;function p(D,E){o=0;const T=Rm(D,E);l=null!==T?D.remove[T]:ht}function y(){if(o<l.length){const D=l[o++];return D>0?a[D]:(s.push(o,l),p(a[1].data[~D],a),y())}return 0===s.length?null:(l=s.pop(),o=s.pop(),y())}return function h(D,E){for(a=E;s.length;)s.pop();return p(D.value,E),y}}const km=/\ufffd(\d+):?\d*\ufffd/gi,bh=/\ufffd(\d+)\ufffd/,Fc=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,UC=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,jC=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Dw=/\uE500/g;function Wv(s,o,a,l,h,p,y){const D=$u(s,l,1,null);let E=D<<Xn.SHIFT,T=Xo();o===T&&(T=null),null===T&&(E|=Xn.APPEND_EAGERLY),y&&(E|=Xn.COMMENT,function vt(s){void 0===je&&(je=s())}(PC)),h.push(E,null===p?"":p);const S=xy(s,D,y?32:1,null===p?"":p,null);Bv(a,S);const P=S.index;return ti(S,!1),null!==T&&o!==T&&function _p(s,o){let a=s.insertBeforeIndex;null===a?(Yb(Lv,Vv),a=s.insertBeforeIndex=[null,o]):(function z(s,o,a){s!=o&&_t(a,s,o,"==")}(Array.isArray(a),!0,"Expecting array here"),a.push(o))}(T,P),S}function Vo(s,o,a,l,h,p,y){const D=y.match(km),E=Wv(s,o,a,p,l,D?null:y,!1);D&&Ya(h,y,E.index,null,0,null)}function Ya(s,o,a,l,h,p){const y=s.length,D=y+1;s.push(null,null);const E=y+2,T=o.split(km);let S=0;for(let P=0;P<T.length;P++){const U=T[P];if(1&P){const Z=h+parseInt(U,10);s.push(-1-Z),S|=Cw(Z)}else""!==U&&s.push(U)}return s.push(a<<2|(l?1:0)),l&&s.push(l,p),s[y]=S,s[D]=s.length-E,S}function Cw(s){return 1<<Math.min(s,31)}function Iw(s){let o,p,a="",l=0,h=!1;for(;null!==(o=UC.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(l=o.index,h=!1):(a+=s.substring(l,o.index+o[0].length),p=o[1],h=!0);return a+=s.substr(l),a}function Tw(s,o,a,l,h,p){let y=0;const D={type:h.type,currentCaseLViewIndex:$u(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function ZC(s,o,a){s.push(Cw(o.mainBinding),2,-1-o.mainBinding,a<<2|2)})(a,h,p),function OC(s,o,a){const l=s.data[o];null===l?s.data[o]=a:l.value=a}(s,p,D);const E=h.values;for(let T=0;T<E.length;T++){const S=E[T],P=[];for(let U=0;U<S.length;U++){const Z=S[U];if("string"!=typeof Z){const _e=P.push(Z)-1;S[U]=`\x3c!--\ufffd${_e}\ufffd--\x3e`}}y=zC(s,D,o,a,l,h.cases[T],S.join(""),P)|y}y&&function KC(s,o,a){s.push(o,1,a<<2|3)}(a,y,p)}function WC(s){const o=[],a=[];let l=1,h=0;const p=zv(s=s.replace(Fc,function(y,D,E){return l="select"===E?0:1,h=parseInt(D.substr(1),10),""}));for(let y=0;y<p.length;){let D=p[y++].trim();1===l&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&o.push(D);const E=zv(p[y++]);o.length>a.length&&a.push(E)}return{type:l,mainBinding:h,cases:o,values:a}}function zv(s){if(!s)return[];let o=0;const a=[],l=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const D=p.index;if("}"==p[0]){if(a.pop(),0==a.length){const E=s.substring(o,D);Fc.test(E)?l.push(WC(E)):l.push(E),o=D+1}}else{if(0==a.length){const E=s.substring(o,D);l.push(E),o=D+1}a.push("{")}}const y=s.substring(o);return l.push(y),l}function zC(s,o,a,l,h,p,y,D){const E=[],T=[],S=[];o.cases.push(p),o.create.push(E),o.remove.push(T),o.update.push(S);const U=function Eg(s){const o=new W_(s);return function z_(){try{return!!(new window.DOMParser).parseFromString(Fa(""),"text/html")}catch(s){return!1}}()?new $_(o):o}(Aa()).getInertBodyElement(y),Z=function pf(s){return"content"in s&&function gf(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(U)||U;return Z?Aw(s,o,a,l,E,T,S,Z,h,D,0):0}function Aw(s,o,a,l,h,p,y,D,E,T,S){let P=0,U=D.firstChild;for(;U;){const Z=$u(s,a,1,null);switch(U.nodeType){case Node.ELEMENT_NODE:const _e=U,Ve=_e.tagName.toLowerCase();if(lf.hasOwnProperty(Ve)){qv(h,Mm,Ve,E,Z),s.data[Z]=Ve;const Ze=_e.attributes;for(let Zt=0;Zt<Ze.length;Zt++){const gn=Ze.item(Zt),Ts=gn.name.toLowerCase();gn.value.match(km)?aa.hasOwnProperty(Ts)&&Ya(y,gn.value,Z,gn.name,0,cf[Ts]?Vu:df[Ts]?uf:null):YC(h,Z,gn)}P=Aw(s,o,a,l,h,p,y,U,Z,T,S+1)|P,Nw(p,Z,S)}break;case Node.TEXT_NODE:const xe=U.textContent||"",ot=xe.match(km);qv(h,null,ot?"":xe,E,Z),Nw(p,Z,S),ot&&(P=Ya(y,xe,Z,null,0,null)|P);break;case Node.COMMENT_NODE:const Te=bh.exec(U.textContent||"");if(Te){const Zt=T[parseInt(Te[1],10)];qv(h,sn,"",E,Z),Tw(s,a,l,E,Zt,Z),qC(p,Z,S)}}U=U.nextSibling}return P}function Nw(s,o,a){0===a&&s.push(o)}function qC(s,o,a){0===a&&(s.push(~o),s.push(o))}function qv(s,o,a,l,h){null!==o&&s.push(o),s.push(a,h,function yp(s,o,a){return s|o<<17|a<<1}(0,l,h))}function YC(s,o,a){s.push(o<<1|1,a.name,a.value)}function Rw(s,o,a=-1){const l=Lt(),h=we(),p=20+s,y=ei(l.consts,o),D=Xo();l.firstCreatePass&&function GC(s,o,a,l,h,p){const y=Xo(),D=[],E=[],T=[[]];h=function $C(s,o){if(function HC(s){return-1===s}(o))return Iw(s);{const a=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,l=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return Iw(s.substring(a,l))}}(h,p);const S=function Zr(s){return s.replace(Dw," ")}(h).split(jC);for(let P=0;P<S.length;P++){let U=S[P];if(0==(1&P)){const Z=zv(U);for(let _e=0;_e<Z.length;_e++){let Ve=Z[_e];if(0==(1&_e)){const xe=Ve;""!==xe&&Vo(s,y,T[0],D,E,a,xe)}else{const xe=Ve;if("object"!=typeof xe)throw new Error(`Unable to parse ICU expression in "${h}" message.`);Tw(s,a,E,o,xe,Wv(s,y,T[0],a,D,"",!0).index)}}}else{const Z=47===U.charCodeAt(0),Ve=(U.charCodeAt(Z?1:0),20+Number.parseInt(U.substring(Z?2:1)));if(Z)T.shift(),ti(Xo(),!1);else{const xe=_w(s,T[0],Ve);T.unshift([]),ti(xe,!0)}}}s.data[l]={create:D,update:E}}(l,null===D?0:D.index,h,p,y,a);const E=l.data[p],S=jE(l,D===h[6]?null:D,h);(function vw(s,o,a,l){const h=s[11];for(let p=0;p<o.length;p++){const y=o[p++],D=o[p],E=(y&Xn.COMMENT)===Xn.COMMENT,T=(y&Xn.APPEND_EAGERLY)===Xn.APPEND_EAGERLY,S=y>>>Xn.SHIFT;let P=s[S];null===P&&(P=s[S]=E?h.createComment(D):Pd(h,D)),T&&null!==a&&Ds(h,a,P,l,!1)}})(h,E.create,S,D&&8&D.type?h[D.index]:null),Au(!0)}function al(s,o,a){Rw(s,o,a),function Dh(){Au(!1)}()}function Ja(s){return function yw(s){s&&(is|=1<<Math.min(Pc,31)),Pc++}(mr(we(),qs(),s)),Ja}function Kv(s){!function vp(s,o,a){if(Pc>0){const l=s.data[a];Gv(s,o,Array.isArray(l)?l:l.update,function gi(){return pt.lFrame.bindingIndex}()-Pc-1,is)}is=0,Pc=0}(Lt(),we(),s+20)}function vr(s,o,a,l,h){if(s=Q(s),Array.isArray(s))for(let p=0;p<s.length;p++)vr(s[p],o,a,l,h);else{const p=Lt(),y=we();let D=th(s)?s:Q(s.provide),E=Xd(s);const T=vn(),S=1048575&T.providerIndexes,P=T.directiveStart,U=T.providerIndexes>>20;if(th(s)||!s.multi){const Z=new ea(E,h,fa),_e=wp(D,o,h?S:S+U,P);-1===_e?(Js(_n(T,y),p,D),Dp(p,s,o.length),o.push(D),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(Z),y.push(Z)):(a[_e]=Z,y[_e]=Z)}else{const Z=wp(D,o,S+U,P),_e=wp(D,o,S,S+U),Ve=Z>=0&&a[Z],xe=_e>=0&&a[_e];if(h&&!xe||!h&&!Ve){Js(_n(T,y),p,D);const ot=function Pw(s,o,a,l,h){const p=new ea(s,a,fa);return p.multi=[],p.index=o,p.componentProviders=0,Fm(p,h,l&&!a),p}(h?kw:ul,a.length,h,l,E);!h&&xe&&(a[_e].providerFactory=ot),Dp(p,s,o.length,0),o.push(D),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(ot),y.push(ot)}else Dp(p,s,Z>-1?Z:_e,Fm(a[h?_e:Z],E,!h&&l));!h&&l&&xe&&a[_e].componentProviders++}}}function Dp(s,o,a,l){const h=th(o),p=function oC(s){return!!s.useClass}(o);if(h||p){const E=(p?Q(o.useClass):o).prototype.ngOnDestroy;if(E){const T=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const S=T.indexOf(a);-1===S?T.push(a,[l,E]):T[S+1].push(l,E)}else T.push(a,E)}}}function Fm(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function wp(s,o,a,l){for(let h=a;h<l;h++)if(o[h]===s)return h;return-1}function ul(s,o,a,l){return Jv(this.multi,[])}function kw(s,o,a,l){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=Ri(a,a[1],this.providerFactory.index,l);p=D.slice(0,y),Jv(h,p);for(let E=y;E<D.length;E++)p.push(D[E])}else p=[],Jv(h,p);return p}function Jv(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Ep(s,o=[]){return a=>{a.providersResolver=(l,h)=>function Ow(s,o,a){const l=Lt();if(l.firstCreatePass){const h=Qr(s);vr(a,l.data,l.blueprint,h,!0),vr(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class ll{}class Qv{resolveComponentFactory(o){throw function wh(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ch=(()=>{class s{}return s.NULL=new Qv,s})();function Fw(){return Ih(vn(),we())}function Ih(s,o){return new Th(Cr(s,o))}let Th=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Fw,s})();function Lw(s){return s instanceof Th?s.nativeElement:s}class Ah{}let Nh=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Bw(){const s=we(),a=Ir(vn().index,s);return function tI(s){return s[11]}(Ni(a)?a:s)}(),s})(),nI=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class Uw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const jw=new Uw("13.3.2"),Sh={};function Uo(s,o,a,l,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(ln(p)),fi(p))for(let D=10;D<p.length;D++){const E=p[D],T=E[1].firstChild;null!==T&&Uo(E[1],E,T,l)}const y=a.type;if(8&y)Uo(s,o,a.child,l);else if(32&y){const D=nt(a,o);let E;for(;E=D();)l.push(E)}else if(16&y){const D=Jb(o,a);if(Array.isArray(D))l.push(...D);else{const E=Sn(o[16]);Uo(E[1],E,D,l,!0)}}a=h?a.projectionNext:a.next}return l}class jo{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Uo(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(fi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(ay(o,l),vs(a,l))}this._attachedToViewContainer=!1}uy(this._lView[1],this._lView)}onDestroy(o){bD(this._lView[1],this._lView,null,o)}markForCheck(){Qg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function SD(s,o,a){zs(!0);try{qd(s,o,a)}finally{zs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Og(s,o){Vg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class Gw extends jo{constructor(o){super(o),this._view=o}detectChanges(){Xg(this._view)}checkNoChanges(){!function MD(s){zs(!0);try{Xg(s)}finally{zs(!1)}}(this._view)}get context(){return null}}class Hw extends Ch{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Wt(o);return new e0(a,this.ngModule)}}function $w(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class e0 extends ll{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function by(s){return s.map(WE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return $w(this.componentDef.inputs)}get outputs(){return $w(this.componentDef.outputs)}create(o,a,l,h){const p=(h=h||this.ngModule)?function Lm(s,o){return{get:(a,l,h)=>{const p=s.get(a,Sh,h);return p!==Sh||l===Sh?p:o.get(a,l,h)}}}(o,h.injector):o,y=p.get(Ah,Jo),D=p.get(nI,null),E=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=l?function zg(s,o,a){if(mn(s))return s.selectRootElement(o,a===$t.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(E,l,this.componentDef.encapsulation):Ld(y.createRenderer(null,this.componentDef),T,function Xv(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),P=this.componentDef.onPush?576:528,U=function LD(s,o){return{components:[],scheduler:s||iy,clean:Hf,playerHandler:o||null,flags:0}}(),Z=Bf(0,null,null,1,0,null,null,null,null,null),_e=hc(null,Z,U,P,null,null,y,E,D,p);let Ve,xe;Do(_e);try{const ot=function sr(s,o,a,l,h,p){const y=a[1];a[20]=s;const E=fc(y,20,2,"#host",null),T=E.mergedAttrs=o.hostAttrs;null!==T&&(Kd(E,T,!0),null!==s&&(gt(h,s,T),null!==E.classes&&ws(h,s,E.classes),null!==E.styles&&Qb(h,s,E.styles)));const S=l.createRenderer(s,o),P=hc(a,_D(o),null,o.onPush?64:16,a[20],E,l,S,p||null,null);return y.firstCreatePass&&(Js(_n(E,a),y,o.type),Ly(y,E),zd(E,a.length,1)),zu(a,P),a[20]=P}(S,this.componentDef,_e,y,E);if(S)if(l)gt(E,S,["ng-version",jw.full]);else{const{attrs:Te,classes:Ze}=function zE(s){const o=[],a=[];let l=1,h=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++l]):8===h&&a.push(p);else{if(!Po(h))break;h=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Te&&gt(E,S,Te),Ze&&Ze.length>0&&ws(E,S,Ze.join(" "))}if(xe=Na(Z,20),void 0!==a){const Te=xe.projection=[];for(let Ze=0;Ze<this.ngContentSelectors.length;Ze++){const Zt=a[Ze];Te.push(null!=Zt?Array.from(Zt):null)}}Ve=function Jy(s,o,a,l,h){const p=a[1],y=function wD(s,o,a){const l=vn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Vy(s,l,o,$u(s,o,1,null),a));const h=Ri(o,s,l.directiveStart,l);jr(h,o);const p=Cr(l,o);return p&&jr(p,o),h}(p,a,o);if(l.components.push(y),s[8]=y,h&&h.forEach(E=>E(y,o)),o.contentQueries){const E=vn();o.contentQueries(1,y,E.directiveStart)}const D=vn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ks(D.index),ED(a[1],D,0,D.directiveStart,D.directiveEnd,o),CD(o,y)),y}(ot,this.componentDef,_e,U,[dC]),pc(Z,_e,null)}finally{Eo()}return new Bm(this.componentType,Ve,Ih(xe,_e),_e,xe)}}class Bm extends class Lc{}{constructor(o,a,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Gw(h),this.componentType=o}get injector(){return new Oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Vc{}class Gi{}const Bc=new Map;class cl extends Vc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hw(this);const l=hn(o);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=Mn(o,a,[{provide:Vc,useValue:this},{provide:Ch,useValue:this.componentFactoryResolver}],he(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ao.THROW_IF_NOT_FOUND,l=dt.Default){return o===ao||o===Vc||o===nm?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class n0 extends Gi{constructor(o){super(),this.moduleType=o,null!==hn(o)&&function zw(s){const o=new Set;!function a(l){const h=hn(l,!0),p=h.id;null!==p&&(function jm(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${he(o)} vs ${he(o.name)}`)}(p,Bc.get(p),l),Bc.set(p,l));const y=g(h.imports);for(const D of y)o.has(D)||(o.add(D),a(D))}(s)}(o)}create(o){return new cl(this.moduleType,o)}}function r0(s,o,a,l){return function o0(s,o,a,l,h,p){const y=o+a;return mr(s,y,h)?ha(s,y+1,p?l.call(p,h):l(h)):hl(s,y+1)}(we(),fr(),s,o,a,l)}function Qa(s,o,a,l,h){return function Zw(s,o,a,l,h,p,y){const D=o+a;return Ju(s,D,h,p)?ha(s,D+2,y?l.call(y,h,p):l(h,p)):hl(s,D+2)}(we(),fr(),s,o,a,l,h)}function dl(s,o,a,l,h,p){return function Kw(s,o,a,l,h,p,y,D){const E=o+a;return function Yf(s,o,a,l,h){const p=Ju(s,o,a,l);return mr(s,o+2,h)||p}(s,E,h,p,y)?ha(s,E+3,D?l.call(D,h,p,y):l(h,p,y)):hl(s,E+3)}(we(),fr(),s,o,a,l,h,p)}function hl(s,o){const a=s[o];return a===Rt?void 0:a}function Ip(s){return o=>{setTimeout(s,void 0,o)}}const ya=class Gm extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var h,p,y;let D=o,E=a||(()=>null),T=l;if(o&&"object"==typeof o){const P=o;D=null===(h=P.next)||void 0===h?void 0:h.bind(P),E=null===(p=P.error)||void 0===p?void 0:p.bind(P),T=null===(y=P.complete)||void 0===y?void 0:y.bind(P)}this.__isAsync&&(E=Ip(E),D&&(D=Ip(D)),T&&(T=Ip(T)));const S=super.subscribe({next:D,error:E,complete:T});return o instanceof K.w0&&o.add(S),S}};function c0(){return this._results[yc()]()}class Hm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=yc(),l=Hm.prototype;l[a]||(l[a]=c0)}get changes(){return this._changes||(this._changes=new ya)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=Sr(o);(this._changesDetected=!function $l(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],p=o[l];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Tp=(()=>{class s{}return s.__NG_ELEMENT_ID__=d0,s})();const Xw=Tp,e1=class extends Xw{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=hc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),pc(a,l,o),new jo(l)}};function d0(){return $m(vn(),we())}function $m(s,o){return 4&s.type?new e1(o,s,Ih(s,o)):null}let Ap=(()=>{class s{}return s.__NG_ELEMENT_ID__=lI,s})();function lI(){return Wm(vn(),we())}const t1=Ap,n1=class extends t1{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ih(this._hostTNode,this._hostLView)}get injector(){return new Oi(this._hostTNode,this._hostLView)}get parentInjector(){const o=mi(this._hostTNode,this._hostLView);if(_d(o)){const a=xi(o,this._hostLView),l=pn(o);return new Oi(a[1].data[l+8],a)}return new Oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Gc(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const h=o.createEmbeddedView(a||{});return this.insert(h,l),h}createComponent(o,a,l,h,p){const y=o&&!function ra(s){return"function"==typeof s}(o);let D;if(y)D=a;else{const P=a||{};D=P.index,l=P.injector,h=P.projectableNodes,p=P.ngModuleRef}const E=y?o:new e0(Wt(o)),T=l||this.parentInjector;if(!p&&null==E.ngModule){const U=(y?T:this.parentInjector).get(Vc,null);U&&(p=U)}const S=E.create(T,h,void 0,p);return this.insert(S.hostView,D),S}insert(o,a){const l=o._lView,h=l[1];if(function bu(s){return fi(s[3])}(l)){const S=this.indexOf(o);if(-1!==S)this.detach(S);else{const P=l[3],U=new n1(P,P[6],P[3]);U.detach(U.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function Pg(s,o,a,l){const h=10+l,p=a.length;l>0&&(a[h-1][4]=o),l<p-10?(o[4]=a[h],Wl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function Vd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const D=o[19];null!==D&&D.insertView(s),o[2]|=128}(h,l,y,p);const D=fy(p,y),E=l[11],T=Sf(E,y[7]);return null!==T&&function Nf(s,o,a,l,h,p){l[0]=h,l[6]=o,Vg(s,l,a,1,h,p)}(h,y[6],E,l,T,D),o.attachToViewContainerRef(),Wl(pl(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Gc(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=ay(this._lContainer,a);l&&(vs(pl(this._lContainer),a),uy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=ay(this._lContainer,a);return l&&null!=vs(pl(this._lContainer),a)?new jo(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Gc(s){return s[8]}function pl(s){return s[8]||(s[8]=[])}function Wm(s,o){let a;const l=o[s.index];if(fi(l))a=l;else{let h;if(8&s.type)h=ln(l);else{const p=o[11];h=p.createComment("");const y=Cr(s,o);Ds(p,Sf(p,y),h,function HE(s,o){return mn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=a=By(l,o,h,s),zu(o,a)}return new n1(a,s,o)}class qm{constructor(o){this.queryList=o,this.matches=null}clone(){return new qm(this.queryList)}setDirty(){this.queryList.setDirty()}}class h0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new h0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Sp(o,a).matches&&this.queries[a].setDirty()}}class Zm{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class f0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new f0(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Np{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Np(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,a,dI(a,p)),this.matchTNodeWithReadOption(o,a,yi(a,o,p,!1,!1))}else l===Tp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,yi(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Th||h===Ap||h===Tp&&4&a.type)this.addMatch(a.index,-2);else{const p=yi(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function dI(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function p0(s,o,a,l){return-1===a?function hI(s,o){return 11&s.type?Ih(s,o):4&s.type?$m(s,o):null}(o,s):-2===a?function Kr(s,o,a){return a===Th?Ih(o,s):a===Tp?$m(o,s):a===Ap?Wm(o,s):void 0}(s,o,l):Ri(s,s[1],a,o)}function i1(s,o,a,l){const h=o[19].queries[l];if(null===h.matches){const p=s.data,y=a.matches,D=[];for(let E=0;E<y.length;E+=2){const T=y[E];D.push(T<0?null:p0(o,p[T],y[E+1],a.metadata.read))}h.matches=D}return h.matches}function g0(s,o,a,l){const h=s.queries.getByIndex(a),p=h.matches;if(null!==p){const y=i1(s,o,h,a);for(let D=0;D<p.length;D+=2){const E=p[D];if(E>0)l.push(y[D/2]);else{const T=p[D+1],S=o[-E];for(let P=10;P<S.length;P++){const U=S[P];U[17]===U[3]&&g0(U[1],U,T,l)}if(null!==S[9]){const P=S[9];for(let U=0;U<P.length;U++){const Z=P[U];g0(Z[1],Z,T,l)}}}}}return l}function s1(s){const o=we(),a=Lt(),l=Rl();Ol(l+1);const h=Sp(a,l);if(s.dirty&&Hs(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?g0(a,o,l,[]):i1(a,o,h,l);s.reset(p,Lw),s.notifyOnChanges()}return!0}return!1}function o1(s,o,a){const l=Lt();l.firstCreatePass&&(y0(l,new Zm(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),_0(l,we(),o)}function a1(s,o,a,l){const h=Lt();if(h.firstCreatePass){const p=vn();y0(h,new Zm(o,a,l),p.index),function v0(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}_0(h,we(),a)}function u1(){return function m0(s,o){return s[19].queries[o].queryList}(we(),Rl())}function _0(s,o,a){const l=new Hm(4==(4&a));bD(s,o,l,l.destroy),null===o[19]&&(o[19]=new h0),o[19].queries.push(new qm(l))}function y0(s,o,a){null===s.queries&&(s.queries=new f0),s.queries.track(new Np(o,a))}function Sp(s,o){return s.queries.getByIndex(o)}function xh(s,o){return $m(s,o)}function Ph(...s){}const t_=new An("Application Initializer");let Rp=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Ph,this.reject=Ph,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(_m(p))a.push(p);else if(uv(p)){const y=new Promise((D,E)=>{p.subscribe({complete:D,error:E})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Xe(t_,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const n_=new An("AppId",{providedIn:"root",factory:function qc(){return`${Op()}${Op()}${Op()}`}});function Op(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Kc=new An("Platform Initializer"),Yc=new An("Platform ID"),R0=new An("appBootstrapListener");let D1=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();const Pp=new An("LocaleId",{providedIn:"root",factory:()=>xt(Pp,dt.Optional|dt.SkipSelf)||function bI(){return"undefined"!=typeof $localize&&$localize.locale||ol}()}),O0=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class DI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let k0=(()=>{class s{compileModuleSync(a){return new n0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(hn(a).declarations).reduce((y,D)=>{const E=Wt(D);return E&&y.push(new e0(E)),y},[]);return new DI(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const C1=(()=>Promise.resolve(0))();function F0(s){"undefined"==typeof Zone?C1.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class co{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ya(!1),this.onMicrotaskEmpty=new ya(!1),this.onStable=new ya(!1),this.onError=new ya(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function I1(){let s=Gt.requestAnimationFrame,o=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function EI(s){const o=()=>{!function wI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Gt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,L0(s),s.isCheckStableRunning=!0,r_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),L0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,p,y,D)=>{try{return A1(s),a.invokeTask(h,p,y,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),i_(s)}},onInvoke:(a,l,h,p,y,D,E)=>{try{return A1(s),a.invoke(h,p,y,D,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),i_(s)}},onHasTask:(a,l,h,p)=>{a.hasTask(h,p),l===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,L0(s),r_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,h,p)=>(a.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!co.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(co.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,T1,Ph,Ph);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const T1={};function r_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function L0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function A1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function i_(s){s._nesting--,r_(s)}class V0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ya,this.onMicrotaskEmpty=new ya,this.onStable=new ya,this.onError=new ya}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}let s_=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{co.assertNotInAngularZone(),F0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())F0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(Xe(co))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),N1=(()=>{class s{constructor(){this._applications=new Map,Fp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Fp.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();class B0{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function CI(s){Fp=s}let ho,Fp=new B0;const o_=new An("AllowMultipleToken");class AI{constructor(o,a){this.name=o,this.token=a}}function S1(s,o,a=[]){const l=`Platform: ${o}`,h=new An(l);return(p=[])=>{let y=a_();if(!y||y.injector.get(o_,!1))if(s)s(a.concat(p).concat({provide:h,useValue:!0}));else{const D=a.concat(p).concat({provide:h,useValue:!0},{provide:$a,useValue:"platform"});!function j0(s){if(ho&&!ho.destroyed&&!ho.injector.get(o_,!1))throw new ke(400,"");ho=s.get(u_);const o=s.get(Kc,null);o&&o.forEach(a=>a())}(ao.create({providers:D,name:l}))}return function G0(s){const o=a_();if(!o)throw new ke(401,"");return o}()}}function a_(){return ho&&!ho.destroyed?ho:null}let u_=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const D=function H0(s,o){let a;return a="noop"===s?new V0:("zone.js"===s?void 0:s)||new co({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),E=[{provide:co,useValue:D}];return D.run(()=>{const T=ao.create({providers:E,parent:this.injector,name:a.moduleType.name}),S=a.create(T),P=S.injector.get(xr,null);if(!P)throw new ke(402,"");return D.runOutsideAngular(()=>{const U=D.onError.subscribe({next:Z=>{P.handleError(Z)}});S.onDestroy(()=>{W0(this._modules,S),U.unsubscribe()})}),function Fh(s,o,a){try{const l=a();return _m(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(P,D,()=>{const U=S.injector.get(Rp);return U.runInitializers(),U.donePromise.then(()=>(function gp(s){(function ct(s,o){null==s&&_t(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(yh=s.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Pp,ol)||ol),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const h=$0({},l);return function U0(s,o,a){const l=new n0(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const l=a.injector.get(Lp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Xe(ao))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();function $0(s,o){return Array.isArray(o)?o.reduce($0,s):Object.assign(Object.assign({},s),o)}let Lp=(()=>{class s{constructor(a,l,h,p,y){this._zone=a,this._injector=l,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new k.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),E=new k.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{co.assertNotInAngularZone(),F0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{co.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,oe.T)(D,E.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let h;h=a instanceof ll?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(h.componentType);const p=function TI(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Vc),D=h.create(ao.NULL,[],l||h.selector,p),E=D.location.nativeElement,T=D.injector.get(s_,null),S=T&&D.injector.get(N1);return T&&S&&S.registerApplication(E,T),D.onDestroy(()=>{this.detachView(D.hostView),W0(this.components,D),S&&S.unregisterApplication(E)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;W0(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(R0,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Xe(co),Xe(ao),Xe(xr),Xe(Ch),Xe(Rp))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function W0(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let c_=!0,M1=!1;function z0(){return M1=!0,c_}function NI(){if(M1)throw new Error("Cannot enable prod mode after platform setup.");c_=!1}let q0=(()=>{class s{}return s.__NG_ELEMENT_ID__=SI,s})();function SI(s){return function Z0(s,o,a){if(Vs(s)&&!a){const l=Ir(s.index,o);return new jo(l,l)}return 47&s.type?new jo(o[16],o):null}(vn(),we(),16==(16&s))}class F1{constructor(){}supports(o){return Yu(o)}create(o){return new X0(o)}}const L1=(s,o)=>o;class X0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||L1}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<m_(l,h,p)?a:l,D=m_(y,h,p),E=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{p||(p=[]);const T=D-h,S=E-h;if(T!=S){for(let U=0;U<T;U++){const Z=U<p.length?p[U]:p[U]=0,_e=Z+U;S<=_e&&_e<T&&(p[U]=Z+1)}p[y.previousIndex]=S-T}}D!==E&&o(y,D,E)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Yu(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)p=o[D],y=this._trackByFn(D,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,D)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,D),l=!0),a=a._next}else h=0,function ev(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[yc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,D=>{y=this._trackByFn(h,D),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,D,y,h)),Object.is(a.item,D)||this._addIdentityChange(a,D)):(a=this._mismatch(a,D,y,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new V1(a,l),p,h),o}_verifyReinsertion(o,a,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new g_),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new g_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class V1{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class g_{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new eb,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function m_(s,o,a){const l=s.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class Up{constructor(){}supports(o){return o instanceof Map||rh(o)}create(){return new tb}}class tb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||rh(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const l=new B1(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class B1{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function __(){return new y_([new F1])}let y_=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||__()),deps:[[s,new So,new Di]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new ke(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:__}),s})();function Jc(){return new jp([new Up])}let jp=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Jc()),deps:[[s,new So,new Di]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:Jc}),s})();const j1=S1(null,"core",[{provide:Yc,useValue:"unknown"},{provide:u_,deps:[ao]},{provide:N1,deps:[]},{provide:D1,deps:[]}]);let LI=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Xe(Lp))},s.\u0275mod=Y({type:s}),s.\u0275inj=en({}),s})()},3942:(ut,Ee,O)=>{O.d(Ee,{Z:()=>ke});var c=O(2090),K=O(4859),k=O(9681),oe=O(1877);class X{constructor(fe,De){this._delegate=fe,this.firebase=De,(0,k._addComponent)(fe,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,De=k._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(fe);return!Ke.isInitialized()&&"EXPLICIT"===(null===(rt=Ke.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:De})}_removeServiceInstance(fe,De=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(De)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function le(){const Be=function he(Be){const fe={},De={__esModule:!0,initializeApp:function Ce(He,te={}){const z=k.initializeApp(He,te);if((0,c.r3)(fe,z.name))return fe[z.name];const ne=new Be(z,De);return fe[z.name]=ne,ne},app:Ke,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function be(He){const te=He.name,z=te.replace("-compat","");if(k._registerComponent(He)&&"PUBLIC"===He.type){const ne=(me=Ke())=>{if("function"!=typeof me[z])throw re.create("invalid-app-argument",{appName:te});return me[z]()};void 0!==He.serviceProps&&(0,c.ZB)(ne,He.serviceProps),De[z]=ne,Be.prototype[z]=function(...me){return this._getService.bind(this,te).apply(this,He.multipleInstances?me:[])}}return"PUBLIC"===He.type?De[z]:null},removeApp:function rt(He){delete fe[He]},useAsService:function We(He,te){return"serverAuth"===te?null:te},modularAPIs:k}};function Ke(He){if(!(0,c.r3)(fe,He=He||k._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:He});return fe[He]}return De.default=De,Object.defineProperty(De,"apps",{get:function ye(){return Object.keys(fe).map(He=>fe[He])}}),Ke.App=Be,De}(X);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function fe(De){(0,c.ZB)(Be,De)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Be}(),H=new oe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=G;!function Ae(Be){(0,k.registerVersion)("@firebase/app-compat","0.1.21",Be)}()},9681:(ut,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Ai,_apps:()=>_t,_clearComponents:()=>Ht,_components:()=>cn,_getProvider:()=>os,_registerComponent:()=>on,_removeServiceInstance:()=>en,deleteApp:()=>us,getApp:()=>Lr,getApps:()=>as,initializeApp:()=>Hi,onLog:()=>tr,registerVersion:()=>Jr,setLogLevel:()=>qn});var c=O(5861),K=O(4859),k=O(1877),oe=O(2090);class X{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ge(Ye){const Ie=Ye.getComponent();return"VERSION"===(null==Ie?void 0:Ie.type)}(tt)){const ft=tt.getImmediate();return`${ft.library}/${ft.version}`}return null}).filter(tt=>tt).join(" ")}}const re="@firebase/app",le=new k.Yd("@firebase/app"),Rn="[DEFAULT]",ct={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_t=new Map,cn=new Map;function dn(Ye,Ie){try{Ye.container.addComponent(Ie)}catch(tt){le.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Ye.name}`,tt)}}function Ai(Ye,Ie){Ye.container.addOrOverwriteComponent(Ie)}function on(Ye){const Ie=Ye.name;if(cn.has(Ie))return le.debug(`There were multiple attempts to register component ${Ie}.`),!1;cn.set(Ie,Ye);for(const tt of _t.values())dn(tt,Ye);return!0}function os(Ye,Ie){const tt=Ye.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),Ye.container.getProvider(Ie)}function en(Ye,Ie,tt=Rn){os(Ye,Ie).clearInstance(tt)}function Ht(){cn.clear()}const ci=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Os{constructor(Ie,tt,ft){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}const Fr="9.6.10";function Hi(Ye,Ie={}){"object"!=typeof Ie&&(Ie={name:Ie});const tt=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},Ie),ft=tt.name;if("string"!=typeof ft||!ft)throw ci.create("bad-app-name",{appName:String(ft)});const Ut=_t.get(ft);if(Ut){if((0,oe.vZ)(Ye,Ut.options)&&(0,oe.vZ)(tt,Ut.config))return Ut;throw ci.create("duplicate-app",{appName:ft})}const Ft=new K.H0(ft);for(const V of cn.values())Ft.addComponent(V);const j=new Os(Ye,tt,Ft);return _t.set(ft,j),j}function Lr(Ye=Rn){const Ie=_t.get(Ye);if(!Ie)throw ci.create("no-app",{appName:Ye});return Ie}function as(){return Array.from(_t.values())}function us(Ye){return dt.apply(this,arguments)}function dt(){return(dt=(0,c.Z)(function*(Ye){const Ie=Ye.name;_t.has(Ie)&&(_t.delete(Ie),yield Promise.all(Ye.container.getProviders().map(tt=>tt.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function Jr(Ye,Ie,tt){var ft;let Ut=null!==(ft=ct[Ye])&&void 0!==ft?ft:Ye;tt&&(Ut+=`-${tt}`);const Ft=Ut.match(/\s|\//),j=Ie.match(/\s|\//);if(Ft||j){const V=[`Unable to register library "${Ut}" with version "${Ie}":`];return Ft&&V.push(`library name "${Ut}" contains illegal characters (whitespace or "/")`),Ft&&j&&V.push("and"),j&&V.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void le.warn(V.join(" "))}on(new K.wA(`${Ut}-version`,()=>({library:Ut,version:Ie}),"VERSION"))}function tr(Ye,Ie){if(null!==Ye&&"function"!=typeof Ye)throw ci.create("invalid-log-argument");(0,k.Am)(Ye,Ie)}function qn(Ye){(0,k.Ub)(Ye)}const yn="firebase-heartbeat-store";let nr=null;function ks(){return nr||(nr=(0,oe.X3)("firebase-heartbeat-database",1,(Ye,Ie)=>{0===Ie&&Ye.createObjectStore(yn)}).catch(Ye=>{throw ci.create("storage-open",{originalErrorMessage:Ye.message})})),nr}function $t(){return($t=(0,c.Z)(function*(Ye){try{return(yield ks()).transaction(yn).objectStore(yn).get(lr(Ye))}catch(Ie){throw ci.create("storage-get",{originalErrorMessage:Ie.message})}})).apply(this,arguments)}function at(Ye,Ie){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,c.Z)(function*(Ye,Ie){try{const ft=(yield ks()).transaction(yn,"readwrite");return yield ft.objectStore(yn).put(Ie,lr(Ye)),ft.complete}catch(tt){throw ci.create("storage-set",{originalErrorMessage:tt.message})}})).apply(this,arguments)}function lr(Ye){return`${Ye.name}!${Ye.options.appId}`}class po{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new ht(tt),this._heartbeatsCachePromise=this._storage.read().then(ft=>(this._heartbeatsCache=ft,ft))}triggerHeartbeat(){var Ie=this;return(0,c.Z)(function*(){const ft=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=br();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!Ie._heartbeatsCache.heartbeats.some(Ft=>Ft.date===Ut))return Ie._heartbeatsCache.heartbeats.push({date:Ut,agent:ft}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Ft=>{const j=new Date(Ft.date).valueOf();return Date.now()-j<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,c.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const tt=br(),{heartbeatsToSend:ft,unsentEntries:Ut}=function cr(Ye,Ie=1024){const tt=[];let ft=Ye.slice();for(const Ut of Ye){const Ft=tt.find(j=>j.agent===Ut.agent);if(Ft){if(Ft.dates.push(Ut.date),Dr(tt)>Ie){Ft.dates.pop();break}}else if(tt.push({agent:Ut.agent,dates:[Ut.date]}),Dr(tt)>Ie){tt.pop();break}ft=ft.slice(1)}return{heartbeatsToSend:tt,unsentEntries:ft}}(Ie._heartbeatsCache.heartbeats),Ft=(0,oe.L)(JSON.stringify({version:2,heartbeats:ft}));return Ie._heartbeatsCache.lastSentHeartbeatDate=tt,Ut.length>0?(Ie._heartbeatsCache.heartbeats=Ut,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Ft})()}}function br(){return(new Date).toISOString().substring(0,10)}class ht{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,c.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function wa(Ye){return $t.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var tt=this;return(0,c.Z)(function*(){var ft;if(yield tt._canUseIndexedDBPromise){const Ft=yield tt.read();return at(tt.app,{lastSentHeartbeatDate:null!==(ft=Ie.lastSentHeartbeatDate)&&void 0!==ft?ft:Ft.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var tt=this;return(0,c.Z)(function*(){var ft;if(yield tt._canUseIndexedDBPromise){const Ft=yield tt.read();return at(tt.app,{lastSentHeartbeatDate:null!==(ft=Ie.lastSentHeartbeatDate)&&void 0!==ft?ft:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Ie.heartbeats]})}})()}}function Dr(Ye){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Ye})).length}!function Bt(Ye){on(new K.wA("platform-logger",Ie=>new X(Ie),"PRIVATE")),on(new K.wA("heartbeat",Ie=>new po(Ie),"PRIVATE")),Jr(re,"0.7.20",Ye),Jr(re,"0.7.20","esm2017"),Jr("fire-js","")}("")},4859:(ut,Ee,O)=>{O.d(Ee,{H0:()=>he,wA:()=>k});var c=O(5861),K=O(2090);class k{constructor(G,H,Q){this.name=G,this.instanceFactory=H,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const oe="[DEFAULT]";class X{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const Q=new K.BH;if(this.instancesDeferred.set(H,Q),this.isInitialized(H)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:H});ze&&Q.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const Q=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),ze=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if(ze)return null;throw Ae}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function re(le){return"EAGER"===le.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(H){}for(const[H,Q]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(H);try{const Ae=this.getOrInitializeService({instanceIdentifier:ze});Q.resolve(Ae)}catch(Ae){}}}}clearInstance(G=oe){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,c.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...H.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=oe){return this.instances.has(G)}getOptions(G=oe){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,Q=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:Q,options:H});for(const[Ae,ke]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&ke.resolve(ze);return ze}onInit(G,H){var Q;const ze=this.normalizeInstanceIdentifier(H),Ae=null!==(Q=this.onInitCallbacks.get(ze))&&void 0!==Q?Q:new Set;Ae.add(G),this.onInitCallbacks.set(ze,Ae);const ke=this.instances.get(ze);return ke&&G(ke,ze),()=>{Ae.delete(G)}}invokeOnInitCallbacks(G,H){const Q=this.onInitCallbacks.get(H);if(Q)for(const ze of Q)try{ze(G,H)}catch(Ae){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let Q=this.instances.get(G);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(le=G,le===oe?void 0:le),options:H}),this.instances.set(G,Q),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(Q,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Q)}catch(ze){}var le;return Q||null}normalizeInstanceIdentifier(G=oe){return this.component?this.component.multipleInstances?G:oe:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new X(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ee,O)=>{O.d(Ee,{Am:()=>le,Ub:()=>he,Yd:()=>re,in:()=>K});const c=[];var K=(()=>{return(G=K||(K={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",K;var G})();const k={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,X={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ge=(G,H,...Q)=>{if(H<G.logLevel)return;const ze=(new Date).toISOString(),Ae=X[H];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ae](`[${ze}]  ${G.name}:`,...Q)};class re{constructor(H){this.name=H,this._logLevel=oe,this._logHandler=ge,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in K))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...H),this._logHandler(this,K.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...H),this._logHandler(this,K.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,K.INFO,...H),this._logHandler(this,K.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,K.WARN,...H),this._logHandler(this,K.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...H),this._logHandler(this,K.ERROR,...H)}}function he(G){c.forEach(H=>{H.setLogLevel(G)})}function le(G,H){for(const Q of c){let ze=null;H&&H.level&&(ze=k[H.level]),Q.userLogHandler=null===G?null:(Ae,ke,...Be)=>{const fe=Be.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(rt){return null}}).filter(De=>De).join(" ");ke>=(null!=ze?ze:Ae.logLevel)&&G({level:K[ke].toLowerCase(),message:fe,args:Be,type:Ae.name})}}}},5861:(ut,Ee,O)=>{function c(k,oe,X,ge,re,he,le){try{var G=k[he](le),H=G.value}catch(Q){return void X(Q)}G.done?oe(H):Promise.resolve(H).then(ge,re)}function K(k){return function(){var oe=this,X=arguments;return new Promise(function(ge,re){var he=k.apply(oe,X);function le(H){c(he,ge,re,le,G,"next",H)}function G(H){c(he,ge,re,le,G,"throw",H)}le(void 0)})}}O.d(Ee,{Z:()=>K})}},ut=>{ut(ut.s=9446)}]);